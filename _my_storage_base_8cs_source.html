<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Space Engineers: Sources/Sandbox.Game/Engine/Voxels/Storage/MyStorageBase.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Space Engineers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="dir_adcb7f0194fb5944415bcd7197787778.html">Sandbox.Game</a></li><li class="navelem"><a class="el" href="dir_38662c1c33bdf59b0e10164ceae4015b.html">Engine</a></li><li class="navelem"><a class="el" href="dir_3cf9bc50c9abd7c4555a7ac73a5c5da9.html">Voxels</a></li><li class="navelem"><a class="el" href="dir_809e0d504069742dea8b936ddf4421c7.html">Storage</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MyStorageBase.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_my_storage_base_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_definitions.html">Definitions</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_multiplayer.html">Multiplayer</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_world.html">World</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_collections.html">Collections</a>.<a class="code" href="namespace_system_1_1_collections_1_1_generic.html">Generic</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_i_o.html">IO</a>;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_i_o.html">IO</a>.Compression;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_parallel_tasks.html">ParallelTasks</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_collections.html">Collections</a>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_file_system.html">FileSystem</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_profiler.html">Profiler</a>;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_voxels.html">Voxels</a>;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_sandbox.html">Sandbox</a>.Engine.Voxels</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">partial class </span>MyStorageBase : <a class="code" href="namespace_i_my_storage.html">IMyStorage</a></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="keyword">struct </span>MyVoxelObjectDefinition</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;            <span class="keyword">public</span> readonly <span class="keywordtype">string</span> FilePath;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;            <span class="keyword">public</span> readonly Dictionary&lt;byte, byte&gt; Changes;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            <span class="keyword">public</span> MyVoxelObjectDefinition(<span class="keywordtype">string</span> filePath, Dictionary&lt;byte, byte&gt; changes)</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                FilePath = filePath;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                Changes = changes;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> GetHashCode()</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                unchecked</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                    <span class="keywordtype">int</span> hash = 17;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                    hash = hash * 486187739 + FilePath.GetHashCode();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    <span class="keywordflow">if</span> (Changes != null)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                    {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                        <span class="keywordflow">foreach</span> (var modifier <span class="keywordflow">in</span> Changes)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                        {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                            hash = hash * 486187739 + modifier.Key.GetHashCode();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                            hash = hash * 486187739 + modifier.Value.GetHashCode();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                        }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                    }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                    <span class="keywordflow">return</span> hash;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac145273e3647dde1f4a6c1917c6ca8a1">   53</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">string</span> STORAGE_TYPE_NAME_CELL = <span class="stringliteral">&quot;Cell&quot;</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ad751cdced3812a509b1190a6f942f94b">   54</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">int</span> STORAGE_TYPE_VERSION_CELL = 2;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aa46d57fbb9bc7ba88c88df86fc4d2f7b">   55</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">string</span> STORAGE_TYPE_NAME_OCTREE = <span class="stringliteral">&quot;Octree&quot;</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a26ae23ccff4a763cb4b55f27e7749186">   56</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">const</span> <span class="keywordtype">int</span> STORAGE_TYPE_VERSION_OCTREE = 1;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a82d52d7204c09af97d429970a18895e4">   58</a></span>&#160;        <span class="keyword">protected</span> byte[] <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a82d52d7204c09af97d429970a18895e4">m_compressedData</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_geometry.html">MyVoxelGeometry</a> m_geometry = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_geometry.html">MyVoxelGeometry</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a7771de798d2f9529709265f5d3cc5b3c">   60</a></span>&#160;        <span class="keyword">protected</span> readonly <a class="code" href="class_v_rage_1_1_fast_resource_lock.html">FastResourceLock</a> m_storageLock = <span class="keyword">new</span> <a class="code" href="class_v_rage_1_1_fast_resource_lock.html">FastResourceLock</a>();</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a4855567ef1da792fe1754b8de09c6d08">   61</a></span>&#160;        <span class="keyword">protected</span> byte m_defaultMaterial = <a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html">MyDefinitionManager</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#aa76b8697823951ea5c5ec16092b902ab">Static</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#a899302e21eb415a2b35cc3da4ce6cb85">GetDefaultVoxelMaterialDefinition</a>().<a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html#a7b1792a1559a41fa03cb519b5ea82fb9">Index</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a45f7e51b541bd4ae8867c9e20bf12c16">   63</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">abstract</span> <a class="code" href="interface_sandbox_1_1_engine_1_1_voxels_1_1_i_my_storage_data_provider.html">IMyStorageDataProvider</a> DataProvider { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a08214819abc659f969cc32ece05b1bad">   65</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> UseStorageCache = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keyword">static</span> <a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html">LRUCache&lt;int, MyStorageBase&gt;</a> m_storageCache = <span class="keyword">new</span> <a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html">LRUCache&lt;int, MyStorageBase&gt;</a>(16);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">static</span> <a class="code" href="class_v_rage_1_1_fast_resource_lock.html">FastResourceLock</a> m_loadCompressLock = <span class="keyword">new</span> <a class="code" href="class_v_rage_1_1_fast_resource_lock.html">FastResourceLock</a>();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a05797117ff9eb0dcbd525898cb0fdde3">   69</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="namespace_v_rage_1_1_game.html#ae840d3864e36153d6f5013c7a0403dcfaa6156ea9d66fef24e87e841fbabf7cca">Shared</a> { <span class="keyword">get</span>; <span class="keyword">protected</span> set; }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a3f726d391a6b89f93e24a24ec91a9895">   71</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> MarkedForClose { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">bool</span> Pinned</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#afe00a3b66deab4e560e944026dc351c1">   74</a></span>&#160;        {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_pinCount &gt; 0; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_geometry.html">MyVoxelGeometry</a> Geometry</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a0a95d099795fc9ee9ce25db55c460168">   79</a></span>&#160;        {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_geometry; }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> Size</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aaa9ff3bbede5de941c49d63b5a22dd32">   84</a></span>&#160;        {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keyword">get</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">protected</span> set;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac28943fc969dade35ec3560af3ad3b3d">   89</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">event</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_voxels.html#a0a3769e07e4323dd3d9b85637cdbd2cd">RangeChangedDelegate</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac28943fc969dade35ec3560af3ad3b3d">RangeChanged</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keyword">protected</span> <span class="keyword">internal</span> <span class="keywordtype">void</span> OnRangeChanged(<a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMin, <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMax, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> changedData)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">if</span> (RangeChanged != null)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                m_compressedData = null;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                this.ClampVoxelCoord(ref voxelRangeMin);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                this.ClampVoxelCoord(ref voxelRangeMax);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                RangeChanged(voxelRangeMin, voxelRangeMax, changedData);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a189054b203527efa403ff890f889944a">  102</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a189054b203527efa403ff890f889944a">MyStorageBase</a>()</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            Closed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af57ab33edb8786dd6a1b08f6a8b05b3a">  107</a></span>&#160;        <span class="keyword">public</span> unsafe <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af57ab33edb8786dd6a1b08f6a8b05b3a">ChangeMaterials</a>(Dictionary&lt;byte, byte&gt; map)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordtype">int</span> rewrites = 0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span> ((Size + 1).Size &gt; 4 * 1024 * 1024)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html">MyLog</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">Default</a>.Error(<span class="stringliteral">&quot;Cannot overwrite materials for a storage 4 MB or larger.&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> minCorner = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> maxCorner = Size - 1;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="comment">// I don&#39;t like this but write range will also allocate so f.. it.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> cache = <span class="keyword">new</span> <a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            cache.<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a6980695559311318c4a23d3a1bccbca0">Resize</a>(Size);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            ReadRange(cache, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#ad9f2bb2ea2d492180bc78ad28616eea5">Material</a>, 0, ref minCorner, ref maxCorner);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            var len = cache.<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a97ca92c182ec6a0d338266a5011d79ba">SizeLinear</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            fixed (byte* data = cache[<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Material])</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; len; i++)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    byte to;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    <span class="keywordflow">if</span> (map.TryGetValue(data[i], out to))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                        data[i] = to;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                        rewrites++;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">if</span> (rewrites &gt; 0) this.WriteRange(cache, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#ad9f2bb2ea2d492180bc78ad28616eea5">Material</a>, ref minCorner, ref maxCorner);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span> rewrites &gt; 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af68734c932623c793727078636a23f5d">  144</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af68734c932623c793727078636a23f5d">LoadFromFile</a>(<span class="keywordtype">string</span> absoluteFilePath, Dictionary&lt;byte, byte&gt; modifiers = null)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="comment">//get hash code</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            MyVoxelObjectDefinition definition = <span class="keyword">new</span> MyVoxelObjectDefinition(absoluteFilePath, modifiers);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordtype">int</span> sh = definition.GetHashCode();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> result = null;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">if</span> (UseStorageCache)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                result = m_storageCache.<a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#aabe17a56cb8fb1bcec9fb28d3f8b96d0">Read</a>(sh);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">if</span> (result != null)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    result.Shared = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">string</span> loadingMessage = <span class="stringliteral">&quot;Loading voxel storage from file &#39;{0}&#39;&quot;</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespace_my_file_system.html">MyFileSystem</a>.FileExists(absoluteFilePath))</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                var oldPath = <a class="code" href="namespace_path.html">Path</a>.ChangeExtension(absoluteFilePath, <span class="stringliteral">&quot;vox&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="keywordtype">string</span>.<a class="code" href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a>(loadingMessage, oldPath));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespace_my_file_system.html">MyFileSystem</a>.FileExists(oldPath))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    <span class="comment">//Debug.Fail(&quot;Voxel map could not be loaded! &quot; + absoluteFilePath);</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                UpdateFileFormat(oldPath);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="keywordtype">string</span>.<a class="code" href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a>(loadingMessage, absoluteFilePath));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            Debug.Assert(absoluteFilePath.EndsWith(MyVoxelConstants.FILE_EXTENSION));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            byte[] compressedData = null;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keyword">using</span> (var file = <a class="code" href="namespace_my_file_system.html">MyFileSystem</a>.OpenRead(absoluteFilePath))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                compressedData = <span class="keyword">new</span> byte[file.Length];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                file.Read(compressedData, 0, compressedData.Length);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="comment">// JC: with Parallelization, it was crashing the game here, without lock</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keyword">using</span> (m_loadCompressLock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                result = Load(compressedData);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="comment">//change materials</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (definition.Changes != null)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                result.ChangeMaterials(definition.Changes);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (UseStorageCache)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                m_storageCache.<a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#a0894e66bb2c32b67ef32355d9abf26bb">Write</a>(sh, result);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                result.Shared = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                m_storageCache.<a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#a68fcd763c5936f80577d56289901ad86">Reset</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a3d15d3cf87cfcded360d397223e14f35">  210</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a3d15d3cf87cfcded360d397223e14f35">ResetCache</a>()</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            m_storageCache.<a class="code" href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#a68fcd763c5936f80577d56289901ad86">Reset</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af550e98c860a704cb75293a2ed6a6fac">  215</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af550e98c860a704cb75293a2ed6a6fac">Load</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            Debug.Assert(name != null, <span class="stringliteral">&quot;Name shouldn&#39;t be null&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> result = null;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="comment">//If there are some voxels from multiplayer, use them (because it appears that we changed to server from client)</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">if</span> (MyMultiplayer.Static == null || MyMultiplayer.Static.IsServer)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                var filePath = <a class="code" href="namespace_path.html">Path</a>.IsPathRooted(name) ? name : <a class="code" href="namespace_path.html">Path</a>.Combine(<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a0f50a556656cd03eab18484bfc77b7ec">CurrentPath</a>, name + MyVoxelConstants.FILE_EXTENSION);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="comment">//By Gregory: Added for compatibility with old saves</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                result = <a class="code" href="namespace_v_rage_1_1_profiler.html#afab61f66bd7416917d69efed84e707d3ae98bc9737aee4ba6fe369d95b780bbd7">LoadFromFile</a>(filePath);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">if</span> (MyMultiplayer.Static.VoxelMapData.ContainsKey(name))</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    result = Load(MyMultiplayer.Static.VoxelMapData[name]);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    Debug.Fail(<span class="stringliteral">&quot;Missing voxel map data! : &quot;</span> + name);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_networking.html">Networking</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper.html">MyAnalyticsHelper</a>.ReportActivityStart(null, <span class="stringliteral">&quot;Missing voxel map data!&quot;</span>, name, <span class="stringliteral">&quot;DevNote&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    <span class="keywordflow">throw</span>  <span class="keyword">new</span> Exception(<span class="keywordtype">string</span>.<a class="code" href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a>(<span class="stringliteral">&quot;Missing voxel map data! : {0}&quot;</span>,name));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a22c5755de000cced9bd513e7dee5ff43">  242</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a22c5755de000cced9bd513e7dee5ff43">Load</a>(byte[] memoryBuffer)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> storage;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordtype">bool</span> isOldFormat;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keyword">using</span> (var ms = <span class="keyword">new</span> MemoryStream(memoryBuffer, <span class="keyword">false</span>))</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keyword">using</span> (var gz = <span class="keyword">new</span> GZipStream(ms, CompressionMode.Decompress))</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                Load(gz, out storage, out isOldFormat);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (!isOldFormat)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                storage.m_compressedData = memoryBuffer;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Voxel storage was in old format. It is updated but needs to be saved.&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                storage.m_compressedData = null;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">return</span> storage;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Load(Stream stream, out <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">MyStorageBase</a> storage, out <span class="keywordtype">bool</span> isOldFormat)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;MyStorageBase.Load&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                isOldFormat = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keywordtype">string</span> storageType = stream.ReadString();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordtype">int</span> version = stream.Read7BitEncodedInt();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <span class="keywordflow">if</span> (storageType == STORAGE_TYPE_NAME_CELL)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    storage = Compatibility_LoadCellStorage(version, stream);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    isOldFormat = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (storageType == STORAGE_TYPE_NAME_OCTREE)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    storage = <span class="keyword">new</span> MyOctreeStorage();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    storage.LoadInternal(version, stream, ref isOldFormat);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    storage.m_geometry.Init(storage);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_system_1_1_invalid_branch_exception.html">InvalidBranchException</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a1ec0ac1439ae2825f0e86da1e2292435">  291</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a1ec0ac1439ae2825f0e86da1e2292435">Save</a>(out byte[] outCompressedData)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html">MyPrecalcComponent</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html#a8b1e0271f35c70207a614b2909c35374">AssertUpdateThread</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="comment">// We must flush all caches before saving.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">if</span> (CachedWrites)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                WritePending(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;MyStorageBase.Save&quot;</span>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">if</span> (m_compressedData == null)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    SaveCompressedData(out m_compressedData);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                outCompressedData = m_compressedData;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ad558ef7f1c95806200295fd889d576e9">  315</a></span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ad558ef7f1c95806200295fd889d576e9">SaveCompressedData</a>(out byte[] compressedData)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            MemoryStream ms;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keyword">using</span> (ms = <span class="keyword">new</span> MemoryStream(0x4000))</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keyword">using</span> (GZipStream gz = <span class="keyword">new</span> GZipStream(ms, CompressionMode.Compress))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keyword">using</span> (BufferedStream buf = <span class="keyword">new</span> BufferedStream(gz, 0x4000))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keywordtype">string</span> name;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordtype">int</span> version;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordflow">if</span> (GetType() == typeof(<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_octree_storage.html">MyOctreeStorage</a>))</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    name = STORAGE_TYPE_NAME_OCTREE;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    version = STORAGE_TYPE_VERSION_OCTREE;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_system_1_1_invalid_branch_exception.html">InvalidBranchException</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                buf.WriteNoAlloc(name);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                buf.Write7BitEncodedInt(version);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                SaveInternal(buf);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            compressedData = ms.ToArray();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a08c2f27a427bd45a98f8b5718bcc0e65">  345</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a08c2f27a427bd45a98f8b5718bcc0e65">Reset</a>(<a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToReset)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html">MyPrecalcComponent</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html#a8b1e0271f35c70207a614b2909c35374">AssertUpdateThread</a>();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                m_compressedData = null;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                ResetInternal(dataToReset);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            OnRangeChanged(<a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, Size - 1, dataToReset);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a87cdc335f1b833cea109e93d99bd97a0">  357</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a87cdc335f1b833cea109e93d99bd97a0">OverwriteAllMaterials</a>(<a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> material)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html">MyPrecalcComponent</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html#a8b1e0271f35c70207a614b2909c35374">AssertUpdateThread</a>();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                m_compressedData = null;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                OverwriteAllMaterialsInternal(material);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            OnRangeChanged(<a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, Size - 1, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.Material);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a908fb0dba4d27743021267b3c3cd74d6">  369</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a908fb0dba4d27743021267b3c3cd74d6">WriteRange</a>(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> source, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToWrite, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMax)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html">MyPrecalcComponent</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html#a8b1e0271f35c70207a614b2909c35374">AssertUpdateThread</a>();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            ProfilerShort.Begin(GetType().Name + <span class="stringliteral">&quot;.WriteRange&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                m_compressedData = null;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">if</span> (CachedWrites &amp;&amp; (m_pendingChunksToWrite.Count &lt; WriteCacheCap || OverlapsAnyCachedCell(voxelRangeMin, voxelRangeMax)))</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    var lodDiff = <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html">VoxelChunk</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html#ad673545a43d223d96a67a4abf8f1d075">SizeBits</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    var chunkMin = voxelRangeMin &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    var chunkMax = voxelRangeMax &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    var pos = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    <span class="keywordflow">for</span> (pos.Z = chunkMin.Z; pos.Z &lt;= chunkMax.Z; ++pos.Z)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        <span class="keywordflow">for</span> (pos.Y = chunkMin.Y; pos.Y &lt;= chunkMax.Y; ++pos.Y)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                            <span class="keywordflow">for</span> (pos.X = chunkMin.X; pos.X &lt;= chunkMax.X; ++pos.X)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                var celPos = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                var lodCkStart = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                lodCkStart = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a0b0024d77c786534c62efc8a9ea3a73d">Max</a>(lodCkStart, voxelRangeMin);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                var lodCkEnd = ((pos + 1) &lt;&lt; lodDiff) - 1;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                lodCkEnd = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aaa8bbcd13960a22617898e9c991a3f7d">Min</a>(lodCkEnd, voxelRangeMax);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                var targetOffset = lodCkStart - voxelRangeMin;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html">VoxelChunk</a> chunk;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                <span class="comment">// Do not read the chunk if the range overlaps the whole chunk</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                var toRead = (lodCkEnd - lodCkStart + 1).Size != <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html">VoxelChunk</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html#a0ac3c07677ea85019613283ab0efe1e4">Volume</a> ? dataToWrite : 0;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                GetChunk(ref pos, out chunk, toRead);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                lodCkStart -= celPos;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                lodCkEnd -= celPos;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                <span class="keyword">using</span> (chunk.Lock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                    <span class="keywordtype">bool</span> dirty = chunk.Dirty != 0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                    chunk.Write(source, dataToWrite, ref targetOffset, ref lodCkStart, ref lodCkEnd);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                    <span class="keywordflow">if</span> (!dirty) m_pendingChunksToWrite.Enqueue(pos);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                            }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <span class="keyword">using</span> (m_storageLock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        WriteRangeInternal(source, dataToWrite, ref voxelRangeMin, ref voxelRangeMax);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                ProfilerShort.BeginNextBlock(GetType().Name + <span class="stringliteral">&quot;.OnRangeChanged&quot;</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                OnRangeChanged(voxelRangeMin, voxelRangeMax, dataToWrite);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aa44230f1874ec48dc4e29452ea964871">  433</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aa44230f1874ec48dc4e29452ea964871">ReadRange</a>(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> target, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToRead, <span class="keywordtype">int</span> lodIndex, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMax)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a> flags = 0;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            ReadRange(target, dataToRead, lodIndex, ref lodVoxelRangeMin, ref lodVoxelRangeMax, ref flags);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ReadRangeAdviseCache(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> target, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToRead, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMax)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="comment">// Skip if too many cached cells</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">if</span> (m_pendingChunksToWrite.Count &gt; WriteCacheCap)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                ReadRange(target, dataToRead, 0, ref lodVoxelRangeMin, ref lodVoxelRangeMax);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">if</span> (CachedWrites)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                var lodDiff = VoxelChunk.SizeBits;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                var chunkMin = lodVoxelRangeMin &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                var chunkMax = lodVoxelRangeMax &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                var pos = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">for</span> (pos.Z = chunkMin.Z; pos.Z &lt;= chunkMax.Z; ++pos.Z)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    <span class="keywordflow">for</span> (pos.Y = chunkMin.Y; pos.Y &lt;= chunkMax.Y; ++pos.Y)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        <span class="keywordflow">for</span> (pos.X = chunkMin.X; pos.X &lt;= chunkMax.X; ++pos.X)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                        {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                            var celPos = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                            var lodCkStart = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                            lodCkStart = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a0b0024d77c786534c62efc8a9ea3a73d">Max</a>(lodCkStart, lodVoxelRangeMin);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                            var targetOffset = lodCkStart - lodVoxelRangeMin;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            var lodCkEnd = ((pos + 1) &lt;&lt; lodDiff) - 1;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                            lodCkEnd = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aaa8bbcd13960a22617898e9c991a3f7d">Min</a>(lodCkEnd, lodVoxelRangeMax);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                            VoxelChunk chunk;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                            GetChunk(ref pos, out chunk, dataToRead);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            lodCkStart -= celPos;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                            lodCkEnd -= celPos;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            <span class="keyword">using</span> (chunk.Lock.AcquireSharedUsing())</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                chunk.ReadLod(target, dataToRead, ref targetOffset, 0, ref lodCkStart, ref lodCkEnd);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                        }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a773c2eef1beb80c610b14bb1da1c7686">  482</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a773c2eef1beb80c610b14bb1da1c7686">ReadRange</a>(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> target, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToRead, <span class="keywordtype">int</span> lodIndex, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMax, ref <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a> requestFlags)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            ProfilerShort.Begin(GetType().Name + <span class="stringliteral">&quot;.ReadRange&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">if</span> ((dataToRead &amp; <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.Content) != 0)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                target.<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a9dafb54e33a62ddcfa1ecfd2ad4f2c56">ClearContent</a>(0);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (requestFlags.HasFlags(<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.AdviseCache) &amp;&amp; lodIndex == 0 &amp;&amp; CachedWrites)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                ReadRangeAdviseCache(target, dataToRead, ref lodVoxelRangeMin, ref lodVoxelRangeMax);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">if</span> (CachedWrites &amp;&amp; lodIndex &lt;= VoxelChunk.SizeBits &amp;&amp; m_cachedChunks.Count &gt; 0)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <span class="comment">// read occlusion separate</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">if</span> (dataToRead.Requests(<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Occlusion))</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        ReadRangeInternal(target, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.Occlusion, lodIndex, ref lodVoxelRangeMin, ref lodVoxelRangeMax, ref requestFlags);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    dataToRead ^= <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.Occlusion;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="keywordflow">if</span> (m_tmpChunks == null) m_tmpChunks = <span class="keyword">new</span> List&lt;VoxelChunk&gt;();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                var lodDiff = <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html">VoxelChunk</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html#ad673545a43d223d96a67a4abf8f1d075">SizeBits</a> - lodIndex;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                <span class="comment">// We fetch which chunks overlap our current range from the chunk tree, then we read all data from storage and apply those changes</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                var querybb = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a4f6647b688ebe11f9de2f9a037f5850a">BoundingBox</a>(lodVoxelRangeMin &lt;&lt; lodIndex, lodVoxelRangeMax &lt;&lt; lodIndex);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keyword">using</span> (m_cacheLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    m_cacheMap.OverlapAllBoundingBox(ref querybb, m_tmpChunks, 0, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">if</span> (m_tmpChunks.Count &gt; 0)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    var chunkMin = lodVoxelRangeMin &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    var chunkMax = lodVoxelRangeMax &gt;&gt; lodDiff;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    <span class="keywordtype">bool</span> readFromStorage = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    <span class="keywordflow">if</span> ((chunkMax - chunkMin + 1).Size &gt; m_tmpChunks.Count)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                        <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                            ReadRangeInternal(target, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, dataToRead, lodIndex, ref lodVoxelRangeMin, ref lodVoxelRangeMax, ref requestFlags);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                        readFromStorage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_tmpChunks.Count; ++i)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                        var chunk = m_tmpChunks[i];</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        var pos = chunk.Coords;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                        var celPos = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        var lodCkStart = pos &lt;&lt; lodDiff;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                        lodCkStart = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a0b0024d77c786534c62efc8a9ea3a73d">Max</a>(lodCkStart, lodVoxelRangeMin);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        var targetOffset = lodCkStart - lodVoxelRangeMin;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        var lodCkEnd = ((pos + 1) &lt;&lt; lodDiff) - 1;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                        lodCkEnd = <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aaa8bbcd13960a22617898e9c991a3f7d">Min</a>(lodCkEnd, lodVoxelRangeMax);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        lodCkStart -= celPos;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                        lodCkEnd -= celPos;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                        <span class="keywordflow">if</span> ((chunk.Cached &amp; dataToRead) != dataToRead &amp;&amp; !readFromStorage)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                            <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                <span class="keywordflow">if</span> ((chunk.Cached &amp; dataToRead) != dataToRead)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                    ReadDatForChunk(chunk, dataToRead);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        <span class="keyword">using</span> (chunk.Lock.AcquireSharedUsing())</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                            chunk.ReadLod(target, !readFromStorage ? dataToRead : dataToRead &amp; chunk.Cached, ref targetOffset, lodIndex, ref lodCkStart, ref lodCkEnd);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    m_tmpChunks.Clear();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    ProfilerShort.End();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="comment">// all else</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                ReadRangeInternal(target, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, dataToRead, lodIndex, ref lodVoxelRangeMin, ref lodVoxelRangeMax, ref requestFlags);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a86637d99e2abb74797eff11310ec617d">  575</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="namespace_v_rage_math.html#a4f89af233f1aef65e9d05a18cb44d4cf">ContainmentType</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a86637d99e2abb74797eff11310ec617d">Intersect</a>(ref <a class="code" href="namespace_bounding_box.html">BoundingBox</a> box, <span class="keywordtype">bool</span> lazy)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="keywordflow">if</span> (Closed) <span class="keywordflow">return</span> <a class="code" href="namespace_v_rage_math.html#a4f89af233f1aef65e9d05a18cb44d4cf">ContainmentType</a>.Disjoint;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="keywordflow">return</span> IntersectInternal(ref box, lazy);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a16ffa1592c01f3d4a85f2998aec53b44">  584</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a16ffa1592c01f3d4a85f2998aec53b44">Intersect</a>(ref <a class="code" href="struct_v_rage_math_1_1_line_d.html">LineD</a> line)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireSharedUsing())</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                <span class="keywordflow">if</span> (Closed) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordflow">return</span> IntersectInternal(ref line);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keyword">public</span> <span class="keyword">abstract</span> <a class="code" href="namespace_v_rage_math.html#a4f89af233f1aef65e9d05a18cb44d4cf">ContainmentType</a> IntersectInternal(ref <a class="code" href="namespace_bounding_box.html">BoundingBox</a> box, <span class="keywordtype">bool</span> lazy);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">bool</span> IntersectInternal(ref <a class="code" href="struct_v_rage_math_1_1_line_d.html">LineD</a> line);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> LoadInternal(<span class="keywordtype">int</span> fileVersion, Stream stream, ref <span class="keywordtype">bool</span> isOldFormat);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> SaveInternal(Stream stream);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> ResetInternal(<a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToReset);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> OverwriteAllMaterialsInternal(<a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> material);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> WriteRangeInternal(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> source, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToWrite, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> voxelRangeMax);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> ReadRangeInternal(<a class="code" href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">MyStorageData</a> target, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> targetWriteRange, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a> dataToRead, <span class="keywordtype">int</span> lodIndex, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMin, ref <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> lodVoxelRangeMax, ref <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a> requestFlags);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f7262a809be81822720efa3fa0f6589">  606</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f7262a809be81822720efa3fa0f6589">DebugDraw</a>(<a class="code" href="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base.html">MyVoxelBase</a> voxelMap, <a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html#a0844dd91c423edc7fd264aabe08b350d">MyVoxelDebugDrawMode</a> mode) { }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> UpdateFileFormat(<span class="keywordtype">string</span> originalVoxFile)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            var newFile = <a class="code" href="namespace_path.html">Path</a>.ChangeExtension(originalVoxFile, MyVoxelConstants.FILE_EXTENSION);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">if</span> (!File.Exists(originalVoxFile))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.Error(<span class="stringliteral">&quot;Voxel file &#39;{0}&#39; does not exist!&quot;</span>, originalVoxFile);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_path.html">Path</a>.GetExtension(originalVoxFile) != <span class="stringliteral">&quot;.vox&quot;</span>)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.Warning(<span class="stringliteral">&quot;Unexpected voxel file extensions in path: &#39;{0}&#39;&quot;</span>, originalVoxFile);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keyword">using</span> (var decompressFile = <span class="keyword">new</span> <a class="code" href="class_v_rage_1_1_my_compression_file_load.html">MyCompressionFileLoad</a>(originalVoxFile))</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keyword">using</span> (var file = <a class="code" href="namespace_my_file_system.html">MyFileSystem</a>.OpenWrite(newFile))</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="keyword">using</span> (var gzip = <span class="keyword">new</span> GZipStream(file, CompressionMode.Compress))</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keyword">using</span> (var buffer = <span class="keyword">new</span> BufferedStream(gzip))</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    buffer.WriteNoAlloc(STORAGE_TYPE_NAME_CELL);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="comment">// File version. New format will store it in 7bit encoded int right after the name of storage.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    buffer.Write7BitEncodedInt(decompressFile.GetInt32());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="comment">// All remaining data is unchanged. Just copy it to new file.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    byte[] tmp = <span class="keyword">new</span> byte[0x4000];</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="keywordtype">int</span> bytesRead = decompressFile.GetBytes(tmp.Length, tmp);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <span class="keywordflow">while</span> (bytesRead != 0)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                        buffer.Write(tmp, 0, bytesRead);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        bytesRead = decompressFile.GetBytes(tmp.Length, tmp);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                MySandboxGame.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a34c3aba69a904b77b1f4bd2628498590">Log</a>.Error(<span class="stringliteral">&quot;While updating voxel storage &#39;{0}&#39; to new format: {1}&quot;</span>, originalVoxFile, e.Message);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af36a3bd4672851c1cde71061b688509c">  650</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af36a3bd4672851c1cde71061b688509c">Reset</a>()</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            OnRangeChanged(<a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">Zero</a>, Size - 1, <a class="code" href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">MyStorageDataTypeFlags</a>.All);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ae9cbe7104c8b25e9e1c3cbd7f710b980">  655</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <a class="code" href="namespace_i_my_storage.html">IMyStorage</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ae9cbe7104c8b25e9e1c3cbd7f710b980">Copy</a>()</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f8d017333e9e0ad060f19bd258eb1aa">  660</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f8d017333e9e0ad060f19bd258eb1aa">CloseInternal</a>()</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keyword">using</span> (m_storageLock.AcquireExclusiveUsing())</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                Closed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">if</span> (RangeChanged != null)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="keywordflow">foreach</span> (var handler <span class="keywordflow">in</span> RangeChanged.GetInvocationList())</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        RangeChanged -= (<a class="code" href="namespace_sandbox_1_1_engine_1_1_voxels.html#a0a3769e07e4323dd3d9b85637cdbd2cd">RangeChangedDelegate</a>)handler;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">if</span> (DataProvider != null)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    DataProvider.Close();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="keywordflow">if</span> (CachedWrites)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                OperationsComponent.Remove(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a0ffd662527fa374cda4e1a28ca974f8c">  679</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> Closed { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac4d4462fdb46da399685f11ea6440888">  681</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac4d4462fdb46da399685f11ea6440888">Close</a>()</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">if</span> (Pinned)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                MarkedForClose = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                CloseInternal();</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> m_pinCount = 0;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_parallel_tasks_1_1_spin_lock_ref.html">SpinLockRef</a> m_pinLock = <span class="keyword">new</span> <a class="code" href="class_parallel_tasks_1_1_spin_lock_ref.html">SpinLockRef</a>();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#abe6742e34885e4bc4e466338125398e9">  693</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_storage_pin.html">StoragePin</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#abe6742e34885e4bc4e466338125398e9">Pin</a>()</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keyword">using</span> (m_pinLock.<a class="code" href="class_parallel_tasks_1_1_spin_lock_ref.html#a15fdfe609d3a31d64c916e6d14467476">Acquire</a>())</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">if</span> (Closed) <span class="keywordflow">return</span> <span class="keywordflow">default</span>(<a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_storage_pin.html">StoragePin</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                m_pinCount++;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_storage_pin.html">StoragePin</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aac3b48d48ff8ab2fbc27124d065be5f9">  704</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aac3b48d48ff8ab2fbc27124d065be5f9">Unpin</a>()</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keyword">using</span> (m_pinLock.<a class="code" href="class_parallel_tasks_1_1_spin_lock_ref.html#a15fdfe609d3a31d64c916e6d14467476">Acquire</a>())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                m_pinCount--;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                <span class="keywordflow">if</span> (m_pinCount &lt; 1 &amp;&amp; MarkedForClose)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    CloseInternal();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="ttc" id="namespace_sandbox_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_game.html">Sandbox.Game</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_storage_pin_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_storage_pin.html">Sandbox.Engine.Voxels.StoragePin</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_voxels_2_storage_2_i_my_storage_8cs_source.html#l00096">IMyStorage.cs:96</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a22c5755de000cced9bd513e7dee5ff43"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a22c5755de000cced9bd513e7dee5ff43">Sandbox.Engine.Voxels.MyStorageBase.Load</a></div><div class="ttdeci">static MyStorageBase Load(byte[] memoryBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00242">MyStorageBase.cs:242</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html">VRage.Utils.MyLog</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00049">MyLog.cs:49</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_world_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_world.html">Sandbox.Game.World</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_build_component_base_8cs_source.html#l00022">MyBuildComponentBase.cs:22</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_line_d_html"><div class="ttname"><a href="struct_v_rage_math_1_1_line_d.html">VRageMath.LineD</a></div><div class="ttdef"><b>Definition:</b> <a href="_line_d_8cs_source.html#l00009">LineD.cs:9</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a3d15d3cf87cfcded360d397223e14f35"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a3d15d3cf87cfcded360d397223e14f35">Sandbox.Engine.Voxels.MyStorageBase.ResetCache</a></div><div class="ttdeci">static void ResetCache()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00210">MyStorageBase.cs:210</a></div></div>
<div class="ttc" id="class_v_rage_1_1_voxels_1_1_my_storage_data_html_a97ca92c182ec6a0d338266a5011d79ba"><div class="ttname"><a href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a97ca92c182ec6a0d338266a5011d79ba">VRage.Voxels.MyStorageData.SizeLinear</a></div><div class="ttdeci">int SizeLinear</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_data_8cs_source.html#l00044">MyStorageData.cs:44</a></div></div>
<div class="ttc" id="class_v_rage_1_1_collections_1_1_l_r_u_cache_html"><div class="ttname"><a href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html">VRage.Collections.LRUCache</a></div><div class="ttdef"><b>Definition:</b> <a href="_l_r_u_cache_8cs_source.html#l00007">LRUCache.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a16ffa1592c01f3d4a85f2998aec53b44"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a16ffa1592c01f3d4a85f2998aec53b44">Sandbox.Engine.Voxels.MyStorageBase.Intersect</a></div><div class="ttdeci">bool Intersect(ref LineD line)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00584">MyStorageBase.cs:584</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition_html_a7b1792a1559a41fa03cb519b5ea82fb9"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html#a7b1792a1559a41fa03cb519b5ea82fb9">Sandbox.Definitions.MyVoxelMaterialDefinition.Index</a></div><div class="ttdeci">byte Index</div><div class="ttdoc">Value generated at runtime to ensure correctness. Do not serialize or deserialize. This is what the old cast to int used to result into, but now numbers depend on order in XML file. TODO Serialize to XML and ensure upon loading that these values are starting from 0 and continuous. </div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_material_definition_8cs_source.html#l00062">MyVoxelMaterialDefinition.cs:62</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a8f7262a809be81822720efa3fa0f6589"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f7262a809be81822720efa3fa0f6589">Sandbox.Engine.Voxels.MyStorageBase.DebugDraw</a></div><div class="ttdeci">virtual void DebugDraw(MyVoxelBase voxelMap, MyVoxelDebugDrawMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00606">MyStorageBase.cs:606</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_1_1_generic_html"><div class="ttname"><a href="namespace_system_1_1_collections_1_1_generic.html">System.Collections.Generic</a></div><div class="ttdef"><b>Definition:</b> <a href="_dictionary_extensions_8cs_source.html#l00007">DictionaryExtensions.cs:7</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_collections_html"><div class="ttname"><a href="namespace_v_rage_1_1_collections.html">VRage.Collections</a></div><div class="ttdef"><b>Definition:</b> <a href="_caching_dictionary_8cs_source.html#l00007">CachingDictionary.cs:7</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine.html">Sandbox.Engine</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_multiplayer_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_multiplayer.html">Sandbox.Engine.Multiplayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_client_debug_commands_8cs_source.html#l00016">MyClientDebugCommands.cs:16</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition_html"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">Sandbox.Definitions.MyVoxelMaterialDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_material_definition_8cs_source.html#l00015">MyVoxelMaterialDefinition.cs:15</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a08c2f27a427bd45a98f8b5718bcc0e65"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a08c2f27a427bd45a98f8b5718bcc0e65">Sandbox.Engine.Voxels.MyStorageBase.Reset</a></div><div class="ttdeci">void Reset(MyStorageDataTypeFlags dataToReset)</div><div class="ttdoc">Resets the data specified by flags to values from data provider, or default if no provider is assigne...</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00345">MyStorageBase.cs:345</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html_af76bbf8ef1269420760d55cacd951912"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Sandbox.Game.World.MySession.Static</a></div><div class="ttdeci">static MySession Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8cs_source.html#l00102">MySession.cs:102</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_a0b0024d77c786534c62efc8a9ea3a73d"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#a0b0024d77c786534c62efc8a9ea3a73d">VRageMath.Vector3I.Max</a></div><div class="ttdeci">static Vector3I Max(Vector3I value1, Vector3I value2)</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00447">Vector3I.cs:447</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_v_rage_1_1_fast_resource_lock_html"><div class="ttname"><a href="class_v_rage_1_1_fast_resource_lock.html">VRage.FastResourceLock</a></div><div class="ttdef"><b>Definition:</b> <a href="_fast_resource_lock_8cs_source.html#l00007">FastResourceLock.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk_html_a0ac3c07677ea85019613283ab0efe1e4"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html#a0ac3c07677ea85019613283ab0efe1e4">Sandbox.Engine.Voxels.MyStorageBase.VoxelChunk.Volume</a></div><div class="ttdeci">const int Volume</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8_cache_8cs_source.html#l00019">MyStorageBase.Cache.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a189054b203527efa403ff890f889944a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a189054b203527efa403ff890f889944a">Sandbox.Engine.Voxels.MyStorageBase.MyStorageBase</a></div><div class="ttdeci">MyStorageBase()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00102">MyStorageBase.cs:102</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html_a4f89af233f1aef65e9d05a18cb44d4cf"><div class="ttname"><a href="namespace_v_rage_math.html#a4f89af233f1aef65e9d05a18cb44d4cf">VRageMath.ContainmentType</a></div><div class="ttdeci">ContainmentType</div><div class="ttdoc">Indicates the extent to which bounding volumes intersect or contain one another. </div><div class="ttdef"><b>Definition:</b> <a href="_containment_type_8cs_source.html#l00007">ContainmentType.cs:7</a></div></div>
<div class="ttc" id="class_parallel_tasks_1_1_spin_lock_ref_html_a15fdfe609d3a31d64c916e6d14467476"><div class="ttname"><a href="class_parallel_tasks_1_1_spin_lock_ref.html#a15fdfe609d3a31d64c916e6d14467476">ParallelTasks.SpinLockRef.Acquire</a></div><div class="ttdeci">Token Acquire()</div><div class="ttdef"><b>Definition:</b> <a href="_spin_lock_ref_8cs_source.html#l00028">SpinLockRef.cs:28</a></div></div>
<div class="ttc" id="namespace_i_my_storage_html"><div class="ttname"><a href="namespace_i_my_storage.html">IMyStorage</a></div></div>
<div class="ttc" id="_my_gui_skin_definition_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">using System</div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_skin_definition_8cs_source.html#l00001">MyGuiSkinDefinition.cs:1</a></div></div>
<div class="ttc" id="class_v_rage_1_1_voxels_1_1_my_storage_data_html"><div class="ttname"><a href="class_v_rage_1_1_voxels_1_1_my_storage_data.html">VRage.Voxels.MyStorageData</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_data_8cs_source.html#l00014">MyStorageData.cs:14</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a8f45636aeb06bcc409b3d95f18d05694"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">VRage.Voxels.MyStorageDataTypeEnum</a></div><div class="ttdeci">MyStorageDataTypeEnum</div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00013">Enums.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component_html_a8b1e0271f35c70207a614b2909c35374"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html#a8b1e0271f35c70207a614b2909c35374">Sandbox.Engine.Voxels.MyPrecalcComponent.AssertUpdateThread</a></div><div class="ttdeci">static void AssertUpdateThread()</div><div class="ttdef"><b>Definition:</b> <a href="_my_precalc_component_8cs_source.html#l00114">MyPrecalcComponent.cs:114</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_definitions_html"><div class="ttname"><a href="namespace_sandbox_1_1_definitions.html">Sandbox.Definitions</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_common_2_my_definition_errors_8cs_source.html#l00008">MyDefinitionErrors.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_precalc_component.html">Sandbox.Engine.Voxels.MyPrecalcComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_precalc_component_8cs_source.html#l00035">MyPrecalcComponent.cs:35</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_utils_html"><div class="ttname"><a href="namespace_v_rage_1_1_utils.html">VRage.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my5_bit_encoding_8cs_source.html#l00006">My5BitEncoding.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper.html">Sandbox.Engine.Networking.MyAnalyticsHelper</a></div><div class="ttdoc">Helper class to call used analytics in a game (implementation of IMyAnalytics interface) ...</div><div class="ttdef"><b>Definition:</b> <a href="_my_analytics_helper_8cs_source.html#l00031">MyAnalyticsHelper.cs:31</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_a5869a329e136302ab34de4aeab73bf00"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#a5869a329e136302ab34de4aeab73bf00">VRageMath.Vector3I.Zero</a></div><div class="ttdeci">static Vector3I Zero</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00101">Vector3I.cs:101</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html">Sandbox.MySandboxGame</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00074">MySandboxGame.cs:74</a></div></div>
<div class="ttc" id="class_parallel_tasks_1_1_spin_lock_ref_html"><div class="ttname"><a href="class_parallel_tasks_1_1_spin_lock_ref.html">ParallelTasks.SpinLockRef</a></div><div class="ttdef"><b>Definition:</b> <a href="_spin_lock_ref_8cs_source.html#l00008">SpinLockRef.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_networking_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_networking.html">Sandbox.Engine.Networking</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_analytics_8cs_source.html#l00008">IMyAnalytics.cs:8</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a472f51a8fd201d68f1aed2d709473adc"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a472f51a8fd201d68f1aed2d709473adc">VRage.Voxels.MyStorageDataTypeFlags</a></div><div class="ttdeci">MyStorageDataTypeFlags</div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00023">Enums.cs:23</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_aac3b48d48ff8ab2fbc27124d065be5f9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aac3b48d48ff8ab2fbc27124d065be5f9">Sandbox.Engine.Voxels.MyStorageBase.Unpin</a></div><div class="ttdeci">void Unpin()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00704">MyStorageBase.cs:704</a></div></div>
<div class="ttc" id="namespace_bounding_box_html"><div class="ttname"><a href="namespace_bounding_box.html">BoundingBox</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_voxels_1_1_i_my_storage_data_provider_html"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_voxels_1_1_i_my_storage_data_provider.html">Sandbox.Engine.Voxels.IMyStorageDataProvider</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_storage_data_provider_8cs_source.html#l00051">IMyStorageDataProvider.cs:51</a></div></div>
<div class="ttc" id="class_v_rage_1_1_collections_1_1_l_r_u_cache_html_aabe17a56cb8fb1bcec9fb28d3f8b96d0"><div class="ttname"><a href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#aabe17a56cb8fb1bcec9fb28d3f8b96d0">VRage.Collections.LRUCache.Read</a></div><div class="ttdeci">TValue Read(TKey key)</div><div class="ttdef"><b>Definition:</b> <a href="_l_r_u_cache_8cs_source.html#l00079">LRUCache.cs:79</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a280e0f68244c251cc79e8e6862340bf2"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">VRage.Utils.MyLog.WriteLine</a></div><div class="ttdeci">void WriteLine(string message, LoggingOptions option)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00347">MyLog.cs:347</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_af36a3bd4672851c1cde71061b688509c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af36a3bd4672851c1cde71061b688509c">Sandbox.Engine.Voxels.MyStorageBase.Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00650">MyStorageBase.cs:650</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base.html">Sandbox.Game.Entities.MyVoxelBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_base_8cs_source.html#l00029">MyVoxelBase.cs:29</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_html_a0844dd91c423edc7fd264aabe08b350d"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities.html#a0844dd91c423edc7fd264aabe08b350d">Sandbox.Game.Entities.MyVoxelDebugDrawMode</a></div><div class="ttdeci">MyVoxelDebugDrawMode</div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_map_8cs_source.html#l00019">MyVoxelMap.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html">Sandbox.Engine.Voxels.MyStorageBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8_cache_8cs_source.html#l00013">MyStorageBase.Cache.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_aa44230f1874ec48dc4e29452ea964871"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#aa44230f1874ec48dc4e29452ea964871">Sandbox.Engine.Voxels.MyStorageBase.ReadRange</a></div><div class="ttdeci">void ReadRange(MyStorageData target, MyStorageDataTypeFlags dataToRead, int lodIndex, ref Vector3I lodVoxelRangeMin, ref Vector3I lodVoxelRangeMax)</div><div class="ttdoc">Reads range of content and/or materials from specified LOD. If you want to write data back later...</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00433">MyStorageBase.cs:433</a></div></div>
<div class="ttc" id="namespace_system_1_1_i_o_html"><div class="ttname"><a href="namespace_system_1_1_i_o.html">System.IO</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_o_exception_extensions_8cs_source.html#l00010">IOExceptionExtensions.cs:10</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a773c2eef1beb80c610b14bb1da1c7686"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a773c2eef1beb80c610b14bb1da1c7686">Sandbox.Engine.Voxels.MyStorageBase.ReadRange</a></div><div class="ttdeci">void ReadRange(MyStorageData target, MyStorageDataTypeFlags dataToRead, int lodIndex, ref Vector3I lodVoxelRangeMin, ref Vector3I lodVoxelRangeMax, ref MyVoxelRequestFlags requestFlags)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00482">MyStorageBase.cs:482</a></div></div>
<div class="ttc" id="class_v_rage_1_1_collections_1_1_l_r_u_cache_html_a68fcd763c5936f80577d56289901ad86"><div class="ttname"><a href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#a68fcd763c5936f80577d56289901ad86">VRage.Collections.LRUCache.Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="_l_r_u_cache_8cs_source.html#l00043">LRUCache.cs:43</a></div></div>
<div class="ttc" id="_lighting_stage_2_my_gbuffer_8cs_html_ae896c0d143bd168cb01a9f5c671d6ea3"><div class="ttname"><a href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a></div><div class="ttdeci">SharpDX.DXGI.Format Format</div><div class="ttdef"><b>Definition:</b> <a href="_lighting_stage_2_my_gbuffer_8cs_source.html#l00009">MyGbuffer.cs:9</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_geometry_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_geometry.html">Sandbox.Engine.Voxels.MyVoxelGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_geometry_8_cell_data_8cs_source.html#l00015">MyVoxelGeometry.CellData.cs:15</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">Sandbox.Game.World.MySession</a></div><div class="ttdoc">Base class for all session types (single, coop, mmo, sandbox) </div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8_components_8cs_source.html#l00025">MySession.Components.cs:25</a></div></div>
<div class="ttc" id="namespace_parallel_tasks_html"><div class="ttname"><a href="namespace_parallel_tasks.html">ParallelTasks</a></div><div class="ttdef"><b>Definition:</b> <a href="_action_work_8cs_source.html#l00006">ActionWork.cs:6</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_profiler_html"><div class="ttname"><a href="namespace_v_rage_1_1_profiler.html">VRage.Profiler</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_draw_area_8cs_source.html#l00003">MyDrawArea.cs:3</a></div></div>
<div class="ttc" id="namespace_path_html"><div class="ttname"><a href="namespace_path.html">Path</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_af68734c932623c793727078636a23f5d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af68734c932623c793727078636a23f5d">Sandbox.Engine.Voxels.MyStorageBase.LoadFromFile</a></div><div class="ttdeci">static MyStorageBase LoadFromFile(string absoluteFilePath, Dictionary&lt; byte, byte &gt; modifiers=null)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00144">MyStorageBase.cs:144</a></div></div>
<div class="ttc" id="class_v_rage_1_1_collections_1_1_l_r_u_cache_html_a0894e66bb2c32b67ef32355d9abf26bb"><div class="ttname"><a href="class_v_rage_1_1_collections_1_1_l_r_u_cache.html#a0894e66bb2c32b67ef32355d9abf26bb">VRage.Collections.LRUCache.Write</a></div><div class="ttdeci">void Write(TKey key, TValue value)</div><div class="ttdef"><b>Definition:</b> <a href="_l_r_u_cache_8cs_source.html#l00107">LRUCache.cs:107</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html"><div class="ttname"><a href="namespace_v_rage_math.html">VRageMath</a></div><div class="ttdef"><b>Definition:</b> <a href="_base27_directions_8cs_source.html#l00007">Base27Directions.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_ad558ef7f1c95806200295fd889d576e9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ad558ef7f1c95806200295fd889d576e9">Sandbox.Engine.Voxels.MyStorageBase.SaveCompressedData</a></div><div class="ttdeci">void SaveCompressedData(out byte[] compressedData)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00315">MyStorageBase.cs:315</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_ad6211c26fe6b341fedd7d8fe05eb14fd"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">VRage.Utils.MyLog.Default</a></div><div class="ttdeci">static MyLog Default</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00121">MyLog.cs:121</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities.html">Sandbox.Game.Entities</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity3_d_sound_emitter_8cs_source.html#l00018">MyEntity3DSoundEmitter.cs:18</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html">Sandbox.Engine.Voxels.MyStorageBase.VoxelChunk</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8_cache_8cs_source.html#l00015">MyStorageBase.Cache.cs:15</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html_aa76b8697823951ea5c5ec16092b902ab"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#aa76b8697823951ea5c5ec16092b902ab">Sandbox.Definitions.MyDefinitionManager.Static</a></div><div class="ttdeci">static new MyDefinitionManager Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager_8cs_source.html#l00069">MyDefinitionManager.cs:69</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_ae9cbe7104c8b25e9e1c3cbd7f710b980"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ae9cbe7104c8b25e9e1c3cbd7f710b980">Sandbox.Engine.Voxels.MyStorageBase.Copy</a></div><div class="ttdeci">virtual IMyStorage Copy()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00655">MyStorageBase.cs:655</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a34c3aba69a904b77b1f4bd2628498590"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a34c3aba69a904b77b1f4bd2628498590">VRage.Utils.MyLog.Log</a></div><div class="ttdeci">void Log(MyLogSeverity severity, string format, params object[] args)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00557">MyLog.cs:557</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk_html_ad673545a43d223d96a67a4abf8f1d075"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_1_1_voxel_chunk.html#ad673545a43d223d96a67a4abf8f1d075">Sandbox.Engine.Voxels.MyStorageBase.VoxelChunk.SizeBits</a></div><div class="ttdeci">const int SizeBits</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8_cache_8cs_source.html#l00017">MyStorageBase.Cache.cs:17</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a8f8d017333e9e0ad060f19bd258eb1aa"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a8f8d017333e9e0ad060f19bd258eb1aa">Sandbox.Engine.Voxels.MyStorageBase.CloseInternal</a></div><div class="ttdeci">virtual void CloseInternal()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00660">MyStorageBase.cs:660</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_html"><div class="ttname"><a href="namespace_system_1_1_collections.html">System.Collections</a></div></div>
<div class="ttc" id="class_v_rage_1_1_voxels_1_1_my_storage_data_html_a6980695559311318c4a23d3a1bccbca0"><div class="ttname"><a href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a6980695559311318c4a23d3a1bccbca0">VRage.Voxels.MyStorageData.Resize</a></div><div class="ttdeci">void Resize(Vector3I start, Vector3I end)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_data_8cs_source.html#l00130">MyStorageData.cs:130</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a6b2e3effeaf63cb322ecb46b3d19c7b7"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">VRage.Voxels.MyVoxelRequestFlags</a></div><div class="ttdeci">MyVoxelRequestFlags</div><div class="ttdoc">Flags used when requesting voxel materials and content. </div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00043">Enums.cs:43</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_af57ab33edb8786dd6a1b08f6a8b05b3a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af57ab33edb8786dd6a1b08f6a8b05b3a">Sandbox.Engine.Voxels.MyStorageBase.ChangeMaterials</a></div><div class="ttdeci">unsafe bool ChangeMaterials(Dictionary&lt; byte, byte &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00107">MyStorageBase.cs:107</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html_a0f50a556656cd03eab18484bfc77b7ec"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a0f50a556656cd03eab18484bfc77b7ec">Sandbox.Game.World.MySession.CurrentPath</a></div><div class="ttdeci">string CurrentPath</div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8cs_source.html#l00127">MySession.cs:127</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html">VRageMath.Vector3I</a></div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00076">Vector3I.cs:76</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_file_system_html"><div class="ttname"><a href="namespace_v_rage_1_1_file_system.html">VRage.FileSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_file_provider_8cs_source.html#l00007">IFileProvider.cs:7</a></div></div>
<div class="ttc" id="_my_texture_atlas_utils_8cs_html_a4f6647b688ebe11f9de2f9a037f5850a"><div class="ttname"><a href="_my_texture_atlas_utils_8cs.html#a4f6647b688ebe11f9de2f9a037f5850a">BoundingBox</a></div><div class="ttdeci">VRageMath.BoundingBox BoundingBox</div><div class="ttdef"><b>Definition:</b> <a href="_my_texture_atlas_utils_8cs_source.html#l00014">MyTextureAtlasUtils.cs:14</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a1ec0ac1439ae2825f0e86da1e2292435"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a1ec0ac1439ae2825f0e86da1e2292435">Sandbox.Engine.Voxels.MyStorageBase.Save</a></div><div class="ttdeci">void Save(out byte[] outCompressedData)</div><div class="ttdoc">Gets compressed voxel data </div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00291">MyStorageBase.cs:291</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_ac4d4462fdb46da399685f11ea6440888"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac4d4462fdb46da399685f11ea6440888">Sandbox.Engine.Voxels.MyStorageBase.Close</a></div><div class="ttdeci">void Close()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00681">MyStorageBase.cs:681</a></div></div>
<div class="ttc" id="namespace_sandbox_html"><div class="ttname"><a href="namespace_sandbox.html">Sandbox</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_profiler_html_afab61f66bd7416917d69efed84e707d3ae98bc9737aee4ba6fe369d95b780bbd7"><div class="ttname"><a href="namespace_v_rage_1_1_profiler.html#afab61f66bd7416917d69efed84e707d3ae98bc9737aee4ba6fe369d95b780bbd7">VRage.Profiler.LoadFromFile</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a82d52d7204c09af97d429970a18895e4"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a82d52d7204c09af97d429970a18895e4">Sandbox.Engine.Voxels.MyStorageBase.m_compressedData</a></div><div class="ttdeci">byte[] m_compressedData</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00058">MyStorageBase.cs:58</a></div></div>
<div class="ttc" id="namespace_v_rage_html"><div class="ttname"><a href="namespace_v_rage.html">VRage</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html_a899302e21eb415a2b35cc3da4ce6cb85"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#a899302e21eb415a2b35cc3da4ce6cb85">Sandbox.Definitions.MyDefinitionManager.GetDefaultVoxelMaterialDefinition</a></div><div class="ttdeci">MyVoxelMaterialDefinition GetDefaultVoxelMaterialDefinition()</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager_8cs_source.html#l04111">MyDefinitionManager.cs:4111</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html">Sandbox.Definitions.MyDefinitionManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager-_definition_set_8cs_source.html#l00020">MyDefinitionManager-DefinitionSet.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a86637d99e2abb74797eff11310ec617d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a86637d99e2abb74797eff11310ec617d">Sandbox.Engine.Voxels.MyStorageBase.Intersect</a></div><div class="ttdeci">ContainmentType Intersect(ref BoundingBox box, bool lazy)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00575">MyStorageBase.cs:575</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html">VRage.Voxels</a></div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00003">Enums.cs:3</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_adfd26215ea02f1829ca70670b918b950"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Sandbox.MySandboxGame.Log</a></div><div class="ttdeci">static readonly MyLog Log</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00137">MySandboxGame.cs:137</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_aaa8bbcd13960a22617898e9c991a3f7d"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#aaa8bbcd13960a22617898e9c991a3f7d">VRageMath.Vector3I.Min</a></div><div class="ttdeci">static Vector3I Min(Vector3I value1, Vector3I value2)</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00414">Vector3I.cs:414</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a908fb0dba4d27743021267b3c3cd74d6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a908fb0dba4d27743021267b3c3cd74d6">Sandbox.Engine.Voxels.MyStorageBase.WriteRange</a></div><div class="ttdeci">void WriteRange(MyStorageData source, MyStorageDataTypeFlags dataToWrite, ref Vector3I voxelRangeMin, ref Vector3I voxelRangeMax)</div><div class="ttdoc">Writes range of content and/or materials from cache to storage. Note that this can only write to LOD0...</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00369">MyStorageBase.cs:369</a></div></div>
<div class="ttc" id="class_v_rage_1_1_my_compression_file_load_html"><div class="ttname"><a href="class_v_rage_1_1_my_compression_file_load.html">VRage.MyCompressionFileLoad</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_compression_file_load_8cs_source.html#l00008">MyCompressionFileLoad.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_af550e98c860a704cb75293a2ed6a6fac"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#af550e98c860a704cb75293a2ed6a6fac">Sandbox.Engine.Voxels.MyStorageBase.Load</a></div><div class="ttdeci">static MyStorageBase Load(string name)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00215">MyStorageBase.cs:215</a></div></div>
<div class="ttc" id="class_v_rage_1_1_voxels_1_1_my_storage_data_html_ad9f2bb2ea2d492180bc78ad28616eea5"><div class="ttname"><a href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#ad9f2bb2ea2d492180bc78ad28616eea5">VRage.Voxels.MyStorageData.Material</a></div><div class="ttdeci">void Material(ref Vector3I p, byte materialIdx)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_data_8cs_source.html#l00211">MyStorageData.cs:211</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_octree_storage_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_octree_storage.html">Sandbox.Engine.Voxels.MyOctreeStorage</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_octree_storage_8cs_source.html#l00019">MyOctreeStorage.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_abe6742e34885e4bc4e466338125398e9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#abe6742e34885e4bc4e466338125398e9">Sandbox.Engine.Voxels.MyStorageBase.Pin</a></div><div class="ttdeci">StoragePin Pin()</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00693">MyStorageBase.cs:693</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_ac28943fc969dade35ec3560af3ad3b3d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#ac28943fc969dade35ec3560af3ad3b3d">Sandbox.Engine.Voxels.MyStorageBase.RangeChanged</a></div><div class="ttdeci">RangeChangedDelegate RangeChanged</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00089">MyStorageBase.cs:89</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_voxels_html_a0a3769e07e4323dd3d9b85637cdbd2cd"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_voxels.html#a0a3769e07e4323dd3d9b85637cdbd2cd">Sandbox.Engine.Voxels.RangeChangedDelegate</a></div><div class="ttdeci">delegate void RangeChangedDelegate(Vector3I minVoxelChanged, Vector3I maxVoxelChanged, MyStorageDataTypeFlags changedData)</div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base_html_a87cdc335f1b833cea109e93d99bd97a0"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_storage_base.html#a87cdc335f1b833cea109e93d99bd97a0">Sandbox.Engine.Voxels.MyStorageBase.OverwriteAllMaterials</a></div><div class="ttdeci">void OverwriteAllMaterials(MyVoxelMaterialDefinition material)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_base_8cs_source.html#l00357">MyStorageBase.cs:357</a></div></div>
<div class="ttc" id="class_system_1_1_invalid_branch_exception_html"><div class="ttname"><a href="class_system_1_1_invalid_branch_exception.html">System.InvalidBranchException</a></div><div class="ttdef"><b>Definition:</b> <a href="_invalid_branch_exception_8cs_source.html#l00009">InvalidBranchException.cs:9</a></div></div>
<div class="ttc" id="namespace_my_file_system_html"><div class="ttname"><a href="namespace_my_file_system.html">MyFileSystem</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html_ae840d3864e36153d6f5013c7a0403dcfaa6156ea9d66fef24e87e841fbabf7cca"><div class="ttname"><a href="namespace_v_rage_1_1_game.html#ae840d3864e36153d6f5013c7a0403dcfaa6156ea9d66fef24e87e841fbabf7cca">VRage.Game.Shared</a></div></div>
<div class="ttc" id="class_v_rage_1_1_voxels_1_1_my_storage_data_html_a9dafb54e33a62ddcfa1ecfd2ad4f2c56"><div class="ttname"><a href="class_v_rage_1_1_voxels_1_1_my_storage_data.html#a9dafb54e33a62ddcfa1ecfd2ad4f2c56">VRage.Voxels.MyStorageData.ClearContent</a></div><div class="ttdeci">void ClearContent(byte p)</div><div class="ttdef"><b>Definition:</b> <a href="_my_storage_data_8cs_source.html#l00480">MyStorageData.cs:480</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 23 2017 01:16:21 for Space Engineers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
