<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Space Engineers: Sources/Sandbox.Game/Engine/Audio/MyAudio.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Space Engineers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="dir_adcb7f0194fb5944415bcd7197787778.html">Sandbox.Game</a></li><li class="navelem"><a class="el" href="dir_38662c1c33bdf59b0e10164ceae4015b.html">Engine</a></li><li class="navelem"><a class="el" href="dir_e34e0898969aa4c756cccf23cf381ec8.html">Audio</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MyAudio.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//#define DEBUG_AUDIO</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_collections.html">Collections</a>.<a class="code" href="namespace_system_1_1_collections_1_1_generic.html">Generic</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.TransparentGeometry;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sys_utils.html">SysUtils</a>.Utils;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.CommonLib.<a class="code" href="namespace_v_rage_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_physics.html">Physics</a>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sys_utils.html">SysUtils</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sharp_d_x.html">SharpDX</a>.XAudio2;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sharp_d_x.html">SharpDX</a>.Multimedia;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sharp_d_x.html">SharpDX</a>.X3DAudio;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_i_o.html">IO</a>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_reflection.html">Reflection</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_runtime.html">Runtime</a>.<a class="code" href="namespace_system_1_1_runtime_1_1_compiler_services.html">CompilerServices</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_runtime.html">Runtime</a>.ConstrainedExecution;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_runtime.html">Runtime</a>.InteropServices;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Security;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Threading;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_trace.html">Trace</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_world.html">World</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_text.html">Text</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_platform.html">Platform</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_common_lib.html">CommonLib</a>.<a class="code" href="namespace_sandbox_1_1_common_lib_1_1_object_builders.html">ObjectBuilders</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_common_lib.html">CommonLib</a>.<a class="code" href="namespace_sandbox_1_1_common_lib_1_1_object_builders.html">ObjectBuilders</a>.Audio;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_common_lib.html">CommonLib</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_g_u_i.html">GUI</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_screens.html">Screens</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_sandbox.html">Sandbox</a>.Engine.Audio</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">   38</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        Stopped,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651ac9dbb2b7c84159b632d71e512eba8428">Playing</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651aafedf9afee367f51f98d7cf030c976a6">Transition</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    [<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_session_component_descriptor.html">MySessionComponentDescriptor</a>(MySessionComponentID.GameAudio, <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a4deab95c525a10b983bba0cd861ab992">MyUpdateOrder</a>.NoUpdate)]</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html">   46</a></span>&#160;    <span class="keyword">class </span><a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html">MyAudio</a> : MySessionComponentBase</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">static</span> XAudio2 m_audioEngine;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">static</span> DeviceDetails m_deviceDetails;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keyword">static</span> MasteringVoice m_masterVoice;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">static</span> SubmixVoice m_gameAudioVoice;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keyword">static</span> SubmixVoice m_musicAudioVoice;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keyword">static</span> SubmixVoice m_hudAudioVoice;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">static</span> VoiceSendDescriptor[] m_gameAudioVoiceDesc;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">static</span> VoiceSendDescriptor[] m_musicAudioVoiceDesc;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">static</span> VoiceSendDescriptor[] m_hudAudioVoiceDesc;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html">MyCueBank</a> m_cueBank;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html">MyX3DAudio</a> m_x3dAudio;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_canPlay;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">float</span> m_volumeHud;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">float</span> m_volumeDefault;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">float</span> m_volumeMusic;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_mute;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_musicAllowed;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_musicOn;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_gameSoundsOn;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">static</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a> m_musicState;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_loopMusic;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> m_musicCue;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">//  Music cues</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keyword">struct </span>MyMusicTransition</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">int</span> Priority;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keyword">public</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">MyMusicTransitionEnum</a> TransitionEnum;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">string</span> Category;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">public</span> MyMusicTransition(<span class="keywordtype">int</span> priority, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">MyMusicTransitionEnum</a> transitionEnum, <span class="keywordtype">string</span> category)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                Priority = priority;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                TransitionEnum = transitionEnum;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                Category = category;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">static</span> SortedList&lt;int, MyMusicTransition&gt; m_nextTransitions = <span class="keyword">new</span> SortedList&lt;int, MyMusicTransition&gt;();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">static</span> MyMusicTransition? m_currentTransition;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_transitionForward;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> StringBuilder m_currentTransitionDescription = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">float</span> m_volumeAtTransitionStart;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> m_timeFromTransitionStart; <span class="comment">// in ms</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> TRANSITION_TIME = 1000;     <span class="comment">// in ms</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> m_lastUpdateTime = MyConstants.FAREST_TIME_IN_PAST; <span class="comment">// in ms</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keyword">static</span> Listener m_listener;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">static</span> Emitter m_helperEmitter; <span class="comment">// The emitter describes an entity which is making a 3D sound.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">static</span> List&lt;IMy3DSoundEmitter&gt; m_3Dsounds; <span class="comment">// List of currently playing 3D sounds to update</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> m_canUpdate3dSounds = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">//  Number of sound instances (cue) created/added from the application start</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> m_soundInstancesTotal2D;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> m_soundInstancesTotal3D;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">//  Events</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keyword">public</span> delegate <span class="keywordtype">void</span> VolumeChangeHandler(<span class="keywordtype">float</span> newVolume);</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8f90750706583bfd4c7eccaaef0b8f68">  116</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">event</span> VolumeChangeHandler <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8f90750706583bfd4c7eccaaef0b8f68">OnSetVolumeHud</a>, OnSetVolumeGame, OnSetVolumeMusic;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a14bd33f3bc1b63d0ee47039defc95b84">  118</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html">MyCueBank</a> CueBank { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_cueBank; } }</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a7f5beae50603a4cdb65a48b523b06fb4">  119</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> MyObjectBuilder_CueDefinition SoloCue { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a6c469674bafc80aaf9c8aa84d99b822e">  120</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> Listener Listener { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_listener; } }</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a7673493f7e8b4df7c032adb997d9acbe">  121</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> GameSoundIsPaused { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Init()</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            StartEngine();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            CreateX3DAudio();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> StartEngine()</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> (m_audioEngine != null)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                DisposeVoices();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                m_audioEngine.Dispose();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="comment">// Init/reinit engine</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            m_audioEngine = <span class="keyword">new</span> XAudio2();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            m_masterVoice = <span class="keyword">new</span> MasteringVoice(m_audioEngine);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            m_gameAudioVoice = <span class="keyword">new</span> SubmixVoice(m_audioEngine);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            m_musicAudioVoice = <span class="keyword">new</span> SubmixVoice(m_audioEngine);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            m_hudAudioVoice = <span class="keyword">new</span> SubmixVoice(m_audioEngine);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            m_gameAudioVoiceDesc = <span class="keyword">new</span> VoiceSendDescriptor[] { <span class="keyword">new</span> VoiceSendDescriptor(m_gameAudioVoice) };</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            m_musicAudioVoiceDesc = <span class="keyword">new</span> VoiceSendDescriptor[] { <span class="keyword">new</span> VoiceSendDescriptor(m_musicAudioVoice) };</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            m_hudAudioVoiceDesc = <span class="keyword">new</span> VoiceSendDescriptor[] { <span class="keyword">new</span> VoiceSendDescriptor(m_hudAudioVoice) };</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> CreateX3DAudio()</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">if</span> (m_audioEngine == null)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            m_deviceDetails = m_audioEngine.GetDeviceDetails(0);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            m_x3dAudio = <span class="keyword">new</span> MyX3DAudio(m_deviceDetails.OutputFormat);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="keywordtype">string</span>.<a class="code" href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a>(<span class="stringliteral">&quot;MyAudio.CreateX3DAudio - Device: {0} - Channel #: {1}&quot;</span>, m_deviceDetails.DisplayName, m_deviceDetails.OutputFormat.Channels));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> DisposeVoices()</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">if</span> (m_hudAudioVoice != null)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                m_hudAudioVoice.Dispose();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (m_musicAudioVoice != null)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                m_musicAudioVoice.Dispose();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">if</span> (m_gameAudioVoice != null)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                m_gameAudioVoice.Dispose();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (m_masterVoice != null)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                m_masterVoice.Dispose();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> CheckIfDeviceChanged()</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> (MyAudio_Native.HasDeviceChanged(m_audioEngine, m_deviceDetails.DisplayName))</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da95b19f7739b0b7ea7d6b07586be54f36">Init</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Exception during loading audio engine. Game continues, but without sound. Details: &quot;</span> + ex.ToString(), <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device ID: &quot;</span> + m_deviceDetails.DeviceID, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device name: &quot;</span> + m_deviceDetails.DisplayName, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device role: &quot;</span> + m_deviceDetails.Role, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Output format: &quot;</span> + m_deviceDetails.OutputFormat, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="comment">//  This exception is the only way I can know if we can play sound (e.g. if computer doesn&#39;t have sound card).</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="comment">//  I didn&#39;t find other ways of checking it.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    m_canPlay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">if</span> (MyFakes.SIMULATE_NO_SOUND_CARD)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    m_canPlay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="keywordflow">if</span> (m_cueBank != null)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ae93b94552b71a33a819572b718d920a2">SetAudioEngine</a>(m_audioEngine);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    m_gameAudioVoice.SetVolume(m_volumeDefault);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    m_hudAudioVoice.SetVolume(m_volumeHud);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    m_musicAudioVoice.SetVolume(m_volumeMusic);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="keywordflow">if</span> ((m_musicCue != null) &amp;&amp; m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2936770217eeb68e664162e5a89b1c6a">IsPlaying</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        <span class="comment">// restarts music cue</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        m_musicCue = PlayCue2D(m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ab9de09512a9bce842253f472173fadae">CueEnum</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        <span class="keywordflow">if</span> (m_musicCue != null)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                            m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_musicAudioVoiceDesc);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        UpdateMusic();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ae7907dc8fb634acedf5a97290846e8fb">  220</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">new</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ae7907dc8fb634acedf5a97290846e8fb">LoadData</a>()</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;MyAudio.LoadData - START&quot;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a0603c60415f1a656b3ab61ea92057a47">IncreaseIndent</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            m_canPlay = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            MyObjectBuilder_CueDefinitions ob = null;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    result = MyObjectBuilder_Base.DeserializeXML(MyCreateFileAudioSBA.GetFilenameSBA(), out ob);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">catch</span> (FileNotFoundException)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    <span class="comment">// generates the Audio.sba file</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    MyCreateFileAudioSBA.Create();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    result = MyObjectBuilder_Base.DeserializeXML(MyCreateFileAudioSBA.GetFilenameSBA(), out ob);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordtype">bool</span> result = MyObjectBuilder_Base.DeserializeXML(MyCreateFileAudioSBA.GetFilenameSBA(), out ob);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#endif //DEBUG</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    Init();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                    <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Unable to load audio data. Game continues, but without sound&quot;</span>, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    m_canPlay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Exception during loading audio engine. Game continues, but without sound. Details: &quot;</span> + ex.ToString(), <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device ID: &quot;</span> + m_deviceDetails.DeviceID, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device name: &quot;</span> + m_deviceDetails.DisplayName, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Device role: &quot;</span> + m_deviceDetails.Role, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Output format: &quot;</span> + m_deviceDetails.OutputFormat, <a class="code" href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">LoggingOptions</a>.AUDIO);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="comment">//  This exception is the only way I can know if we can play sound (e.g. if computer doesn&#39;t have sound card).</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="comment">//  I didn&#39;t find other ways of checking it.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                m_canPlay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">if</span> (MyFakes.SIMULATE_NO_SOUND_CARD)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                m_canPlay = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                m_cueBank = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html">MyCueBank</a>(m_audioEngine, ob);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                m_3Dsounds = <span class="keyword">new</span> List&lt;IMy3DSoundEmitter&gt;();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                m_listener = <span class="keyword">new</span> Listener();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                m_listener.SetDefaultValues();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                m_helperEmitter = <span class="keyword">new</span> Emitter();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                m_helperEmitter.SetDefaultValues();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="comment">//  This is reverb turned to off, so we hear sounds as they are defined in wav files</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                ApplyReverb = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                m_musicOn = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                m_gameSoundsOn = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="comment">//  Volume from config</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                VolumeMusic = <a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">MyConfig</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a19c5a965a2c079c8c8d85bf21ba08d57">MusicVolume</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                VolumeGame = <a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">MyConfig</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a36b05c378a82d5de674aaf847b6d37f5">GameVolume</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                VolumeHud = <a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">MyConfig</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a36b05c378a82d5de674aaf847b6d37f5">GameVolume</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">MyConfig</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a19c5a965a2c079c8c8d85bf21ba08d57">MusicVolume</a> = VolumeMusic;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">MyConfig</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a36b05c378a82d5de674aaf847b6d37f5">GameVolume</a> = VolumeGame;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                m_mute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                m_musicAllowed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                m_musicState = <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Stopped;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                m_loopMusic = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                m_transitionForward = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                m_timeFromTransitionStart = 0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                m_soundInstancesTotal2D = 0;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                m_soundInstancesTotal3D = 0;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a4b5df0942550a1c445fa02195dc11538">DecreaseIndent</a>();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;MyAudio.LoadData - END&quot;</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a510f880d60860340cd36225b1973f5ba">  310</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">new</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a510f880d60860340cd36225b1973f5ba">UnloadData</a>()</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;MyAudio.UnloadData - START&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                m_audioEngine.StopEngine();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keywordflow">if</span> (m_cueBank != null)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a41846de3d2b994d5cd2ad30d903705bd">Dispose</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            SoloCue = null;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            DisposeVoices();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span> (m_audioEngine != null)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                m_audioEngine.Dispose();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Log</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;MyAudio.UnloadData - END&quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> ApplyReverb</div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8d293f6b0e079f8b09c00502a3241da2">  332</a></span>&#160;        {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">return</span> m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8a66e38a77b22cb4a93cd06ab13e58f7">ApplyReverb</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            set</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8a66e38a77b22cb4a93cd06ab13e58f7">ApplyReverb</a> = value;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">//  Set/get master volume for all sounds/cues for &quot;Music&quot; category.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="comment">//  Interval &lt;0..1..2&gt;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">//      0.0f  -&gt;   -96 dB (silence) </span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">//      1.0f  -&gt;    +0 dB (full pitch as authored) </span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">//      2.0f  -&gt;    +6 dB (6 dB greater than authored) </span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> VolumeMusic</div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a0e7ce1365584e08451d0863224c97a3a">  361</a></span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay || !m_musicOn)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">return</span> m_volumeMusic;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            set</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay || !m_musicOn)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="comment">//  We need to clamp the volume, because app fails if we set it with zero value</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                m_volumeMusic = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(value, MyAudioConstants.MUSIC_MASTER_VOLUME_MIN, MyAudioConstants.MUSIC_MASTER_VOLUME_MAX);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                m_musicAudioVoice.SetVolume(m_volumeMusic);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span> (OnSetVolumeMusic != null)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    OnSetVolumeMusic(m_volumeMusic);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">//  Set/get master volume for all sounds/cues in &quot;Gui&quot; category.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">//  Interval &lt;0..1..2&gt;</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">//      0.0f  -&gt;   -96 dB (silence) </span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="comment">//      1.0f  -&gt;    +0 dB (full pitch as authored) </span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="comment">//      2.0f  -&gt;    +6 dB (6 dB greater than authored) </span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> VolumeHud</div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ab24e0b5b1501ec7bbda49d73e1e5fbdb">  390</a></span>&#160;        {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <span class="keywordflow">return</span> m_volumeHud;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            set</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="comment">//  We need to clamp the volume, because app fails if we set it with zero value</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                m_volumeHud = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(value, MyAudioConstants.GAME_MASTER_VOLUME_MIN, MyAudioConstants.GAME_MASTER_VOLUME_MAX);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                m_hudAudioVoice.SetVolume(m_volumeHud);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="keywordflow">if</span> (OnSetVolumeHud != null)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    OnSetVolumeHud(m_volumeHud);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">//  Set/get master volume for all in-game sounds/cues.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">//  Interval &lt;0..1..2&gt;</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">//      0.0f  -&gt;   -96 dB (silence) </span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">//      1.0f  -&gt;    +0 dB (full pitch as authored) </span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">//      2.0f  -&gt;    +6 dB (6 dB greater than authored) </span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> VolumeGame</div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a090db3464be705ee4b666bf525abaa76">  419</a></span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay || !m_gameSoundsOn)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordflow">return</span> m_volumeDefault;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            set</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="keywordflow">if</span> (!m_canPlay || !m_gameSoundsOn)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                <span class="comment">//  We need to clamp the volume, because app fails if we set it with zero value</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                m_volumeDefault = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(value, MyAudioConstants.GAME_MASTER_VOLUME_MIN, MyAudioConstants.GAME_MASTER_VOLUME_MAX);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                m_gameAudioVoice.SetVolume(m_volumeDefault);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">if</span> (OnSetVolumeGame != null)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    OnSetVolumeGame(m_volumeDefault);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a7f35709ea3e72c7e85c9821015b73e30">  442</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a7f35709ea3e72c7e85c9821015b73e30">Pause</a>()</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                m_audioEngine.StopEngine();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a249a754a68ff799fe87deef5aeec24ec">  448</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a249a754a68ff799fe87deef5aeec24ec">Resume</a>()</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                m_audioEngine.StartEngine();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a01b31784a9560e4ba557d86de2de9ce6">  454</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a01b31784a9560e4ba557d86de2de9ce6">PauseGameSounds</a>()</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                GameSoundIsPaused = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                m_gameAudioVoice.SetVolume(0f);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                m_canUpdate3dSounds = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a25e02b6bb4aba7cbf13986b88f37876f">  464</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a25e02b6bb4aba7cbf13986b88f37876f">ResumeGameSounds</a>()</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                GameSoundIsPaused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">if</span> (!Mute)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    m_gameAudioVoice.SetVolume(m_volumeDefault);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                m_canUpdate3dSounds = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> Mute</div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a65adf05201140886cc5e5fb39fe45acd">  477</a></span>&#160;        {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_mute; }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            set</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="keywordflow">if</span> (m_mute != value)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                    m_mute = value;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    <span class="keywordflow">if</span> (m_mute)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                        <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                            WaitForPlayingHudSounds();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                            m_gameAudioVoice.SetVolume(0f);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                            m_musicAudioVoice.SetVolume(0f);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                            Thread.Sleep(100);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                            <span class="keywordflow">if</span> (!GameSoundIsPaused)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                m_gameAudioVoice.SetVolume(m_volumeDefault);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                            m_musicAudioVoice.SetVolume(m_volumeMusic);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> MusicAllowed</div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8933d1ce858f1a5bda0b0580626f49f2">  509</a></span>&#160;        {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_musicAllowed; }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            set { m_musicAllowed = value; }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ad18dd952b8009bcb357ebf28d9bf9fc6">  514</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ad18dd952b8009bcb357ebf28d9bf9fc6">GetMusicCue</a>()</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">return</span> m_musicCue;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac8d7f0af9a073e65e48e637b15cacf0b">  519</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac8d7f0af9a073e65e48e637b15cacf0b">GetMusicState</a>()</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">return</span> m_musicState;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a00e18b7eff8fbdd57ee0bfdd47e66d34">  524</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a00e18b7eff8fbdd57ee0bfdd47e66d34">MuteHud</a>(<span class="keywordtype">bool</span> mute)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                m_hudAudioVoice.SetVolume(mute ? 0f : m_volumeHud);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a63d837672ac672196070873bf1c5d79a">  530</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a63d837672ac672196070873bf1c5d79a">HasAnyTransition</a>()</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">return</span> m_nextTransitions.Count &gt; 0;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">string</span> AudioPath</div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a50e1c45b7d624becd4d365b4e11f4a98">  536</a></span>&#160;        {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="namespace_path.html">Path</a>.Combine(GameEnvironment.ContentPath, <span class="stringliteral">&quot;Audio&quot;</span>); }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">//  Updates the state of music and 3D audio system.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abce3612b1c6eff992f88dfeb6e3d65b9">  541</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abce3612b1c6eff992f88dfeb6e3d65b9">Update</a>(<span class="keywordtype">bool</span> ignoreGameReadyStatus = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a> &amp;&amp; !ignoreGameReadyStatus)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="comment">//if (m_canPlay)</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <span class="comment">//CheckIfDeviceChanged();</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">if</span> (Mute)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">if</span> (m_canPlay &amp;&amp; (m_cueBank != null))</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a101c6c8c27765257a33f8b9839948a93">Update</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordtype">int</span> currTime = <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#a16436f5f04bb2e4ad4640ea1f45f7ba7">TotalTimeInMilliseconds</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordtype">int</span> diffTime = currTime - m_lastUpdateTime; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">if</span> (diffTime &lt; 30)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            m_lastUpdateTime = currTime;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">if</span> (m_canPlay)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#adcb6a66a1adc76f0c8e7f9bac402817e">IsPaused</a>)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    <span class="comment">//UpdateCollisionCues();</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                UpdateMusic();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                Update3DCuesPositions();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> UpdateMusic()</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Transition)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                m_timeFromTransitionStart += MyConstants.PHYSICS_STEP_SIZE_IN_MILLISECONDS;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="comment">// if transition time elapsed, we stop actual playing cue and set music state to stopped</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="keywordflow">if</span> (m_timeFromTransitionStart &gt;= TRANSITION_TIME)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    m_musicState = <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Stopped;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    <span class="keywordflow">if</span> ((m_musicCue != null) &amp;&amp; m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2936770217eeb68e664162e5a89b1c6a">IsPlaying</a>)</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                    {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2abc92476c04f39266febccfbfed3752">Stop</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        m_musicCue = null;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="comment">// we decrease music volume (because transition effect)</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((m_musicCue != null) &amp;&amp; m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2936770217eeb68e664162e5a89b1c6a">IsPlaying</a>)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <span class="keywordflow">if</span> ((m_musicAudioVoice.Volume &gt; 0f) &amp;&amp; m_musicOn)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        m_musicAudioVoice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>((1f - (<span class="keywordtype">float</span>)m_timeFromTransitionStart / TRANSITION_TIME) * m_volumeAtTransitionStart);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Stopped)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                MyMusicTransition? nextTransition = GetNextTransition();</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="comment">// we save current transition as next transition, if we want apply transition with higher priority, so after new transition stop, then this old transition return back</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <span class="keywordflow">if</span> ((m_currentTransition != null) &amp;&amp; (m_nextTransitions.Count &gt; 0) &amp;&amp; (nextTransition != null) &amp;&amp; (nextTransition.Value.Priority &gt; m_currentTransition.Value.Priority))</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    m_nextTransitions[m_currentTransition.Value.Priority] = m_currentTransition.Value;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                m_currentTransition = nextTransition;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="comment">// it there is current transition to play, we play it and set state to playing</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <span class="keywordflow">if</span> (m_currentTransition != null)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    m_musicAudioVoice.SetVolume(m_volumeMusic);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    PlayMusicByTransition(m_currentTransition.Value);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    m_nextTransitions.Remove(m_currentTransition.Value.Priority);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    m_musicState = <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Playing;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Playing)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">if</span> ((m_musicCue != null) &amp;&amp; !m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2936770217eeb68e664162e5a89b1c6a">IsPlaying</a>)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    <span class="keywordflow">if</span> (m_loopMusic)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                        <span class="comment">// we play current transition in loop</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                        <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(m_currentTransition != null);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                        PlayMusicByTransition(m_currentTransition.Value);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                        <span class="comment">// switches to another, random, track</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        m_currentTransition = null;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">MyMusicTransitionEnum</a>? newTransitionEnum = GetRandomTransitionEnum();</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                        <span class="keywordflow">if</span> (newTransitionEnum.HasValue)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                            ApplyTransition(newTransitionEnum.Value, 0, null, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac0b99e3dab6b6ce8bf72b7fbde8e3a5a">  637</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">MyMusicTransitionEnum</a>? <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac0b99e3dab6b6ce8bf72b7fbde8e3a5a">GetRandomTransitionEnum</a>()</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="keywordflow">return</span> m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ace0b2a01ca1e3548ff952173b78ce291">GetRandomTransitionEnum</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#adf7d4795325834ce1656d870f89652ba">  645</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#adf7d4795325834ce1656d870f89652ba">ApplyTransition</a>(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">MyMusicTransitionEnum</a> transitionEnum, <span class="keywordtype">int</span> priority = 0, <span class="keywordtype">string</span> category = null, <span class="keywordtype">bool</span> loop = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">if</span> (!m_musicAllowed)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            Debug.Assert(priority &gt;= 0);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">if</span> (category != null)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">if</span> (!m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ac19185488e2d3cfe64a2a5c43417dbb2">IsValidTransitionCategory</a>(transitionEnum, category))</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                    Debug.Fail(<span class="stringliteral">&quot;This category doesn&#39;t exist for this transition!&quot;</span>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    <a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html">MyLog</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">Default</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="keywordtype">string</span>.<a class="code" href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a>(<span class="stringliteral">&quot;Category {0} doesn&#39;t exist for this transition!&quot;</span>, category));</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="comment">// if we try apply same transition and priority and category</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">if</span> ((m_currentTransition != null) &amp;&amp;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                (m_currentTransition.Value.Priority == priority) &amp;&amp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                (m_currentTransition.Value.TransitionEnum == transitionEnum) &amp;&amp;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                ((category == null) || (m_currentTransition.Value.Category == category)))</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordflow">if</span> ((m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Transition) &amp;&amp; !m_transitionForward)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    m_musicState = <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Playing;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="comment">// if category not set, we take random category from transition cues</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keywordtype">string</span> transitionCategory = category ?? m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#acb0a743dbd4b509b787c9ed7e6c3675c">GetRandomTransitionCategory</a>(transitionEnum);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="comment">// we set this transition as next</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            m_nextTransitions[priority] = <span class="keyword">new</span> MyMusicTransition(priority, transitionEnum, transitionCategory);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            MyTrace.Send(<a class="code" href="namespace_v_rage_1_1_trace.html#a0fae5564887b2d1ae1f09476e8ea4076">TraceWindow</a>.Server, <span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;Applying transition {0} {1} (priority = {2})&quot;</span>, transitionEnum, transitionCategory, priority));</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="comment">// if new transition has lower priority then current, we don&#39;t want apply new transition now</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">if</span> ((m_currentTransition != null) &amp;&amp; (m_currentTransition.Value.Priority &gt; priority))</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            m_loopMusic = loop;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Playing)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                StartTransition(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Transition)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_musicState == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Stopped)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_system_1_1_invalid_branch_exception.html">InvalidBranchException</a>();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> MyMusicTransition? GetNextTransition()</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">if</span> (m_nextTransitions.Count &gt; 0)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <span class="keywordflow">return</span> m_nextTransitions[m_nextTransitions.Keys[m_nextTransitions.Keys.Count - 1]];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> StartTransition(<span class="keywordtype">bool</span> forward)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            m_transitionForward = forward;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            m_musicState = <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Transition;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            m_timeFromTransitionStart = 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            m_volumeAtTransitionStart = m_volumeMusic;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ada7508da49f1f80a9410ee42f48afb0c">  721</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ada7508da49f1f80a9410ee42f48afb0c">StopTransition</a>(<span class="keywordtype">int</span> priority)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            Debug.Assert(priority &gt;= 0);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="comment">// try removes transition with this priority from next transitions queue</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">if</span> (m_nextTransitions.ContainsKey(priority))</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                m_nextTransitions.Remove(priority);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="comment">// if we actually play current transition with this priorty, we start transition to next (decreasing volume and switch to another)</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">if</span> ((m_currentTransition != null) &amp;&amp; (priority == m_currentTransition.Value.Priority))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <span class="keywordflow">if</span> (m_musicState != <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">MyMusicState</a>.Transition)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    StartTransition(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> PlayMusicByTransition(MyMusicTransition transition)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            m_musicCue = PlayCue2D(m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8dc46a73fdee871fd8fd38faed9506a6">GetTransitionCue</a>(transition.TransitionEnum, transition.Category));</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordflow">if</span> (m_musicCue != null)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                m_musicCue.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_musicAudioVoiceDesc);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                m_musicAudioVoice.SetVolume(m_volumeMusic);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">//  Add new cue and starts playing it. This can be used for one-time or for looping cues.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="comment">//  Method returns reference to the cue, so if it&#39;s looping cue, we can update its position. Or we can stop playing it.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="comment">//  These are 2D cues played with stereo. Used for in-cockpit sounds.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="comment">//  We don&#39;t do any max instance limiting or distance cutting, because it&#39;s not needed.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8db0fcb827b573af6764e0d915e6564e">  750</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8db0fcb827b573af6764e0d915e6564e">PlayCue2D</a>(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum, <span class="keywordtype">float</span> volume = -1f)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> (cueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="comment">//  If this computer can&#39;t play sound, we don&#39;t create cues</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a>)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span> ((SoloCue != null) &amp;&amp; (SoloCue != cue))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            volume = (volume != -1f) ? volume : cue.Volume;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            if (cue.VolumeVariation != 0f)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <span class="keywordtype">float</span> variation = VolumeVariation(cue);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                volume = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume + variation, 0f, 1f);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordflow">return</span> PlayCue2DInternal(cueEnum, volume);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> PlayCue2DInternal(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum, <span class="keywordtype">float</span> volume)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a>)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> sound = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">GetVoice</a>(cueEnum);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> (sound == null)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">if</span> ((SoloCue != null) &amp;&amp; (SoloCue != cue))</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>(volume);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="keywordflow">if</span> (cue.PitchVariation != 0f)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <span class="keywordtype">float</span> semitones = PitchVariation(cue);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = 1f;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetFrequencyRatio(sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">if</span> (cue.IsHudCue)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_hudAudioVoiceDesc);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_gameAudioVoiceDesc);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Start</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            ++m_soundInstancesTotal2D;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="keywordflow">return</span> sound;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9dd88e7ceb32ed35c5a0b47ddafb3167">  824</a></span>&#160;        <span class="keyword">static</span> <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9dd88e7ceb32ed35c5a0b47ddafb3167">WaitForPlayingHudSounds</a>()</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">while</span> (m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8d85955f2b19bacc6d63d2713782a5e7">IsPlayingHudSounds</a>()) { }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> TrySwitchToCue2D(<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">IMy3DSoundEmitter</a> source, MyObjectBuilder_CueDefinition cue3D)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> entity = source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#af2f21a2092e6f5efdb46da26b1e13f9c">Entity</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> owner = source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a6b567ad262585332102f2ff9e3bf508c">OwnedBy</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> parent = (owner != null) ? owner.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ad324c3ff85ae9293cdef792963205093">Parent</a> : null;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordtype">bool</span> isControlledObject = (entity == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject) || (owner == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject) || (parent == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">if</span> ((MyGuiScreenTerminal.IsOpen &amp;&amp; (MyGuiScreenTerminal.Interacted == entity)) || (isControlledObject &amp;&amp; (cue3D.Alternative2D != <span class="keywordtype">string</span>.Empty)))</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum = (<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>)Enum.Parse(typeof(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>), cue3D.Alternative2D);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    MyObjectBuilder_CueDefinition cue2D = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="keywordtype">float</span> volume = cue2D.Volume;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                    <span class="keywordflow">if</span> (cue2D.VolumeVariation != 0f)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                        <span class="keywordtype">float</span> variation = VolumeVariation(cue2D);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        volume = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume + variation, 0f, 1f);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                    <span class="keywordflow">if</span> (m_3Dsounds.Contains(source))</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                        StopUpdating3DCue(source);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    <span class="keywordflow">return</span> PlayCue2DInternal(cueEnum, volume);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                <span class="keywordflow">catch</span> (Exception)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> TrySwitchToIntroLoopPair2D(IMy3DSoundEmitter source, ref <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> introCueEnum, ref <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> loopCueEnum)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            MyObjectBuilder_CueDefinition introCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(introCueEnum);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            MyObjectBuilder_CueDefinition loopCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(loopCueEnum);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> entity = source.Entity;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> owner = source.OwnedBy;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a> parent = (owner != null) ? owner.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ad324c3ff85ae9293cdef792963205093">Parent</a> : null;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordtype">bool</span> isControlledObject = (entity == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject) || (owner == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject) || (parent == <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.ControlledObject);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="keywordflow">if</span> ((MyGuiScreenTerminal.IsOpen &amp;&amp; (MyGuiScreenTerminal.Interacted == entity)) || (isControlledObject &amp;&amp; (introCue.Alternative2D != <span class="keywordtype">string</span>.Empty) &amp;&amp; (loopCue.Alternative2D != <span class="keywordtype">string</span>.Empty)))</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> introEnum = (<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>)Enum.Parse(typeof(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>), introCue.Alternative2D);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> loopEnum = (<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>)Enum.Parse(typeof(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>), loopCue.Alternative2D);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                    introCueEnum = introEnum;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    loopCueEnum = loopEnum;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                <span class="keywordflow">catch</span> (Exception)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> VolumeVariation(MyObjectBuilder_CueDefinition cue)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <span class="keywordflow">return</span> MyVRageUtils.GetRandomFloat(-1f, 1f) * cue.VolumeVariation * 0.07f;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> PitchVariation(MyObjectBuilder_CueDefinition cue)</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="keywordflow">return</span> MyVRageUtils.GetRandomFloat(-1f, 1f) * cue.PitchVariation / 100f;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a5b3d6cf3a1886247329aee44d185f314">  902</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a5b3d6cf3a1886247329aee44d185f314">SemitonesToFrequencyRatio</a>(<span class="keywordtype">float</span> semitones)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="keywordflow">return</span> XAudio2.SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abda7daa201c895172975572a8462fb8c">  907</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abda7daa201c895172975572a8462fb8c">PlayIntroLoopPair3D</a>(<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">IMy3DSoundEmitter</a> source, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> introCueEnum, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> loopCueEnum, <span class="keywordtype">bool</span> addToUpdateList = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="keywordflow">if</span> ((introCueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None) || (loopCueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None))</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <span class="comment">//  If this computer can&#39;t play sound, we don&#39;t create cues</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a>)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            MyObjectBuilder_CueDefinition introCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(introCueEnum);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            MyObjectBuilder_CueDefinition loopCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(loopCueEnum);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            Debug.Assert(!introCue.IsHudCue &amp;&amp; !loopCue.IsHudCue, <span class="stringliteral">&quot;Hud cue can&#39;t be played as 3d sound!&quot;</span>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            Debug.Assert(!introCue.Loopable &amp;&amp; loopCue.Loopable, <span class="stringliteral">&quot;MyAudio.PlayIntroLoopPair3D is meant to play only pairs intro-loop&quot;</span>);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> voice = null;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">if</span> (TrySwitchToIntroLoopPair2D(source, ref introCueEnum, ref loopCueEnum))</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                introCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(introCueEnum);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                loopCue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(loopCueEnum);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                voice = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">GetVoice</a>(introCueEnum);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <span class="keywordflow">if</span> (voice != null)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                    <span class="keywordflow">if</span> (loopCue.PitchVariation != 0f)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                    {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        <span class="keywordtype">float</span> semitones = PitchVariation(loopCue);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                        voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                        voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = 1f;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                    <span class="keywordtype">float</span> volume2D = loopCue.Volume;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                    <span class="keywordflow">if</span> (loopCue.VolumeVariation != 0f)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                    {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                        <span class="keywordtype">float</span> variation = VolumeVariation(loopCue);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        volume2D = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume2D + variation, 0f, 1f);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                    voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>(volume2D);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                    voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetFrequencyRatio(voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_gameAudioVoiceDesc);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html">MyInMemoryWave</a> wave2D = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a5001f52bed277efdbffa40b82f04c5a8">GetRandomWave</a>(loopCue);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    <span class="keywordflow">if</span> (wave2D != null)</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        <span class="keywordflow">if</span> (m_3Dsounds.Contains(source))</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                            StopUpdating3DCue(source);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                        Debug.Assert(voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Encoding == wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Encoding, <span class="stringliteral">&quot;Intro and loop cues must have the same encoding!&quot;</span>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                        Debug.Assert((voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Channels == 2) &amp;&amp; (voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Channels == wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Channels), <span class="stringliteral">&quot;Both intro and loop cues must have 2 channels&quot;</span>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                        <span class="keywordflow">if</span> (voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Encoding == wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Encoding)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                        {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a8268dce40da675cde4844dc42f1d458f">SubmitSourceBuffer</a>(loopCueEnum, wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#af8713323e0f9e1d5f80025e1ff8f3844">Buffer</a>, wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a51325c9197d6f82e27464d5264047de5">Stream</a>.DecodedPacketsInfo, wave2D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.SampleRate);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Start</a>();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                            ++m_soundInstancesTotal2D;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                <span class="keywordflow">return</span> voice;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            voice = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">GetVoice</a>(introCueEnum);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">if</span> (voice == null)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keywordflow">if</span> (loopCue.PitchVariation != 0f)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                <span class="keywordtype">float</span> semitones = PitchVariation(loopCue);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = 1f;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keywordtype">float</span> volume = loopCue.Volume;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <span class="keywordflow">if</span> (loopCue.VolumeVariation != 0f)</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                <span class="keywordtype">float</span> variation = VolumeVariation(loopCue);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                volume = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume + variation, 0f, 1f);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>(volume);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetFrequencyRatio(voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_gameAudioVoiceDesc);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html">MyInMemoryWave</a> wave3D = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a5001f52bed277efdbffa40b82f04c5a8">GetRandomWave</a>(loopCue);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">if</span> (wave3D == null)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            Debug.Assert(voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Encoding == wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Encoding, <span class="stringliteral">&quot;Intro and loop cues must have the same encoding!&quot;</span>);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            Debug.Assert((voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Channels == 1) &amp;&amp; (voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Channels == wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Channels), <span class="stringliteral">&quot;Both intro and loop cues must have 1 channel&quot;</span>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">if</span> (voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Owner</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">WaveFormat</a>.Encoding != wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.Encoding)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a8268dce40da675cde4844dc42f1d458f">SubmitSourceBuffer</a>(loopCueEnum, wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#af8713323e0f9e1d5f80025e1ff8f3844">Buffer</a>, wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a51325c9197d6f82e27464d5264047de5">Stream</a>.DecodedPacketsInfo, wave3D.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">WaveFormat</a>.SampleRate);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Start</a>();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="keywordflow">if</span> (!m_listener.UpdateFromPlayer())</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                m_listener.UpdateFromMainCamera();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            m_helperEmitter.UpdateValues(source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a181342c2955954ff76cc729af208ab01">DirForward</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a9e962d2bc6709930a7dd0f5c83c03fb0">DirUp</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#ac53fe3aad17be18803885ef756d207a4">Velocity</a>, loopCue, m_deviceDetails.OutputFormat.Channels);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            m_x3dAudio.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html#aaf607bee1d26db29905427d0c663b0bb">Apply3D</a>(voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>, m_listener, m_helperEmitter, introCue.MaxDistance, voice.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            Update3DCuesState();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">if</span> (addToUpdateList)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                Add3DCueToUpdateList(source, loopCueEnum);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            ++m_soundInstancesTotal3D;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keywordflow">return</span> voice;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Add3DCueToUpdateList(<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">IMy3DSoundEmitter</a> source, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            m_3Dsounds.Add(source);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            MyHudEntityParams hudEntityParams = <span class="keyword">new</span> MyHudEntityParams()</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                FlagsEnum = <a class="code" href="namespace_v_rage_1_1_game_1_1_gui.html#a272bacea878ad1c11421388dee7daadf">MyHudIndicatorFlagsEnum</a>.SHOW_ALL,</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                Text = <span class="keyword">new</span> StringBuilder(cueEnum.ToString()),</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            };</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                MyHud.LocationMarkers.RegisterMarker(m_3Dsounds[m_3Dsounds.Count - 1].Entity, hudEntityParams);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="comment">//  Adds new cue and starts playing it.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="comment">//  Method returns reference to the cue, so that we can stop playing it.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3f57d8770978b4528a7b72740ab75bf4"> 1039</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3f57d8770978b4528a7b72740ab75bf4">PlayCue3D</a>(<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">IMy3DSoundEmitter</a> source, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum, <span class="keywordtype">bool</span> addToUpdateList = <span class="keyword">true</span>)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="keywordflow">if</span> (cueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="comment">//  If this computer can&#39;t play sound, we don&#39;t create cues</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a>)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <span class="comment">//  If this is one-time cue, we check if it is close enough to hear it and if not, we don&#39;t even play - this is for optimization only.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <span class="comment">//  We must add loopable cues always, because if source of cue comes near the camera, we need to update the position, but of course we can do that only if we have reference to it.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            Debug.Assert(!cue.IsHudCue, <span class="stringliteral">&quot;Hud cue can&#39;t be played as 3d sound!&quot;</span>);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">if</span> ((SoloCue != null) &amp;&amp; (SoloCue != cue))</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">if</span> (!cue.Loopable)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordtype">float</span> distanceToSound;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player != null) &amp;&amp; (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity != null) &amp;&amp; (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity.Entity != null))</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                    distanceToSound = <a class="code" href="namespace_vector3.html">Vector3</a>.DistanceSquared(<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity.Entity.<a class="code" href="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_i_my_player.html#a1c50b00b8a3875c1c4713cd5cabdbb22">GetPosition</a>(), source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">MySector</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">MainCamera</a> != null)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                    distanceToSound = <a class="code" href="namespace_vector3.html">Vector3</a>.DistanceSquared(<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">MySector</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">MainCamera</a>.Position, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                    <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <span class="keywordflow">if</span> (distanceToSound &gt; cue.MaxDistance * cue.MaxDistance)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> sound = null;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            sound = TrySwitchToCue2D(source, cue);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            <span class="keywordflow">if</span> (sound != null)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="keywordflow">return</span> sound;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            sound = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">GetVoice</a>(cueEnum);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">if</span> (sound == null)</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="keywordflow">if</span> (cue.PitchVariation != 0f)</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <span class="keywordtype">float</span> semitones = PitchVariation(cue);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = 1f;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <span class="keywordtype">float</span> volume = cue.Volume;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">if</span> (cue.VolumeVariation != 0f)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <span class="keywordtype">float</span> variation = VolumeVariation(cue);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                volume = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume + variation, 0f, 1f);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>(volume);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_gameAudioVoiceDesc);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="comment">//if (cue.UseOcclusion)</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="comment">//{</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="comment">//    //occlusions are disabled;</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="comment">//  Play the cue</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Start</a>();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">if</span> (!m_listener.UpdateFromPlayer())</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                m_listener.UpdateFromMainCamera();</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            m_helperEmitter.UpdateValues(source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a181342c2955954ff76cc729af208ab01">DirForward</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a9e962d2bc6709930a7dd0f5c83c03fb0">DirUp</a>, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#ac53fe3aad17be18803885ef756d207a4">Velocity</a>, cue, m_deviceDetails.OutputFormat.Channels);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            m_x3dAudio.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html#aaf607bee1d26db29905427d0c663b0bb">Apply3D</a>(sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>, m_listener, m_helperEmitter, cue.MaxDistance, sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            Update3DCuesState();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="keywordflow">if</span> (addToUpdateList)</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                Add3DCueToUpdateList(source, cueEnum);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            ++m_soundInstancesTotal3D;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <span class="keywordflow">return</span> sound;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="comment">//public static float CalculateOcclusion(ref Vector3 position)</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="comment">//    // Occlusions are disabled</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="comment">//    return 0f;</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="comment">//public static void CalculateOcclusion(MySourceVoice cue, Vector3 position)</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="comment">//    // Occlusions are disabled</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="comment">//    return;</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#af81b68d5e2805341932aff482d54e398"> 1139</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#af81b68d5e2805341932aff482d54e398">WriteDebugInfo</a>(StringBuilder builder)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">if</span> (m_cueBank != null)</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a5e90b40185c7ea0c1b110eaface8dbeb">WriteDebugInfo</a>(builder);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ab68931f513a91b302b16d28d24b51e33"> 1145</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ab68931f513a91b302b16d28d24b51e33">GetUpdating3DSoundsCount</a>()</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="keywordflow">return</span> (m_3Dsounds != null) ? m_3Dsounds.Count : 0;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9862415d739760c59ebbff0c92f85fb9"> 1150</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9862415d739760c59ebbff0c92f85fb9">GetSoundInstancesTotal2D</a>()</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">return</span> m_soundInstancesTotal2D;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a1ad78b148961c143d33b35286ec3b53f"> 1155</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a1ad78b148961c143d33b35286ec3b53f">GetSoundInstancesTotal3D</a>()</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordflow">return</span> m_soundInstancesTotal3D;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Update3DCuesState(<span class="keywordtype">bool</span> updatePosition = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="keywordflow">if</span> (!m_canUpdate3dSounds)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordtype">int</span> counter = 0;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">while</span> (counter &lt; m_3Dsounds.Count)</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordflow">if</span> (m_3Dsounds[counter].Sound == null)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                    <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                        MyHud.LocationMarkers.UnregisterMarker(m_3Dsounds[counter].Entity);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    m_3Dsounds.Remove(m_3Dsounds[counter]);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m_3Dsounds[counter].Sound.IsPlaying)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                        MyHud.LocationMarkers.UnregisterMarker(m_3Dsounds[counter].Entity);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                    m_3Dsounds[counter].Sound = null;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    m_3Dsounds.Remove(m_3Dsounds[counter]);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    <span class="keywordflow">if</span> (updatePosition)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                        Update3DCuePosition(m_3Dsounds[counter]);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                        <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                            <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(m_3Dsounds[counter].SourcePosition, 0.25f, <a class="code" href="namespace_color.html">Color</a>.Red.ToVector3(), 1f, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    ++counter;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Update3DCuesPositions()</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">if</span> (!m_listener.UpdateFromPlayer())</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                m_listener.UpdateFromMainCamera();</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            Update3DCuesState(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Update3DCuePosition(IMy3DSoundEmitter source)</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="comment">//if (!MyFakes.OPTIMIZATION_FOR_300_SMALLSHIPS)</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            <span class="comment">//{</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="comment">//    CalculateOcclusion(cue, position);</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(source.CueEnum);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            m_helperEmitter.UpdateValues(source.SourcePosition, source.DirForward, source.DirUp, source.Velocity, cue, m_deviceDetails.OutputFormat.Channels);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            m_x3dAudio.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html#aaf607bee1d26db29905427d0c663b0bb">Apply3D</a>(source.Sound.Voice, m_listener, m_helperEmitter, cue.MaxDistance, source.Sound.FrequencyRatio);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> StopUpdating3DCue(IMy3DSoundEmitter source)</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                MyHud.LocationMarkers.UnregisterMarker(source.Entity);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            m_3Dsounds.Remove(source);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#aef7e9c1709837e746861c22bc7cecb06"> 1231</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#aef7e9c1709837e746861c22bc7cecb06">StopUpdatingAll3DCues</a>()        </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="keywordflow">while</span> (m_3Dsounds.Count &gt; 0)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_AUDIO)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                    MyHud.LocationMarkers.UnregisterMarker(m_3Dsounds[0].Entity);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                m_3Dsounds.Remove(m_3Dsounds[0]);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a0e37dbc797aeec06f39da0c43ed7b5c8"> 1245</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a0e37dbc797aeec06f39da0c43ed7b5c8">SourceIsCloseEnoughToPlaySound</a>(<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">IMy3DSoundEmitter</a> source, <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum)</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">if</span> (cueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <span class="keywordflow">if</span> (cue == null)</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordtype">float</span> distanceToSound;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player != null) &amp;&amp; (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity != null) &amp;&amp; (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity.Entity != null))</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                distanceToSound = <a class="code" href="namespace_vector3.html">Vector3</a>.DistanceSquared(<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.Player.PlayerEntity.Entity.<a class="code" href="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_i_my_player.html#a1c50b00b8a3875c1c4713cd5cabdbb22">GetPosition</a>(), source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">MySector</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">MainCamera</a> != null)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                distanceToSound = <a class="code" href="namespace_vector3.html">Vector3</a>.DistanceSquared(<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">MySector</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">MainCamera</a>.Position, source.<a class="code" href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">SourcePosition</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">return</span> (distanceToSound &lt;= cue.MaxDistance * cue.MaxDistance);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div>
<div class="line"><a name="l01268"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3e57db087cd30a1ab2eee1fcddd70d04"> 1268</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3e57db087cd30a1ab2eee1fcddd70d04">PlayTestSound</a>(<a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a> cueEnum)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="keywordflow">if</span> (cueEnum == <a class="code" href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">MySoundCuesEnum</a>.None)</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            MyObjectBuilder_CueDefinition cue = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">GetCue</a>(cueEnum);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="keywordtype">string</span> name = cue.Name.ToLower();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keywordflow">if</span> (name.EndsWith(<span class="stringliteral">&quot;2d&quot;</span>) || cue.IsHudCue)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                <span class="keywordflow">return</span> PlayCue2D(cueEnum);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="comment">//  If this computer can&#39;t play sound, we don&#39;t create cues</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">if</span> (!m_canPlay)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">IsGameReady</a>)</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="keywordflow">if</span> (m_cueBank == null)</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keywordflow">if</span> (!name.EndsWith(<span class="stringliteral">&quot;3d&quot;</span>))</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">MySourceVoice</a> sound = m_cueBank.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">GetVoice</a>(cueEnum);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="keywordflow">if</span> (sound == null)</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">if</span> (cue.PitchVariation != 0f)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <span class="keywordtype">float</span> semitones = PitchVariation(cue);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = SemitonesToFrequencyRatio(semitones);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">FrequencyRatio</a> = 1f;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordtype">float</span> volume = cue.Volume;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            <span class="keywordflow">if</span> (cue.VolumeVariation != 0f)</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                <span class="keywordtype">float</span> variation = VolumeVariation(cue);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                volume = <a class="code" href="namespace_math_helper.html">MathHelper</a>.Clamp(volume + variation, 0f, 1f);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">SetVolume</a>(volume);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Voice</a>.SetOutputVoices(m_gameAudioVoiceDesc);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="comment">//  Play the cue</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            sound.<a class="code" href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Start</a>();</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <span class="keywordflow">return</span> sound;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">void</span> SaveCueDefinitions()</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            MyObjectBuilder_CueDefinitions ob = CueBank.GetObjectBuilder();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            MyObjectBuilder_Base.SerializeXML(MyCreateFileAudioSBA.GetFilenameSBA(), ob);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;}</div>
<div class="ttc" id="namespace_system_1_1_text_html"><div class="ttname"><a href="namespace_system_1_1_text.html">System.Text</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_graphics_2_string_builder_extensions_8cs_source.html#l00008">StringBuilderExtensions.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_game.html">Sandbox.Game</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_platform_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_platform.html">Sandbox.Engine.Platform</a></div><div class="ttdef"><b>Definition:</b> <a href="_game_8cs_source.html#l00027">Game.cs:27</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_abda7daa201c895172975572a8462fb8c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abda7daa201c895172975572a8462fb8c">Sandbox.Engine.Audio.MyAudio.PlayIntroLoopPair3D</a></div><div class="ttdeci">static MySourceVoice PlayIntroLoopPair3D(IMy3DSoundEmitter source, MySoundCuesEnum introCueEnum, MySoundCuesEnum loopCueEnum, bool addToUpdateList=true)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00907">MyAudio.cs:907</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html">Sandbox.Engine.Audio.MyX3DAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_x3_d_audio_8cs_source.html#l00012">MyX3DAudio.cs:12</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html">Sandbox.Engine.Audio.MyAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00046">MyAudio.cs:46</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html">VRage.Utils.MyLog</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00049">MyLog.cs:49</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_world_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_world.html">Sandbox.Game.World</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_build_component_base_8cs_source.html#l00022">MyBuildComponentBase.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a00e18b7eff8fbdd57ee0bfdd47e66d34"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a00e18b7eff8fbdd57ee0bfdd47e66d34">Sandbox.Engine.Audio.MyAudio.MuteHud</a></div><div class="ttdeci">static void MuteHud(bool mute)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00524">MyAudio.cs:524</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a9862415d739760c59ebbff0c92f85fb9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9862415d739760c59ebbff0c92f85fb9">Sandbox.Engine.Audio.MyAudio.GetSoundInstancesTotal2D</a></div><div class="ttdeci">static int GetSoundInstancesTotal2D()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01150">MyAudio.cs:1150</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_g_u_i_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_g_u_i.html">Sandbox.Game.GUI</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_audio_8cs_source.html#l00015">MyGuiAudio.cs:15</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_audio_html_ad49839bf285ba1dcae1268ac0b743651ac9dbb2b7c84159b632d71e512eba8428"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651ac9dbb2b7c84159b632d71e512eba8428">Sandbox.Engine.Audio.Playing</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a7f35709ea3e72c7e85c9821015b73e30"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a7f35709ea3e72c7e85c9821015b73e30">Sandbox.Engine.Audio.MyAudio.Pause</a></div><div class="ttdeci">static void Pause()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00442">MyAudio.cs:442</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_af81b68d5e2805341932aff482d54e398"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#af81b68d5e2805341932aff482d54e398">Sandbox.Engine.Audio.MyAudio.WriteDebugInfo</a></div><div class="ttdeci">static void WriteDebugInfo(StringBuilder builder)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01139">MyAudio.cs:1139</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_utils_1_1_my_config_html_a36b05c378a82d5de674aaf847b6d37f5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a36b05c378a82d5de674aaf847b6d37f5">Sandbox.Engine.Utils.MyConfig.GameVolume</a></div><div class="ttdeci">float GameVolume</div><div class="ttdef"><b>Definition:</b> <a href="_my_config_8cs_source.html#l00423">MyConfig.cs:423</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a63d837672ac672196070873bf1c5d79a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a63d837672ac672196070873bf1c5d79a">Sandbox.Engine.Audio.MyAudio.HasAnyTransition</a></div><div class="ttdeci">static bool HasAnyTransition()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00530">MyAudio.cs:530</a></div></div>
<div class="ttc" id="namespace_sys_utils_html"><div class="ttname"><a href="namespace_sys_utils.html">SysUtils</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a2abc92476c04f39266febccfbfed3752"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2abc92476c04f39266febccfbfed3752">Sandbox.Engine.Audio.MySourceVoice.Stop</a></div><div class="ttdeci">void Stop(bool force=false)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00071">MySourceVoice.cs:71</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_1_1_generic_html"><div class="ttname"><a href="namespace_system_1_1_collections_1_1_generic.html">System.Collections.Generic</a></div><div class="ttdef"><b>Definition:</b> <a href="_dictionary_extensions_8cs_source.html#l00007">DictionaryExtensions.cs:7</a></div></div>
<div class="ttc" id="namespace_math_helper_html"><div class="ttname"><a href="namespace_math_helper.html">MathHelper</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine.html">Sandbox.Engine</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_utils_1_1_my_config_html_a19c5a965a2c079c8c8d85bf21ba08d57"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html#a19c5a965a2c079c8c8d85bf21ba08d57">Sandbox.Engine.Utils.MyConfig.MusicVolume</a></div><div class="ttdeci">float MusicVolume</div><div class="ttdef"><b>Definition:</b> <a href="_my_config_8cs_source.html#l00436">MyConfig.cs:436</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_acb0a743dbd4b509b787c9ed7e6c3675c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#acb0a743dbd4b509b787c9ed7e6c3675c">Sandbox.Engine.Audio.MyCueBank.GetRandomTransitionCategory</a></div><div class="ttdeci">string GetRandomTransitionCategory(MyMusicTransitionEnum transitionEnum)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00271">MyCueBank.cs:271</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html">Sandbox.Engine.Audio.IMy3DSoundEmitter</a></div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00013">My3DSoundEmitter.cs:13</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_physics_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_physics.html">Sandbox.Engine.Physics</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_breakable_shape_clone_job_8cs_source.html#l00011">MyBreakableShapeCloneJob.cs:11</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_components_html_a4deab95c525a10b983bba0cd861ab992"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_components.html#a4deab95c525a10b983bba0cd861ab992">VRage.Game.Components.MyUpdateOrder</a></div><div class="ttdeci">MyUpdateOrder</div><div class="ttdef"><b>Definition:</b> <a href="_my_session_component_base_8cs_source.html#l00011">MySessionComponentBase.cs:11</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_session_component_descriptor_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_session_component_descriptor.html">VRage.Game.Components.MySessionComponentDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_session_component_base_8cs_source.html#l00020">MySessionComponentBase.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a8268dce40da675cde4844dc42f1d458f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a8268dce40da675cde4844dc42f1d458f">Sandbox.Engine.Audio.MySourceVoice.SubmitSourceBuffer</a></div><div class="ttdeci">void SubmitSourceBuffer(MySoundCuesEnum cueEnum, AudioBuffer buffer, uint[] decodedXMWAPacketInfo, int sampleRate)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00048">MySourceVoice.cs:48</a></div></div>
<div class="ttc" id="namespace_system_1_1_runtime_html"><div class="ttname"><a href="namespace_system_1_1_runtime.html">System.Runtime</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a5b3d6cf3a1886247329aee44d185f314"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a5b3d6cf3a1886247329aee44d185f314">Sandbox.Engine.Audio.MyAudio.SemitonesToFrequencyRatio</a></div><div class="ttdeci">static float SemitonesToFrequencyRatio(float semitones)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00902">MyAudio.cs:902</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_ab9de09512a9bce842253f472173fadae"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ab9de09512a9bce842253f472173fadae">Sandbox.Engine.Audio.MySourceVoice.CueEnum</a></div><div class="ttdeci">MySoundCuesEnum CueEnum</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00029">MySourceVoice.cs:29</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_v_rage_render_1_1_my_render_proxy_html"><div class="ttname"><a href="class_v_rage_render_1_1_my_render_proxy.html">VRageRender.MyRenderProxy</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_render_proxy_8cs_source.html#l00035">MyRenderProxy.cs:35</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_adf7d4795325834ce1656d870f89652ba"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#adf7d4795325834ce1656d870f89652ba">Sandbox.Engine.Audio.MyAudio.ApplyTransition</a></div><div class="ttdeci">static bool ApplyTransition(MyMusicTransitionEnum transitionEnum, int priority=0, string category=null, bool loop=true)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00645">MyAudio.cs:645</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_audio_html_a1e4b858c4db6a80acceb3856e04effae"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_audio.html#a1e4b858c4db6a80acceb3856e04effae">Sandbox.Engine.Audio.MyMusicTransitionEnum</a></div><div class="ttdeci">MyMusicTransitionEnum</div><div class="ttdef"><b>Definition:</b> <a href="_my_audio___data_8cs_source.html#l00014">MyAudio_Data.cs:14</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">VRage.Game.Entity.MyEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00027">MyEntity.cs:27</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_screens_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_screens.html">Sandbox.Game.Screens</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_aeea4ffedef3f225b179af72f77aabc7b"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#aeea4ffedef3f225b179af72f77aabc7b">Sandbox.MySandboxGame.IsGameReady</a></div><div class="ttdeci">static bool IsGameReady</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00106">MySandboxGame.cs:106</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a8d85955f2b19bacc6d63d2713782a5e7"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8d85955f2b19bacc6d63d2713782a5e7">Sandbox.Engine.Audio.MyCueBank.IsPlayingHudSounds</a></div><div class="ttdeci">bool IsPlayingHudSounds()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00317">MyCueBank.cs:317</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_gui_html_a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Sandbox.Game.Gui.Debug</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a8a66e38a77b22cb4a93cd06ab13e58f7"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8a66e38a77b22cb4a93cd06ab13e58f7">Sandbox.Engine.Audio.MyCueBank.ApplyReverb</a></div><div class="ttdeci">bool ApplyReverb</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00261">MyCueBank.cs:261</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_audio_html_a0978e07ef6c47701b52d25ddc068a076"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_audio.html#a0978e07ef6c47701b52d25ddc068a076">Sandbox.Engine.Audio.MySoundCuesEnum</a></div><div class="ttdeci">MySoundCuesEnum</div><div class="ttdef"><b>Definition:</b> <a href="_my_audio___data_8cs_source.html#l00033">MyAudio_Data.cs:33</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio_html_aaf607bee1d26db29905427d0c663b0bb"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_x3_d_audio.html#aaf607bee1d26db29905427d0c663b0bb">Sandbox.Engine.Audio.MyX3DAudio.Apply3D</a></div><div class="ttdeci">void Apply3D(SourceVoice voice, Listener listener, Emitter emitter, float maxDistance, float frequencyRatio)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_x3_d_audio_8cs_source.html#l00023">MyX3DAudio.cs:23</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_sector_html_ab7bed02f70ba0a5517fe75c3489038f5"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">Sandbox.Game.World.MySector.MainCamera</a></div><div class="ttdeci">static MyCamera MainCamera</div><div class="ttdef"><b>Definition:</b> <a href="_my_sector_8cs_source.html#l00113">MySector.cs:113</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_audio_html_ad49839bf285ba1dcae1268ac0b743651aafedf9afee367f51f98d7cf030c976a6"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651aafedf9afee367f51f98d7cf030c976a6">Sandbox.Engine.Audio.Transition</a></div></div>
<div class="ttc" id="_my_gui_skin_definition_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">using System</div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_skin_definition_8cs_source.html#l00001">MyGuiSkinDefinition.cs:1</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a5001f52bed277efdbffa40b82f04c5a8"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a5001f52bed277efdbffa40b82f04c5a8">Sandbox.Engine.Audio.MyCueBank.GetRandomWave</a></div><div class="ttdeci">MyInMemoryWave GetRandomWave(MyObjectBuilder_CueDefinition cue)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00306">MyCueBank.cs:306</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_ae93b94552b71a33a819572b718d920a2"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ae93b94552b71a33a819572b718d920a2">Sandbox.Engine.Audio.MyCueBank.SetAudioEngine</a></div><div class="ttdeci">void SetAudioEngine(XAudio2 audioEngine)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00094">MyCueBank.cs:94</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_trace_html_a0fae5564887b2d1ae1f09476e8ea4076"><div class="ttname"><a href="namespace_v_rage_1_1_trace.html#a0fae5564887b2d1ae1f09476e8ea4076">VRage.Trace.TraceWindow</a></div><div class="ttdeci">TraceWindow</div><div class="ttdef"><b>Definition:</b> <a href="_my_trace_8cs_source.html#l00011">MyTrace.cs:11</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html">Sandbox.Engine.Audio.MySourceVoice</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00017">MySourceVoice.cs:17</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_common_lib_1_1_object_builders_html"><div class="ttname"><a href="namespace_sandbox_1_1_common_lib_1_1_object_builders.html">Sandbox.CommonLib.ObjectBuilders</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___gui_label_8cs_source.html#l00006">MyObjectBuilder_GuiLabel.cs:6</a></div></div>
<div class="ttc" id="namespace_sharp_d_x_html"><div class="ttname"><a href="namespace_sharp_d_x.html">SharpDX</a></div></div>
<div class="ttc" id="namespace_color_html"><div class="ttname"><a href="namespace_color.html">Color</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html">Sandbox.Engine.Audio.MyCueBank</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00053">MyCueBank.cs:53</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ab68931f513a91b302b16d28d24b51e33"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ab68931f513a91b302b16d28d24b51e33">Sandbox.Engine.Audio.MyAudio.GetUpdating3DSoundsCount</a></div><div class="ttdeci">static int GetUpdating3DSoundsCount()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01145">MyAudio.cs:1145</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_utils_1_1_my_config_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_utils_1_1_my_config.html">Sandbox.Engine.Utils.MyConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_config_8cs_source.html#l00041">MyConfig.cs:41</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave_html_a51325c9197d6f82e27464d5264047de5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a51325c9197d6f82e27464d5264047de5">Sandbox.Engine.Audio.MyInMemoryWave.Stream</a></div><div class="ttdeci">SoundStream Stream</div><div class="ttdef"><b>Definition:</b> <a href="_my_sound_bank_8cs_source.html#l00020">MySoundBank.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a0e37dbc797aeec06f39da0c43ed7b5c8"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a0e37dbc797aeec06f39da0c43ed7b5c8">Sandbox.Engine.Audio.MyAudio.SourceIsCloseEnoughToPlaySound</a></div><div class="ttdeci">static bool SourceIsCloseEnoughToPlaySound(IMy3DSoundEmitter source, MySoundCuesEnum cueEnum)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01245">MyAudio.cs:1245</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_gui_html_a272bacea878ad1c11421388dee7daadf"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_gui.html#a272bacea878ad1c11421388dee7daadf">VRage.Game.Gui.MyHudIndicatorFlagsEnum</a></div><div class="ttdeci">MyHudIndicatorFlagsEnum</div><div class="ttdef"><b>Definition:</b> <a href="_my_hud_enums_8cs_source.html#l00029">MyHudEnums.cs:29</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ad18dd952b8009bcb357ebf28d9bf9fc6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ad18dd952b8009bcb357ebf28d9bf9fc6">Sandbox.Engine.Audio.MyAudio.GetMusicCue</a></div><div class="ttdeci">static MySourceVoice GetMusicCue()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00514">MyAudio.cs:514</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_utils_html"><div class="ttname"><a href="namespace_v_rage_1_1_utils.html">VRage.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my5_bit_encoding_8cs_source.html#l00006">My5BitEncoding.cs:6</a></div></div>
<div class="ttc" id="namespace_system_1_1_runtime_1_1_compiler_services_html"><div class="ttname"><a href="namespace_system_1_1_runtime_1_1_compiler_services.html">System.Runtime.CompilerServices</a></div><div class="ttdef"><b>Definition:</b> <a href="_class_id_attribute_8cs_source.html#l00007">ClassIdAttribute.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a3f57d8770978b4528a7b72740ab75bf4"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3f57d8770978b4528a7b72740ab75bf4">Sandbox.Engine.Audio.MyAudio.PlayCue3D</a></div><div class="ttdeci">static MySourceVoice PlayCue3D(IMy3DSoundEmitter source, MySoundCuesEnum cueEnum, bool addToUpdateList=true)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01039">MyAudio.cs:1039</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html">Sandbox.MySandboxGame</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00074">MySandboxGame.cs:74</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_abce3612b1c6eff992f88dfeb6e3d65b9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#abce3612b1c6eff992f88dfeb6e3d65b9">Sandbox.Engine.Audio.MyAudio.Update</a></div><div class="ttdeci">static void Update(bool ignoreGameReadyStatus=false)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00541">MyAudio.cs:541</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a8f90750706583bfd4c7eccaaef0b8f68"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8f90750706583bfd4c7eccaaef0b8f68">Sandbox.Engine.Audio.MyAudio.OnSetVolumeHud</a></div><div class="ttdeci">static VolumeChangeHandler OnSetVolumeHud</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00116">MyAudio.cs:116</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a0603c60415f1a656b3ab61ea92057a47"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a0603c60415f1a656b3ab61ea92057a47">VRage.Utils.MyLog.IncreaseIndent</a></div><div class="ttdeci">void IncreaseIndent(LoggingOptions option)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00187">MyLog.cs:187</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_aeb041e10f6e7f18ed67e62968fdbecd1"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#aeb041e10f6e7f18ed67e62968fdbecd1">Sandbox.Engine.Audio.IMy3DSoundEmitter.SourcePosition</a></div><div class="ttdeci">Vector3 SourcePosition</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00017">My3DSoundEmitter.cs:17</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a01b31784a9560e4ba557d86de2de9ce6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a01b31784a9560e4ba557d86de2de9ce6">Sandbox.Engine.Audio.MyAudio.PauseGameSounds</a></div><div class="ttdeci">static void PauseGameSounds()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00454">MyAudio.cs:454</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a5e90b40185c7ea0c1b110eaface8dbeb"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a5e90b40185c7ea0c1b110eaface8dbeb">Sandbox.Engine.Audio.MyCueBank.WriteDebugInfo</a></div><div class="ttdeci">void WriteDebugInfo(StringBuilder stringBuilder)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00364">MyCueBank.cs:364</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a280e0f68244c251cc79e8e6862340bf2"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">VRage.Utils.MyLog.WriteLine</a></div><div class="ttdeci">void WriteLine(string message, LoggingOptions option)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00347">MyLog.cs:347</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_a6b567ad262585332102f2ff9e3bf508c"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a6b567ad262585332102f2ff9e3bf508c">Sandbox.Engine.Audio.IMy3DSoundEmitter.OwnedBy</a></div><div class="ttdeci">MyEntity OwnedBy</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00022">My3DSoundEmitter.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a41846de3d2b994d5cd2ad30d903705bd"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a41846de3d2b994d5cd2ad30d903705bd">Sandbox.Engine.Audio.MyCueBank.Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00244">MyCueBank.cs:244</a></div></div>
<div class="ttc" id="namespace_system_1_1_i_o_html"><div class="ttname"><a href="namespace_system_1_1_i_o.html">System.IO</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_o_exception_extensions_8cs_source.html#l00010">IOExceptionExtensions.cs:10</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_ace0b2a01ca1e3548ff952173b78ce291"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ace0b2a01ca1e3548ff952173b78ce291">Sandbox.Engine.Audio.MyCueBank.GetRandomTransitionEnum</a></div><div class="ttdeci">MyMusicTransitionEnum GetRandomTransitionEnum()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00266">MyCueBank.cs:266</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ac8d7f0af9a073e65e48e637b15cacf0b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac8d7f0af9a073e65e48e637b15cacf0b">Sandbox.Engine.Audio.MyAudio.GetMusicState</a></div><div class="ttdeci">static MyMusicState GetMusicState()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00519">MyAudio.cs:519</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a3e57db087cd30a1ab2eee1fcddd70d04"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a3e57db087cd30a1ab2eee1fcddd70d04">Sandbox.Engine.Audio.MyAudio.PlayTestSound</a></div><div class="ttdeci">static MySourceVoice PlayTestSound(MySoundCuesEnum cueEnum)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01268">MyAudio.cs:1268</a></div></div>
<div class="ttc" id="_lighting_stage_2_my_gbuffer_8cs_html_ae896c0d143bd168cb01a9f5c671d6ea3"><div class="ttname"><a href="_lighting_stage_2_my_gbuffer_8cs.html#ae896c0d143bd168cb01a9f5c671d6ea3">Format</a></div><div class="ttdeci">SharpDX.DXGI.Format Format</div><div class="ttdef"><b>Definition:</b> <a href="_lighting_stage_2_my_gbuffer_8cs_source.html#l00009">MyGbuffer.cs:9</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a2936770217eeb68e664162e5a89b1c6a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a2936770217eeb68e664162e5a89b1c6a">Sandbox.Engine.Audio.MySourceVoice.IsPlaying</a></div><div class="ttdeci">bool IsPlaying</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00030">MySourceVoice.cs:30</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">Sandbox.Game.World.MySession</a></div><div class="ttdoc">Base class for all session types (single, coop, mmo, sandbox) </div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8_components_8cs_source.html#l00025">MySession.Components.cs:25</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_1_1_character_html_a1f1b0ed92b310659c5068aec38f5bf1da95b19f7739b0b7ea7d6b07586be54f36"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da95b19f7739b0b7ea7d6b07586be54f36">Sandbox.Game.Entities.Character.Init</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_a181342c2955954ff76cc729af208ab01"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a181342c2955954ff76cc729af208ab01">Sandbox.Engine.Audio.IMy3DSoundEmitter.DirForward</a></div><div class="ttdeci">Vector3 DirForward</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00018">My3DSoundEmitter.cs:18</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a9dd88e7ceb32ed35c5a0b47ddafb3167"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a9dd88e7ceb32ed35c5a0b47ddafb3167">Sandbox.Engine.Audio.MyAudio.WaitForPlayingHudSounds</a></div><div class="ttdeci">static void WaitForPlayingHudSounds()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00824">MyAudio.cs:824</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a4b5df0942550a1c445fa02195dc11538"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a4b5df0942550a1c445fa02195dc11538">VRage.Utils.MyLog.DecreaseIndent</a></div><div class="ttdeci">void DecreaseIndent(LoggingOptions option)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00231">MyLog.cs:231</a></div></div>
<div class="ttc" id="namespace_path_html"><div class="ttname"><a href="namespace_path.html">Path</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_ae8f63a3e3ee2401dff14022af01bf9a5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ae8f63a3e3ee2401dff14022af01bf9a5">Sandbox.Engine.Audio.MySourceVoice.SetVolume</a></div><div class="ttdeci">void SetVolume(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00089">MySourceVoice.cs:89</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a25e02b6bb4aba7cbf13986b88f37876f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a25e02b6bb4aba7cbf13986b88f37876f">Sandbox.Engine.Audio.MyAudio.ResumeGameSounds</a></div><div class="ttdeci">static void ResumeGameSounds()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00464">MyAudio.cs:464</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_ad324c3ff85ae9293cdef792963205093"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ad324c3ff85ae9293cdef792963205093">VRage.Game.Entity.MyEntity.Parent</a></div><div class="ttdeci">MyEntity Parent</div><div class="ttdoc">Gets or sets the parent. </div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00318">MyEntity.cs:318</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a101c6c8c27765257a33f8b9839948a93"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a101c6c8c27765257a33f8b9839948a93">Sandbox.Engine.Audio.MyCueBank.Update</a></div><div class="ttdeci">void Update()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00236">MyCueBank.cs:236</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_a9e962d2bc6709930a7dd0f5c83c03fb0"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#a9e962d2bc6709930a7dd0f5c83c03fb0">Sandbox.Engine.Audio.IMy3DSoundEmitter.DirUp</a></div><div class="ttdeci">Vector3 DirUp</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00019">My3DSoundEmitter.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave_html_a9c0b7e29be30111f9ff0b67485dae8e9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#a9c0b7e29be30111f9ff0b67485dae8e9">Sandbox.Engine.Audio.MyInMemoryWave.WaveFormat</a></div><div class="ttdeci">WaveFormat WaveFormat</div><div class="ttdef"><b>Definition:</b> <a href="_my_sound_bank_8cs_source.html#l00019">MySoundBank.cs:19</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html"><div class="ttname"><a href="namespace_v_rage_math.html">VRageMath</a></div><div class="ttdef"><b>Definition:</b> <a href="_base27_directions_8cs_source.html#l00007">Base27Directions.cs:7</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_ad6211c26fe6b341fedd7d8fe05eb14fd"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">VRage.Utils.MyLog.Default</a></div><div class="ttdeci">static MyLog Default</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00121">MyLog.cs:121</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_sector_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">Sandbox.Game.World.MySector</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sector_8cs_source.html#l00084">MySector.cs:84</a></div></div>
<div class="ttc" id="namespace_system_1_1_reflection_html"><div class="ttname"><a href="namespace_system_1_1_reflection.html">System.Reflection</a></div><div class="ttdef"><b>Definition:</b> <a href="_obfuscator_8cs_source.html#l00006">Obfuscator.cs:6</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities.html">Sandbox.Game.Entities</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity3_d_sound_emitter_8cs_source.html#l00018">MyEntity3DSoundEmitter.cs:18</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_af2f21a2092e6f5efdb46da26b1e13f9c"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#af2f21a2092e6f5efdb46da26b1e13f9c">Sandbox.Engine.Audio.IMy3DSoundEmitter.Entity</a></div><div class="ttdeci">MyEntity Entity</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00021">My3DSoundEmitter.cs:21</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_ad066b4b70f2c2c10ed2ec3eb3bce17f1"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#ad066b4b70f2c2c10ed2ec3eb3bce17f1">Sandbox.Engine.Audio.MySourceVoice.Owner</a></div><div class="ttdeci">MySourceVoicePool Owner</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00032">MySourceVoice.cs:32</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a510f880d60860340cd36225b1973f5ba"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a510f880d60860340cd36225b1973f5ba">Sandbox.Engine.Audio.MyAudio.UnloadData</a></div><div class="ttdeci">static new void UnloadData()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00310">MyAudio.cs:310</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter_html_ac53fe3aad17be18803885ef756d207a4"><div class="ttname"><a href="interface_sandbox_1_1_engine_1_1_audio_1_1_i_my3_d_sound_emitter.html#ac53fe3aad17be18803885ef756d207a4">Sandbox.Engine.Audio.IMy3DSoundEmitter.Velocity</a></div><div class="ttdeci">Vector3 Velocity</div><div class="ttdef"><b>Definition:</b> <a href="_my3_d_sound_emitter_8cs_source.html#l00020">My3DSoundEmitter.cs:20</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_audio_html_ad49839bf285ba1dcae1268ac0b743651"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_audio.html#ad49839bf285ba1dcae1268ac0b743651">Sandbox.Engine.Audio.MyMusicState</a></div><div class="ttdeci">MyMusicState</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00038">MyAudio.cs:38</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a143b76eee1948a5aaaa58350f054e88b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a143b76eee1948a5aaaa58350f054e88b">Sandbox.Engine.Audio.MySourceVoice.Start</a></div><div class="ttdeci">void Start()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00056">MySourceVoice.cs:56</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_html"><div class="ttname"><a href="namespace_system_1_1_collections.html">System.Collections</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_aef7e9c1709837e746861c22bc7cecb06"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#aef7e9c1709837e746861c22bc7cecb06">Sandbox.Engine.Audio.MyAudio.StopUpdatingAll3DCues</a></div><div class="ttdeci">static void StopUpdatingAll3DCues()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01231">MyAudio.cs:1231</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_ac19185488e2d3cfe64a2a5c43417dbb2"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#ac19185488e2d3cfe64a2a5c43417dbb2">Sandbox.Engine.Audio.MyCueBank.IsValidTransitionCategory</a></div><div class="ttdeci">bool IsValidTransitionCategory(MyMusicTransitionEnum transitionEnum, string category)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00286">MyCueBank.cs:286</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a4b0719ab3fb153c9c824a16caea23fb1"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a4b0719ab3fb153c9c824a16caea23fb1">Sandbox.Engine.Audio.MySourceVoice.FrequencyRatio</a></div><div class="ttdeci">float FrequencyRatio</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00034">MySourceVoice.cs:34</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a8dc46a73fdee871fd8fd38faed9506a6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a8dc46a73fdee871fd8fd38faed9506a6">Sandbox.Engine.Audio.MyCueBank.GetTransitionCue</a></div><div class="ttdeci">MySoundCuesEnum GetTransitionCue(MyMusicTransitionEnum transitionEnum, string category)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00291">MyCueBank.cs:291</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ada7508da49f1f80a9410ee42f48afb0c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ada7508da49f1f80a9410ee42f48afb0c">Sandbox.Engine.Audio.MyAudio.StopTransition</a></div><div class="ttdeci">static void StopTransition(int priority)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00721">MyAudio.cs:721</a></div></div>
<div class="ttc" id="namespace_v_rage_render_html"><div class="ttname"><a href="namespace_v_rage_render.html">VRageRender</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_trace_html"><div class="ttname"><a href="namespace_v_rage_1_1_trace.html">VRage.Trace</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_trace_8cs_source.html#l00006">ITrace.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ac0b99e3dab6b6ce8bf72b7fbde8e3a5a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ac0b99e3dab6b6ce8bf72b7fbde8e3a5a">Sandbox.Engine.Audio.MyAudio.GetRandomTransitionEnum</a></div><div class="ttdeci">static MyMusicTransitionEnum GetRandomTransitionEnum()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00637">MyAudio.cs:637</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_common_lib_html"><div class="ttname"><a href="namespace_sandbox_1_1_common_lib.html">Sandbox.CommonLib</a></div></div>
<div class="ttc" id="namespace_sandbox_html"><div class="ttname"><a href="namespace_sandbox.html">Sandbox</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_utils_html_a50cb0f9416412caad59479c3637c6d95"><div class="ttname"><a href="namespace_v_rage_1_1_utils.html#a50cb0f9416412caad59479c3637c6d95">VRage.Utils.LoggingOptions</a></div><div class="ttdeci">LoggingOptions</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00019">MyLog.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_a16436f5f04bb2e4ad4640ea1f45f7ba7"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#a16436f5f04bb2e4ad4640ea1f45f7ba7">Sandbox.MySandboxGame.TotalTimeInMilliseconds</a></div><div class="ttdeci">static int TotalTimeInMilliseconds</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00152">MySandboxGame.cs:152</a></div></div>
<div class="ttc" id="namespace_v_rage_html"><div class="ttname"><a href="namespace_v_rage.html">VRage</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_a4a4b1f09ae64404b9288452cdb69103c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#a4a4b1f09ae64404b9288452cdb69103c">Sandbox.Engine.Audio.MyCueBank.GetCue</a></div><div class="ttdeci">MyObjectBuilder_CueDefinition GetCue(MySoundCuesEnum cueEnum)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00296">MyCueBank.cs:296</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a249a754a68ff799fe87deef5aeec24ec"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a249a754a68ff799fe87deef5aeec24ec">Sandbox.Engine.Audio.MyAudio.Resume</a></div><div class="ttdeci">static void Resume()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00448">MyAudio.cs:448</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_html_a1f340eebc1f144f6ee0071034b832e83"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice.html#a1f340eebc1f144f6ee0071034b832e83">Sandbox.Engine.Audio.MySourceVoice.Voice</a></div><div class="ttdeci">SourceVoice Voice</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_8cs_source.html#l00028">MySourceVoice.cs:28</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank_html_aa40835d6f24a4bd8380a6a90a6c9b8d3"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_cue_bank.html#aa40835d6f24a4bd8380a6a90a6c9b8d3">Sandbox.Engine.Audio.MyCueBank.GetVoice</a></div><div class="ttdeci">MySourceVoice GetVoice(MySoundCuesEnum cueEnum)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_cue_bank_8cs_source.html#l00328">MyCueBank.cs:328</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave_html_af8713323e0f9e1d5f80025e1ff8f3844"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html#af8713323e0f9e1d5f80025e1ff8f3844">Sandbox.Engine.Audio.MyInMemoryWave.Buffer</a></div><div class="ttdeci">AudioBuffer Buffer</div><div class="ttdef"><b>Definition:</b> <a href="_my_sound_bank_8cs_source.html#l00021">MySoundBank.cs:21</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_adfd26215ea02f1829ca70670b918b950"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#adfd26215ea02f1829ca70670b918b950">Sandbox.MySandboxGame.Log</a></div><div class="ttdeci">static readonly MyLog Log</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00137">MySandboxGame.cs:137</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_ae7907dc8fb634acedf5a97290846e8fb"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#ae7907dc8fb634acedf5a97290846e8fb">Sandbox.Engine.Audio.MyAudio.LoadData</a></div><div class="ttdeci">static new void LoadData()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00220">MyAudio.cs:220</a></div></div>
<div class="ttc" id="namespace_vector3_html"><div class="ttname"><a href="namespace_vector3.html">Vector3</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_adcb6a66a1adc76f0c8e7f9bac402817e"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#adcb6a66a1adc76f0c8e7f9bac402817e">Sandbox.MySandboxGame.IsPaused</a></div><div class="ttdeci">static bool IsPaused</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l01861">MySandboxGame.cs:1861</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool_html_a9dee57b4a3c4ca85b955c1b69ce3c1cc"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_source_voice_pool.html#a9dee57b4a3c4ca85b955c1b69ce3c1cc">Sandbox.Engine.Audio.MySourceVoicePool.WaveFormat</a></div><div class="ttdeci">WaveFormat WaveFormat</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_source_voice_pool_8cs_source.html#l00027">MySourceVoicePool.cs:27</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a1ad78b148961c143d33b35286ec3b53f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a1ad78b148961c143d33b35286ec3b53f">Sandbox.Engine.Audio.MyAudio.GetSoundInstancesTotal3D</a></div><div class="ttdeci">static int GetSoundInstancesTotal3D()</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l01155">MyAudio.cs:1155</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_in_memory_wave.html">Sandbox.Engine.Audio.MyInMemoryWave</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sound_bank_8cs_source.html#l00013">MySoundBank.cs:13</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_utils_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_utils.html">Sandbox.Engine.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_battle_helper_8cs_source.html#l00014">MyBattleHelper.cs:14</a></div></div>
<div class="ttc" id="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_i_my_player_html_a1c50b00b8a3875c1c4713cd5cabdbb22"><div class="ttname"><a href="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_i_my_player.html#a1c50b00b8a3875c1c4713cd5cabdbb22">VRage.Game.ModAPI.IMyPlayer.GetPosition</a></div><div class="ttdeci">VRageMath.Vector3D GetPosition()</div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio_html_a8db0fcb827b573af6764e0d915e6564e"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_audio_1_1_my_audio.html#a8db0fcb827b573af6764e0d915e6564e">Sandbox.Engine.Audio.MyAudio.PlayCue2D</a></div><div class="ttdeci">static MySourceVoice PlayCue2D(MySoundCuesEnum cueEnum, float volume=-1f)</div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_game_2_engine_2_audio_2_my_audio_8cs_source.html#l00750">MyAudio.cs:750</a></div></div>
<div class="ttc" id="class_system_1_1_invalid_branch_exception_html"><div class="ttname"><a href="class_system_1_1_invalid_branch_exception.html">System.InvalidBranchException</a></div><div class="ttdef"><b>Definition:</b> <a href="_invalid_branch_exception_8cs_source.html#l00009">InvalidBranchException.cs:9</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 23 2017 01:16:18 for Space Engineers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
