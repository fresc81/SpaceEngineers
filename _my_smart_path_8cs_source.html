<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Space Engineers: Sources/Sandbox.Game/Game/AI/Pathfinding/MySmartPath.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Space Engineers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="dir_adcb7f0194fb5944415bcd7197787778.html">Sandbox.Game</a></li><li class="navelem"><a class="el" href="dir_04f95e6316a1b10de98d9c990257507d.html">Game</a></li><li class="navelem"><a class="el" href="dir_ffcafb3aa34258eaa8625d1f0c1c7780.html">AI</a></li><li class="navelem"><a class="el" href="dir_c1ab4fc79cb5d028f5af06714997a773.html">Pathfinding</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MySmartPath.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_my_smart_path_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_collections.html">Collections</a>.<a class="code" href="namespace_system_1_1_collections_1_1_generic.html">Generic</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_linq.html">Linq</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_text.html">Text</a>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_algorithms.html">Algorithms</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_collections.html">Collections</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="namespace_v_rage_1_1_game_1_1_entity.html">Entity</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_profiler.html">Profiler</a>;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_mod_a_p_i.html">ModAPI</a>;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_render.html">VRageRender</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_v_rage_1_1_game.html#ae840d3864e36153d6f5013c7a0403dcf">Game</a>.AI.Pathfinding</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html">   17</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html">MySmartPath</a> : <a class="code" href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_high_level_primitive_observer.html">IMyHighLevelPrimitiveObserver</a>, <a class="code" href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_path.html">IMyPath</a></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding.html">MyPathfinding</a> m_pathfinding;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> m_lastInitTime = 0;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> m_usedWholePath = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> m_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keyword">private</span> List&lt;MyHighLevelPrimitive&gt; m_pathNodes;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keyword">private</span> List&lt;Vector4D&gt; m_expandedPath;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> m_pathNodePosition;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> m_expandedPathPosition;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive.html">MyNavigationPrimitive</a> m_currentPrimitive = null;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html">MyHighLevelPrimitive</a> m_hlBegin = null;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keyword">private</span> <a class="code" href="namespace_vector3_d.html">Vector3D</a> m_startPoint;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html">MySmartGoal</a> m_goal;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html">MySmartPath</a> m_pathfindingStatic;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> TRANSITION_RADIUS = 1.0f;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a2f8c62939bc8a63b888885b850c3b3a4">   41</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape.html">IMyDestinationShape</a> Destination { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a22758e5b02c6e39eaf7e40195d7c7703">Destination</a>; } }</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a4b8c469af06cefe9b0bfe6028de3cd86">   42</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="namespace_i_my_entity.html">IMyEntity</a> EndEntity { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a6259d324c19980c33a6be5bf4f56fc86">EndEntity</a>; } }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> IsValid</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a2bbf8955724fb25c0429e7b21d814730">   45</a></span>&#160;        {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">if</span> (!m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a094b291c3e92755bf938ac4f217da6fc">IsValid</a>)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                    <span class="keywordflow">if</span> (m_valid)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                        Invalidate();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                    <span class="keywordflow">if</span> (m_valid)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                    {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                    }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                        m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a4603f76ac68ac59353ab40c147270a1f">Invalidate</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                    }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> PathCompleted</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#afe6c51dc653a34f5c7838acf2b3e0883">   72</a></span>&#160;        {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keywordflow">return</span> m_usedWholePath;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#ae70bb80b3b187ef5dd3bf359f85bc391">   79</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#ae70bb80b3b187ef5dd3bf359f85bc391">MySmartPath</a>(<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding.html">MyPathfinding</a> pathfinding)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            m_pathfinding = pathfinding;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            m_pathNodes = <span class="keyword">new</span> List&lt;MyHighLevelPrimitive&gt;();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            m_expandedPath = <span class="keyword">new</span> List&lt;Vector4D&gt;();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a9c292caba5fa87301440afe6861d62bd">   86</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a9c292caba5fa87301440afe6861d62bd">Init</a>(<a class="code" href="namespace_vector3_d.html">Vector3D</a> start, <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html">MySmartGoal</a> goal)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;MySmartPath.Init()&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            Debug.Assert(m_valid == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            m_lastInitTime = <a class="code" href="class_sandbox_1_1_my_sandbox_game.html">MySandboxGame</a>.<a class="code" href="class_sandbox_1_1_my_sandbox_game.html#aab10c218bf918dd38cee1a70f9d921da">TotalGamePlayTimeInMilliseconds</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            m_startPoint = start;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            m_goal = goal;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;Find start primitive&quot;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;FindClosestPrimitive&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            m_currentPrimitive = m_pathfinding.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding.html#a773867967439795f5e6bcba4d42df1d0">FindClosestPrimitive</a>(start, highLevel: <span class="keyword">false</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">if</span> (m_currentPrimitive != null)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                ProfilerShort.BeginNextBlock(<span class="stringliteral">&quot;GetHighLevelPrimitive&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                m_hlBegin = m_currentPrimitive.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive.html#a0064c2c93859793cd1aaefeaea7d3c3d">GetHighLevelPrimitive</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                Debug.Assert(m_hlBegin != null, <span class="stringliteral">&quot;Start primitive did not have a high-level primitive!&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">if</span> (m_hlBegin != null &amp;&amp; !m_pathNodes.Contains(m_hlBegin))</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    ProfilerShort.BeginNextBlock(<span class="stringliteral">&quot;ObservePrimitive&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    m_hlBegin.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Parent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#aff46daf3ae769ee29075c93ddd29c841">ObservePrimitive</a>(m_hlBegin, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">if</span> (m_currentPrimitive == null)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="comment">// CH: TODO: Starting primitive was not found. What to do now?</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                m_currentPrimitive = null;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                Invalidate();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            m_pathNodePosition = 0;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            m_expandedPathPosition = 0;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            m_expandedPath.Clear();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            m_pathNodes.Clear();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            m_usedWholePath = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            m_valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a51595967e7d43d74ffb560c8fd9de272">  133</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a51595967e7d43d74ffb560c8fd9de272">Reinit</a>(<a class="code" href="namespace_vector3_d.html">Vector3D</a> newStart)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            var previousGoal = m_goal;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            var previousEntity = previousGoal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a6259d324c19980c33a6be5bf4f56fc86">EndEntity</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            ClearPathNodes();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            m_expandedPath.Clear();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            m_expandedPathPosition = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            m_currentPrimitive = null;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span> (m_hlBegin != null)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                m_hlBegin.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Parent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#a63d8a75d56b5f08cc1440f3b5d066e8b">StopObservingPrimitive</a>(m_hlBegin, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            m_hlBegin = null;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            m_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a0cb6d1882945f65e41ca62145ee0ba27">Reinit</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            Init(newStart, previousGoal);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a0d341458a01478ff38c84469bad76048">  156</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a0d341458a01478ff38c84469bad76048">GetNextTarget</a>(<a class="code" href="namespace_vector3_d.html">Vector3D</a> currentPosition, out <a class="code" href="namespace_vector3_d.html">Vector3D</a> targetWorld, out <span class="keywordtype">float</span> radius, out <a class="code" href="namespace_i_my_entity.html">IMyEntity</a> relativeEntity)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordtype">bool</span> shouldReinit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            targetWorld = <span class="keywordflow">default</span>(<a class="code" href="namespace_vector3_d.html">Vector3D</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            radius = 1.0f;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            relativeEntity = null;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (m_pathNodePosition &gt; 1)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <span class="comment">// clearing of node on the begin of path</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                ClearFirstPathNode();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (m_expandedPathPosition &gt;= m_expandedPath.Count)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keywordflow">if</span> (!m_usedWholePath)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    shouldReinit = ShouldReinitPath();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keywordflow">if</span> (shouldReinit)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    Reinit(currentPosition);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                Debug.Assert(m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a094b291c3e92755bf938ac4f217da6fc">IsValid</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                Debug.Assert(m_valid);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                Debug.Assert(IsValid, <span class="stringliteral">&quot;Path is not valid in MySmartPath.GetNextTarget&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">if</span> (!IsValid)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                ProfilerShort.Begin(<span class="stringliteral">&quot;ExpandPath&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                ExpandPath(currentPosition);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">if</span> (m_expandedPath.Count == 0)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                Debug.Assert(m_expandedPathPosition &lt; m_expandedPath.Count);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span> (m_expandedPathPosition &lt; m_expandedPath.Count)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <a class="code" href="struct_v_rage_math_1_1_vector4_d.html">Vector4D</a> pathNode = m_expandedPath[m_expandedPathPosition];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                targetWorld = <span class="keyword">new</span> <a class="code" href="_my_camera_8cs.html#afeb956ae9f85b0c1c7f8d5ce4a07b8e5">Vector3D</a>(pathNode);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                radius = (float)pathNode.<a class="code" href="struct_v_rage_math_1_1_vector4_d.html#a9a3213a71f46bdc17e6a17a1d95601cd">W</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                m_expandedPathPosition++;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                if (m_expandedPathPosition == m_expandedPath.Count &amp;&amp; m_pathNodePosition &gt;= m_pathNodes.Count - 1)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    m_usedWholePath = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                relativeEntity = null;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a785cf6aa4bf47b069885a000016df070">  219</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a785cf6aa4bf47b069885a000016df070">Invalidate</a>()</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">if</span> (m_valid == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            ClearPathNodes();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            m_expandedPath.Clear();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            m_expandedPathPosition = 0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            m_currentPrimitive = null;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">if</span> (m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a094b291c3e92755bf938ac4f217da6fc">IsValid</a>)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a4603f76ac68ac59353ab40c147270a1f">Invalidate</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">if</span> (m_hlBegin != null)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                m_hlBegin.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Parent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#a63d8a75d56b5f08cc1440f3b5d066e8b">StopObservingPrimitive</a>(m_hlBegin, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            m_hlBegin = null;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            m_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ExpandPath(<a class="code" href="namespace_vector3_d.html">Vector3D</a> currentPosition)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span> (m_pathNodePosition &gt;= m_pathNodes.Count - 1)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                ProfilerShort.Begin(<span class="stringliteral">&quot;GenerateHighLevelPath&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                GenerateHighLevelPath();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">if</span> (m_pathNodePosition &gt;= m_pathNodes.Count)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html">MyPath&lt;MyNavigationPrimitive&gt;</a> path = null;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordtype">bool</span> isLastPath = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            m_expandedPath.Clear();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (m_pathNodePosition + 1 &lt; m_pathNodes.Count)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">if</span> (m_pathNodes[m_pathNodePosition].IsExpanded)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="keywordflow">if</span> (m_pathNodes[m_pathNodePosition + 1].IsExpanded)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                        IMyHighLevelComponent component = m_pathNodes[m_pathNodePosition].GetComponent();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                        IMyHighLevelComponent otherComponent = m_pathNodes[m_pathNodePosition + 1].GetComponent();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                        <span class="comment">// CH: TODO: Preallocate the functions to avoid using lambdas.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                        ProfilerShort.Begin(<span class="stringliteral">&quot;FindPath to next compo&quot;</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                        path = m_pathfinding.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path_finding_system.html#a1a7923d67535d6f2ee356cb80b8bb092">FindPath</a>(m_currentPrimitive, m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a19c6e2bf97408798fd2001a926ee0a5f">PathfindingHeuristic</a>, (prim) =&gt; otherComponent.Contains(prim) ? 0.0f : <span class="keywordtype">float</span>.PositiveInfinity, (prim) =&gt; component.Contains(prim) || otherComponent.Contains(prim));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        ProfilerShort.End();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                        Debug.Assert(!MyFakes.SHOW_PATH_EXPANSION_ASSERTS, <span class="stringliteral">&quot;First hierarchy path node is expanded, but the second one is not! First two nodes should always be expanded so that pathfinding can be done.&quot;</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!MyFakes.SHOW_PATH_EXPANSION_ASSERTS, <span class="stringliteral">&quot;Nodes of smart path are not expanded!&quot;</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span> (m_pathNodes[m_pathNodePosition].IsExpanded)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    <span class="comment">// Try to find a path to a goal primitive inside the last high level component.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="comment">// If the last primitive of the found path is not in the last high level component, add that component to the goal&#39;s ignore list</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    IMyHighLevelComponent component = m_pathNodes[m_pathNodePosition].GetComponent();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    ProfilerShort.Begin(<span class="stringliteral">&quot;FindPath to goal in the last component&quot;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    path = m_pathfinding.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path_finding_system.html#a1a7923d67535d6f2ee356cb80b8bb092">FindPath</a>(m_currentPrimitive, m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a19c6e2bf97408798fd2001a926ee0a5f">PathfindingHeuristic</a>, (prim) =&gt; component.Contains(prim) ? m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#ad200eddfe0111b9518afdc7f18162c06">TerminationCriterion</a>(prim) : 30.0f, (prim) =&gt; component.Contains(prim));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    ProfilerShort.End();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <span class="keywordflow">if</span> (path != null)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <span class="comment">// We reached goal</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="keywordflow">if</span> (path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> != 0 &amp;&amp; component.Contains(path[path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> - 1].Vertex as MyNavigationPrimitive))</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                            isLastPath = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        <span class="comment">// We reached other component (goal could not be reached in this component)</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                            m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a19989a4e24750a795110d7543b106acc">IgnoreHighLevel</a>(m_pathNodes[m_pathNodePosition]);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!MyFakes.SHOW_PATH_EXPANSION_ASSERTS, <span class="stringliteral">&quot;Nodes of smart path are not expanded!&quot;</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keywordflow">if</span> (path == null || path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> == 0)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="namespace_vector3_d.html">Vector3D</a> end = <span class="keywordflow">default</span>(<a class="code" href="namespace_vector3_d.html">Vector3D</a>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            var lastPrimitive = path[path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> - 1].Vertex as MyNavigationPrimitive;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">if</span> (isLastPath)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <a class="code" href="namespace_vector3.html">Vector3</a> endPoint = m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a22758e5b02c6e39eaf7e40195d7c7703">Destination</a>.<a class="code" href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape.html#a1308fb38c7ee1c841201c1adb955ea50">GetBestPoint</a>(lastPrimitive.WorldPosition);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <a class="code" href="namespace_vector3.html">Vector3</a> localEnd = lastPrimitive.Group.GlobalToLocal(endPoint);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                localEnd = lastPrimitive.ProjectLocalPoint(localEnd);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                end = lastPrimitive.Group.LocalToGlobal(localEnd);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                end = lastPrimitive.WorldPosition;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            RefineFoundPath(ref currentPosition, ref end, path);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="comment">// If the path is too short, don&#39;t use it to prevent jerking in stuck situations</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span> (m_pathNodes.Count &lt;= 1 &amp;&amp; isLastPath &amp;&amp; m_expandedPath.Count &gt; 0 &amp;&amp; path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> &lt;= 2 &amp;&amp; !m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a286aabd354431a612717d590a65846aa">ShouldReinitPath</a>())</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <a class="code" href="struct_v_rage_math_1_1_vector4_d.html">Vector4D</a> end4D = m_expandedPath[m_expandedPath.Count - 1];</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="comment">// Here, 256 is just a small enough value to catch most false-positives</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_vector3_d.html">Vector3D</a>.DistanceSquared(currentPosition, end) &lt; end4D.<a class="code" href="struct_v_rage_math_1_1_vector4_d.html#a9a3213a71f46bdc17e6a17a1d95601cd">W</a> * end4D.<a class="code" href="struct_v_rage_math_1_1_vector4_d.html#a9a3213a71f46bdc17e6a17a1d95601cd">W</a> / 256)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                     m_expandedPath.Clear();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> ShouldReinitPath()</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="comment">// This prevents re-initializing the path too often</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> (MySandboxGame.TotalGamePlayTimeInMilliseconds - m_lastInitTime &lt; 1000)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="comment">// Otherwise, the path needs to be reinitialized only when the target entity moves</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">return</span> m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a286aabd354431a612717d590a65846aa">ShouldReinitPath</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> GenerateHighLevelPath()</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            ClearPathNodes();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">if</span> (m_hlBegin == null)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            var path = m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#aa5df1f855ab64e7df501d4452815f12c">FindHighLevelPath</a>(m_pathfinding, m_hlBegin);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span> (path == null)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="comment">// CH: TODO: No path found (not even to an unexplored primitive). We&#39;re trapped! What now?</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">foreach</span> (var primitive <span class="keywordflow">in</span> path)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(primitive.Vertex is MyHighLevelPrimitive);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                var hlPrimitive = primitive.Vertex as MyHighLevelPrimitive;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                m_pathNodes.Add(hlPrimitive);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keywordflow">if</span> (hlPrimitive != m_hlBegin)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    hlPrimitive.Parent.ObservePrimitive(hlPrimitive, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            m_pathNodePosition = 0;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> RefineFoundPath(ref <a class="code" href="namespace_vector3_d.html">Vector3D</a> begin, ref <a class="code" href="namespace_vector3_d.html">Vector3D</a> end, <a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html">MyPath&lt;MyNavigationPrimitive&gt;</a> path)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(MyPerGameSettings.EnablePathfinding, <span class="stringliteral">&quot;Pathfinding is not enabled!&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> (!MyPerGameSettings.EnablePathfinding)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">if</span> (path == null)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(<span class="keyword">false</span>, <span class="stringliteral">&quot;Path to refine was null!&quot;</span>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            m_currentPrimitive = path[path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> - 1].Vertex as MyNavigationPrimitive;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">if</span> (m_hlBegin != null &amp;&amp; !m_pathNodes.Contains(m_hlBegin))</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                m_hlBegin.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Parent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#a63d8a75d56b5f08cc1440f3b5d066e8b">StopObservingPrimitive</a>(m_hlBegin, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            m_hlBegin = m_currentPrimitive.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive.html#a0064c2c93859793cd1aaefeaea7d3c3d">GetHighLevelPrimitive</a>();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">if</span> (m_hlBegin != null &amp;&amp; !m_pathNodes.Contains(m_hlBegin))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                m_hlBegin.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Parent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#aff46daf3ae769ee29075c93ddd29c841">ObservePrimitive</a>(m_hlBegin, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;Path refining and post-processing&quot;</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            IMyNavigationGroup prevGroup = null;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordtype">int</span> groupStart = 0;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordtype">int</span> groupEnd = 0;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a> prevBegin = <span class="keywordflow">default</span>(<a class="code" href="namespace_vector3.html">Vector3</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a> prevEnd = <span class="keywordflow">default</span>(<a class="code" href="namespace_vector3.html">Vector3</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a>; ++i)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                var primitive = path[i].Vertex as MyNavigationPrimitive;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                var group = primitive.Group;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                <span class="keywordflow">if</span> (prevGroup == null)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    prevGroup = group;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    prevBegin = prevGroup.GlobalToLocal(begin);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="keywordtype">bool</span> lastPrimitive = i == path.<a class="code" href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">Count</a> - 1;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">if</span> (group != prevGroup)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    groupEnd = i - 1;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    prevEnd = prevGroup.GlobalToLocal(primitive.WorldPosition);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastPrimitive)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    groupEnd = i;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    prevEnd = prevGroup.GlobalToLocal(end);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordtype">int</span> refinedBegin = m_expandedPath.Count;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                prevGroup.RefinePath(path, m_expandedPath, ref prevBegin, ref prevEnd, groupStart, groupEnd);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="keywordtype">int</span> refinedEnd = m_expandedPath.Count;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = refinedBegin; j &lt; refinedEnd; ++j)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <a class="code" href="namespace_vector3_d.html">Vector3D</a> position = <span class="keyword">new</span> <a class="code" href="_my_camera_8cs.html#afeb956ae9f85b0c1c7f8d5ce4a07b8e5">Vector3D</a>(m_expandedPath[j]);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    position = prevGroup.LocalToGlobal(position);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    m_expandedPath[j] = <span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_vector4_d.html">Vector4D</a>(position, m_expandedPath[j].W);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">if</span> (lastPrimitive &amp;&amp; group != prevGroup)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                    m_expandedPath.Add(<span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_vector4_d.html">Vector4D</a>(primitive.WorldPosition, m_expandedPath[refinedEnd - 1].W));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                prevGroup = group;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                groupStart = i;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordflow">if</span> (m_expandedPath.Count != 0)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    prevBegin = group.GlobalToLocal(<span class="keyword">new</span> <a class="code" href="_my_camera_8cs.html#afeb956ae9f85b0c1c7f8d5ce4a07b8e5">Vector3D</a>(m_expandedPath[m_expandedPath.Count - 1]));</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            m_pathNodePosition++;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="comment">//m_expandedPath.RemoveAt(0);</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            m_expandedPathPosition = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ClearPathNodes()</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">foreach</span> (var pathNode <span class="keywordflow">in</span> m_pathNodes)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">if</span> (pathNode == m_hlBegin) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                pathNode.Parent.StopObservingPrimitive(pathNode, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            m_pathNodes.Clear();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            m_pathNodePosition = 0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ClearFirstPathNode()</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">foreach</span> (var pathNode <span class="keywordflow">in</span> m_pathNodes)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="keywordflow">if</span> (pathNode == m_hlBegin) <span class="keywordflow">break</span>; ;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                pathNode.Parent.StopObservingPrimitive(pathNode, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            m_pathNodes.RemoveAt(0);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            m_pathNodePosition--;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#aea00d1e36df0be71dcb394b98c20aba5">  510</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#aea00d1e36df0be71dcb394b98c20aba5">DebugDraw</a>()</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            var matrix = <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_world.html">World</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">MySector</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">MainCamera</a>.ViewMatrix;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="namespace_vector3_d.html">Vector3D</a>? prevPosition = null;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">foreach</span> (var node <span class="keywordflow">in</span> m_pathNodes)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <a class="code" href="namespace_vector3_d.html">Vector3D</a> down = <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_game_systems.html">GameSystems</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html">MyGravityProviderSystem</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html#a1a3a027909282ae68f3e5a8886317ac8">CalculateTotalGravityInPoint</a>(node.WorldPosition);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_vector3_d.html">Vector3D</a>.IsZero(down, 0.001)) down = <a class="code" href="namespace_vector3_d.html">Vector3D</a>.Down;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                down.<a class="code" href="struct_v_rage_math_1_1_vector3_d.html#a3b0d757665dc587b630b4cc982e25f2b">Normalize</a>();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <a class="code" href="namespace_vector3_d.html">Vector3D</a> position = node.WorldPosition + down * -10.0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(position, 1.0f, <a class="code" href="namespace_color.html">Color</a>.IndianRed, 1.0f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawLine3D(node.WorldPosition, position, <a class="code" href="namespace_color.html">Color</a>.IndianRed, <a class="code" href="namespace_color.html">Color</a>.IndianRed, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="keywordflow">if</span> (prevPosition.HasValue)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawLine3D(position, prevPosition.Value, <a class="code" href="namespace_color.html">Color</a>.IndianRed, <a class="code" href="namespace_color.html">Color</a>.IndianRed, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                prevPosition = position;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="comment">/*if (m_hlEnd != null)</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">            {</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">                Vector3D position = m_hlEnd.WorldPosition + new Vector3D(0.0f, 10.0f, 0.0f);</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">                MyRenderProxy.DebugDrawSphere(position, 1.0f, Color.Crimson, 1.0f, false);</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">                MyRenderProxy.DebugDrawLine3D(m_hlEnd.WorldPosition, position, Color.Crimson, Color.Crimson, false);</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">            }*/</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(m_startPoint, 0.5f, <a class="code" href="namespace_color.html">Color</a>.HotPink, 1.0f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="comment">/*MyRenderProxy.DebugDrawSphere(m_endPoint, 0.5f, Color.HotPink, 1.0f, false);</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">            MyRenderProxy.DebugDrawLine3D(m_startPoint, m_endPoint, Color.HotPink, Color.HotPink, false);*/</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">if</span> (m_goal != null)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                m_goal.<a class="code" href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a0a578063ebf6bbc588862fd82ff8e84b">DebugDraw</a>();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">if</span> (MyFakes.DEBUG_DRAW_FOUND_PATH)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <a class="code" href="namespace_vector3_d.html">Vector3D</a>? prevPoint = null;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_expandedPath.Count; ++i)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    <a class="code" href="namespace_vector3_d.html">Vector3D</a> point = <span class="keyword">new</span> <a class="code" href="_my_camera_8cs.html#afeb956ae9f85b0c1c7f8d5ce4a07b8e5">Vector3D</a>(m_expandedPath[i]);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <span class="keywordtype">float</span> radius = (float)m_expandedPath[i].W;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                    <a class="code" href="namespace_color.html">Color</a> col = i == m_expandedPath.Count - 1 ? <a class="code" href="namespace_color.html">Color</a>.OrangeRed : <a class="code" href="namespace_color.html">Color</a>.Orange;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <span class="comment">//VRageRender.MyRenderProxy.DebugDrawSphere(point, radius, col, 1.0f, false);</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawPoint(point, col, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawText3D(point + matrix.<a class="code" href="struct_v_rage_math_1_1_vector3_d.html#aae4d6aaa1e4479fc9bc80cef7b9b6739">Right</a> * 0.1f, radius.<a class="code" href="struct_v_rage_math_1_1_vector3_d.html#ad89f2c79269b2759553799e1233e849d">ToString</a>(), col, 0.7f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    <span class="keywordflow">if</span> (prevPoint.HasValue)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawLine3D(prevPoint.Value, point, <a class="code" href="namespace_color.html">Color</a>.Pink, <a class="code" href="namespace_color.html">Color</a>.Pink, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    prevPoint = point;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="ttc" id="namespace_system_1_1_text_html"><div class="ttname"><a href="namespace_system_1_1_text.html">System.Text</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_graphics_2_string_builder_extensions_8cs_source.html#l00008">StringBuilderExtensions.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_game.html">Sandbox.Game</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive.html">Sandbox.Game.AI.Pathfinding.MyNavigationPrimitive</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_navigation_primitive_8cs_source.html#l00012">MyNavigationPrimitive.cs:12</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_world_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_world.html">Sandbox.Game.World</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_build_component_base_8cs_source.html#l00022">MyBuildComponentBase.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a4603f76ac68ac59353ab40c147270a1f"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a4603f76ac68ac59353ab40c147270a1f">Sandbox.Game.AI.Pathfinding.MySmartGoal.Invalidate</a></div><div class="ttdeci">void Invalidate()</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00087">MySmartGoal.cs:87</a></div></div>
<div class="ttc" id="namespace_system_1_1_linq_html"><div class="ttname"><a href="namespace_system_1_1_linq.html">System.Linq</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_1_1_generic_html"><div class="ttname"><a href="namespace_system_1_1_collections_1_1_generic.html">System.Collections.Generic</a></div><div class="ttdef"><b>Definition:</b> <a href="_dictionary_extensions_8cs_source.html#l00007">DictionaryExtensions.cs:7</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_collections_html"><div class="ttname"><a href="namespace_v_rage_1_1_collections.html">VRage.Collections</a></div><div class="ttdef"><b>Definition:</b> <a href="_caching_dictionary_8cs_source.html#l00007">CachingDictionary.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html">Sandbox.Game.AI.Pathfinding.MyHighLevelPrimitive</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_high_level_primitive_8cs_source.html#l00011">MyHighLevelPrimitive.cs:11</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a22758e5b02c6e39eaf7e40195d7c7703"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a22758e5b02c6e39eaf7e40195d7c7703">Sandbox.Game.AI.Pathfinding.MySmartGoal.Destination</a></div><div class="ttdeci">IMyDestinationShape Destination</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00036">MySmartGoal.cs:36</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine.html">Sandbox.Engine</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_a785cf6aa4bf47b069885a000016df070"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a785cf6aa4bf47b069885a000016df070">Sandbox.Game.AI.Pathfinding.MySmartPath.Invalidate</a></div><div class="ttdeci">void Invalidate()</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00219">MySmartPath.cs:219</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html">Sandbox.Game.AI.Pathfinding.MySmartGoal</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00015">MySmartGoal.cs:15</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html_ae840d3864e36153d6f5013c7a0403dcf"><div class="ttname"><a href="namespace_v_rage_1_1_game.html#ae840d3864e36153d6f5013c7a0403dcf">VRage.Game.Game</a></div><div class="ttdeci">Game</div><div class="ttdef"><b>Definition:</b> <a href="_game_relation_attribute_8cs_source.html#l00005">GameRelationAttribute.cs:5</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html_aab10c218bf918dd38cee1a70f9d921da"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html#aab10c218bf918dd38cee1a70f9d921da">Sandbox.MySandboxGame.TotalGamePlayTimeInMilliseconds</a></div><div class="ttdeci">static int TotalGamePlayTimeInMilliseconds</div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00144">MySandboxGame.cs:144</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape_html_a1308fb38c7ee1c841201c1adb955ea50"><div class="ttname"><a href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape.html#a1308fb38c7ee1c841201c1adb955ea50">Sandbox.Game.AI.Pathfinding.IMyDestinationShape.GetBestPoint</a></div><div class="ttdeci">Vector3D GetBestPoint(Vector3D queryPoint)</div><div class="ttdoc">Returns the ideal point towards the pathfinding should steer when starting from the query point...</div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_v_rage_render_1_1_my_render_proxy_html"><div class="ttname"><a href="class_v_rage_render_1_1_my_render_proxy.html">VRageRender.MyRenderProxy</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_render_proxy_8cs_source.html#l00035">MyRenderProxy.cs:35</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a6259d324c19980c33a6be5bf4f56fc86"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a6259d324c19980c33a6be5bf4f56fc86">Sandbox.Game.AI.Pathfinding.MySmartGoal.EndEntity</a></div><div class="ttdeci">MyEntity EndEntity</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00044">MySmartGoal.cs:44</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a19c6e2bf97408798fd2001a926ee0a5f"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a19c6e2bf97408798fd2001a926ee0a5f">Sandbox.Game.AI.Pathfinding.MySmartGoal.PathfindingHeuristic</a></div><div class="ttdeci">Func&lt; MyNavigationPrimitive, float &gt; PathfindingHeuristic</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00052">MySmartGoal.cs:52</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector4_d_html"><div class="ttname"><a href="struct_v_rage_math_1_1_vector4_d.html">VRageMath.Vector4D</a></div><div class="ttdoc">Defines a vector with four components. </div><div class="ttdef"><b>Definition:</b> <a href="_vector4_d_8cs_source.html#l00010">Vector4D.cs:10</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_gui_html_a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Sandbox.Game.Gui.Debug</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_algorithms_html"><div class="ttname"><a href="namespace_v_rage_1_1_algorithms.html">VRage.Algorithms</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_path_edge_8cs_source.html#l00006">IMyPathEdge.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a094b291c3e92755bf938ac4f217da6fc"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a094b291c3e92755bf938ac4f217da6fc">Sandbox.Game.AI.Pathfinding.MySmartGoal.IsValid</a></div><div class="ttdeci">bool IsValid</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00067">MySmartGoal.cs:67</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_sector_html_ab7bed02f70ba0a5517fe75c3489038f5"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html#ab7bed02f70ba0a5517fe75c3489038f5">Sandbox.Game.World.MySector.MainCamera</a></div><div class="ttdeci">static MyCamera MainCamera</div><div class="ttdef"><b>Definition:</b> <a href="_my_sector_8cs_source.html#l00113">MySector.cs:113</a></div></div>
<div class="ttc" id="_my_gui_skin_definition_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">using System</div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_skin_definition_8cs_source.html#l00001">MyGuiSkinDefinition.cs:1</a></div></div>
<div class="ttc" id="namespace_color_html"><div class="ttname"><a href="namespace_color.html">Color</a></div></div>
<div class="ttc" id="namespace_vector3_d_html"><div class="ttname"><a href="namespace_vector3_d.html">Vector3D</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_a9c292caba5fa87301440afe6861d62bd"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a9c292caba5fa87301440afe6861d62bd">Sandbox.Game.AI.Pathfinding.MySmartPath.Init</a></div><div class="ttdeci">void Init(Vector3D start, MySmartGoal goal)</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00086">MySmartPath.cs:86</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a0a578063ebf6bbc588862fd82ff8e84b"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a0a578063ebf6bbc588862fd82ff8e84b">Sandbox.Game.AI.Pathfinding.MySmartGoal.DebugDraw</a></div><div class="ttdeci">void DebugDraw()</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00199">MySmartGoal.cs:199</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html">Sandbox.Game.AI.Pathfinding.MySmartPath</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00017">MySmartPath.cs:17</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_ae70bb80b3b187ef5dd3bf359f85bc391"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#ae70bb80b3b187ef5dd3bf359f85bc391">Sandbox.Game.AI.Pathfinding.MySmartPath.MySmartPath</a></div><div class="ttdeci">MySmartPath(MyPathfinding pathfinding)</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00079">MySmartPath.cs:79</a></div></div>
<div class="ttc" id="class_sandbox_1_1_my_sandbox_game_html"><div class="ttname"><a href="class_sandbox_1_1_my_sandbox_game.html">Sandbox.MySandboxGame</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sandbox_game_8cs_source.html#l00074">MySandboxGame.cs:74</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html"><div class="ttname"><a href="namespace_v_rage_1_1_game.html">VRage.Game</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_path_html"><div class="ttname"><a href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_path.html">Sandbox.Game.AI.Pathfinding.IMyPath</a></div><div class="ttdoc">An interface for describing a path for an agent It can be used by the bot navigation to steer the bot...</div><div class="ttdef"><b>Definition:</b> <a href="_i_my_path_8cs_source.html#l00016">IMyPath.cs:16</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_d_html_ad89f2c79269b2759553799e1233e849d"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_d.html#ad89f2c79269b2759553799e1233e849d">VRageMath.Vector3D.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdoc">Retrieves a string representation of the current object. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_d_8cs_source.html#l00475">Vector3D.cs:475</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding.html">Sandbox.Game.AI.Pathfinding.MyPathfinding</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_pathfinding_8cs_source.html#l00020">MyPathfinding.cs:20</a></div></div>
<div class="ttc" id="_my_camera_8cs_html_afeb956ae9f85b0c1c7f8d5ce4a07b8e5"><div class="ttname"><a href="_my_camera_8cs.html#afeb956ae9f85b0c1c7f8d5ce4a07b8e5">Vector3D</a></div><div class="ttdeci">VRageMath.Vector3D Vector3D</div><div class="ttdef"><b>Definition:</b> <a href="_my_camera_8cs_source.html#l00008">MyCamera.cs:8</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_d_html_aae4d6aaa1e4479fc9bc80cef7b9b6739"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_d.html#aae4d6aaa1e4479fc9bc80cef7b9b6739">VRageMath.Vector3D.Right</a></div><div class="ttdeci">static Vector3D Right</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_d_8cs_source.html#l00025">Vector3D.cs:25</a></div></div>
<div class="ttc" id="class_v_rage_1_1_algorithms_1_1_my_path_html_aa77436c9936e619e51bc4f8e1543fa7b"><div class="ttname"><a href="class_v_rage_1_1_algorithms_1_1_my_path.html#aa77436c9936e619e51bc4f8e1543fa7b">VRage.Algorithms.MyPath.Count</a></div><div class="ttdeci">int Count</div><div class="ttdef"><b>Definition:</b> <a href="_my_path_8cs_source.html#l00020">MyPath.cs:20</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_d_html_a3b0d757665dc587b630b4cc982e25f2b"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_d.html#a3b0d757665dc587b630b4cc982e25f2b">VRageMath.Vector3D.Normalize</a></div><div class="ttdeci">double Normalize()</div><div class="ttdoc">Turns the current vector into a unit vector. The result is a vector one unit in length pointing in th...</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_d_8cs_source.html#l00807">Vector3D.cs:807</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_ad200eddfe0111b9518afdc7f18162c06"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#ad200eddfe0111b9518afdc7f18162c06">Sandbox.Game.AI.Pathfinding.MySmartGoal.TerminationCriterion</a></div><div class="ttdeci">Func&lt; MyNavigationPrimitive, float &gt; TerminationCriterion</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00060">MySmartGoal.cs:60</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a19989a4e24750a795110d7543b106acc"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a19989a4e24750a795110d7543b106acc">Sandbox.Game.AI.Pathfinding.MySmartGoal.IgnoreHighLevel</a></div><div class="ttdeci">void IgnoreHighLevel(MyHighLevelPrimitive primitive)</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00133">MySmartGoal.cs:133</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_high_level_primitive_observer_html"><div class="ttname"><a href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_high_level_primitive_observer.html">Sandbox.Game.AI.Pathfinding.IMyHighLevelPrimitiveObserver</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_high_level_primitive_observer_8cs_source.html#l00008">IMyHighLevelPrimitiveObserver.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_aea00d1e36df0be71dcb394b98c20aba5"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#aea00d1e36df0be71dcb394b98c20aba5">Sandbox.Game.AI.Pathfinding.MySmartPath.DebugDraw</a></div><div class="ttdeci">void DebugDraw()</div><div class="ttdoc">Gets called every frame for the purposes of debug draw </div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00510">MySmartPath.cs:510</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive_html_a0064c2c93859793cd1aaefeaea7d3c3d"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_navigation_primitive.html#a0064c2c93859793cd1aaefeaea7d3c3d">Sandbox.Game.AI.Pathfinding.MyNavigationPrimitive.GetHighLevelPrimitive</a></div><div class="ttdeci">abstract MyHighLevelPrimitive GetHighLevelPrimitive()</div></div>
<div class="ttc" id="namespace_my_render_proxy_html"><div class="ttname"><a href="namespace_my_render_proxy.html">MyRenderProxy</a></div></div>
<div class="ttc" id="class_v_rage_1_1_algorithms_1_1_my_path_html"><div class="ttname"><a href="class_v_rage_1_1_algorithms_1_1_my_path.html">VRage.Algorithms.MyPath</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_path_8cs_source.html#l00009">MyPath.cs:9</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_mod_a_p_i_html"><div class="ttname"><a href="namespace_v_rage_1_1_mod_a_p_i.html">VRage.ModAPI</a></div><div class="ttdef"><b>Definition:</b> <a href="_input_2_mod_a_p_i_2_i_my_control_8cs_source.html#l00008">IMyControl.cs:8</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape_html"><div class="ttname"><a href="interface_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_i_my_destination_shape.html">Sandbox.Game.AI.Pathfinding.IMyDestinationShape</a></div><div class="ttdoc">A shape describing the destination of a pathfinding query. It is abstracted like this, so that the destination for an agent can be anything from a simple point to the space inside a building or a perimeter around an object. </div><div class="ttdef"><b>Definition:</b> <a href="_i_my_destination_shape_8cs_source.html#l00013">IMyDestinationShape.cs:13</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector4_d_html_a9a3213a71f46bdc17e6a17a1d95601cd"><div class="ttname"><a href="struct_v_rage_math_1_1_vector4_d.html#a9a3213a71f46bdc17e6a17a1d95601cd">VRageMath.Vector4D.W</a></div><div class="ttdeci">double W</div><div class="ttdoc">Gets or sets the w-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector4_d_8cs_source.html#l00037">Vector4D.cs:37</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_profiler_html"><div class="ttname"><a href="namespace_v_rage_1_1_profiler.html">VRage.Profiler</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_draw_area_8cs_source.html#l00003">MyDrawArea.cs:3</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_game_systems_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_game_systems.html">Sandbox.Game.GameSystems</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_thrust_component_8cs_source.html#l00020">MyEntityThrustComponent.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a0cb6d1882945f65e41ca62145ee0ba27"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a0cb6d1882945f65e41ca62145ee0ba27">Sandbox.Game.AI.Pathfinding.MySmartGoal.Reinit</a></div><div class="ttdeci">void Reinit()</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00108">MySmartGoal.cs:108</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html"><div class="ttname"><a href="namespace_v_rage_math.html">VRageMath</a></div><div class="ttdef"><b>Definition:</b> <a href="_base27_directions_8cs_source.html#l00007">Base27Directions.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_sector_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_sector.html">Sandbox.Game.World.MySector</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sector_8cs_source.html#l00084">MySector.cs:84</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities.html">Sandbox.Game.Entities</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity3_d_sound_emitter_8cs_source.html#l00018">MyEntity3DSoundEmitter.cs:18</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system_html_a1a3a027909282ae68f3e5a8886317ac8"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html#a1a3a027909282ae68f3e5a8886317ac8">Sandbox.Game.GameSystems.MyGravityProviderSystem.CalculateTotalGravityInPoint</a></div><div class="ttdeci">static Vector3 CalculateTotalGravityInPoint(Vector3D worldPoint)</div><div class="ttdef"><b>Definition:</b> <a href="_my_gravity_provider_system_8cs_source.html#l00023">MyGravityProviderSystem.cs:23</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_aa5df1f855ab64e7df501d4452815f12c"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#aa5df1f855ab64e7df501d4452815f12c">Sandbox.Game.AI.Pathfinding.MySmartGoal.FindHighLevelPath</a></div><div class="ttdeci">MyPath&lt; MyNavigationPrimitive &gt; FindHighLevelPath(MyPathfinding pathfinding, MyHighLevelPrimitive startPrimitive)</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00118">MySmartGoal.cs:118</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_html"><div class="ttname"><a href="namespace_system_1_1_collections.html">System.Collections</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive_html_a4b6340b409b7e515648277d2f74708b1"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_primitive.html#a4b6340b409b7e515648277d2f74708b1">Sandbox.Game.AI.Pathfinding.MyHighLevelPrimitive.Parent</a></div><div class="ttdeci">MyHighLevelGroup Parent</div><div class="ttdef"><b>Definition:</b> <a href="_my_high_level_primitive_8cs_source.html#l00036">MyHighLevelPrimitive.cs:36</a></div></div>
<div class="ttc" id="namespace_v_rage_render_html"><div class="ttname"><a href="namespace_v_rage_render.html">VRageRender</a></div></div>
<div class="ttc" id="class_v_rage_1_1_algorithms_1_1_my_path_finding_system_html_a1a7923d67535d6f2ee356cb80b8bb092"><div class="ttname"><a href="class_v_rage_1_1_algorithms_1_1_my_path_finding_system.html#a1a7923d67535d6f2ee356cb80b8bb092">VRage.Algorithms.MyPathFindingSystem.FindPath</a></div><div class="ttdeci">MyPath&lt; V &gt; FindPath(V start, V end, Predicate&lt; V &gt; vertexTraversable=null, Predicate&lt; IMyPathEdge&lt; V &gt;&gt; edgeTraversable=null)</div><div class="ttdef"><b>Definition:</b> <a href="_my_path_finding_system_8cs_source.html#l00140">MyPathFindingSystem.cs:140</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_a51595967e7d43d74ffb560c8fd9de272"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a51595967e7d43d74ffb560c8fd9de272">Sandbox.Game.AI.Pathfinding.MySmartPath.Reinit</a></div><div class="ttdeci">void Reinit(Vector3D newStart)</div><div class="ttdoc">Reinitializes the path, starting from the given position. The target stays the same. The purpose of this is to try to move towards the goal again if PathCompleted returns true, but the target moved while going towards it. </div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00133">MySmartPath.cs:133</a></div></div>
<div class="ttc" id="namespace_sandbox_html"><div class="ttname"><a href="namespace_sandbox.html">Sandbox</a></div></div>
<div class="ttc" id="namespace_v_rage_html"><div class="ttname"><a href="namespace_v_rage.html">VRage</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path_html_a0d341458a01478ff38c84469bad76048"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_path.html#a0d341458a01478ff38c84469bad76048">Sandbox.Game.AI.Pathfinding.MySmartPath.GetNextTarget</a></div><div class="ttdeci">bool GetNextTarget(Vector3D currentPosition, out Vector3D targetWorld, out float radius, out IMyEntity relativeEntity)</div><div class="ttdoc">Returns the next target along the path, provided that the agent is currently on the given position ...</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_path_8cs_source.html#l00156">MySmartPath.cs:156</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html">Sandbox.Game.GameSystems.MyGravityProviderSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_gravity_provider_system_8cs_source.html#l00010">MyGravityProviderSystem.cs:10</a></div></div>
<div class="ttc" id="namespace_vector3_html"><div class="ttname"><a href="namespace_vector3.html">Vector3</a></div></div>
<div class="ttc" id="namespace_i_my_entity_html"><div class="ttname"><a href="namespace_i_my_entity.html">IMyEntity</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_entity_html"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_entity.html">VRage.Game.Entity</a></div><div class="ttdef"><b>Definition:</b> <a href="_debug_created_by_8cs_source.html#l00001">DebugCreatedBy.cs:1</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_utils_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_utils.html">Sandbox.Engine.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_battle_helper_8cs_source.html#l00014">MyBattleHelper.cs:14</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal_html_a286aabd354431a612717d590a65846aa"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_smart_goal.html#a286aabd354431a612717d590a65846aa">Sandbox.Game.AI.Pathfinding.MySmartGoal.ShouldReinitPath</a></div><div class="ttdeci">bool ShouldReinitPath()</div><div class="ttdef"><b>Definition:</b> <a href="_my_smart_goal_8cs_source.html#l00103">MySmartGoal.cs:103</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding_html_a773867967439795f5e6bcba4d42df1d0"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_pathfinding.html#a773867967439795f5e6bcba4d42df1d0">Sandbox.Game.AI.Pathfinding.MyPathfinding.FindClosestPrimitive</a></div><div class="ttdeci">MyNavigationPrimitive FindClosestPrimitive(Vector3D point, bool highLevel, MyEntity entity=null)</div><div class="ttdef"><b>Definition:</b> <a href="_my_pathfinding_8cs_source.html#l00191">MyPathfinding.cs:191</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group_html_a63d8a75d56b5f08cc1440f3b5d066e8b"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#a63d8a75d56b5f08cc1440f3b5d066e8b">Sandbox.Game.AI.Pathfinding.MyHighLevelGroup.StopObservingPrimitive</a></div><div class="ttdeci">void StopObservingPrimitive(MyHighLevelPrimitive primitive, IMyHighLevelPrimitiveObserver observer)</div><div class="ttdef"><b>Definition:</b> <a href="_my_high_level_group_8cs_source.html#l00203">MyHighLevelGroup.cs:203</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group_html_aff46daf3ae769ee29075c93ddd29c841"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_a_i_1_1_pathfinding_1_1_my_high_level_group.html#aff46daf3ae769ee29075c93ddd29c841">Sandbox.Game.AI.Pathfinding.MyHighLevelGroup.ObservePrimitive</a></div><div class="ttdeci">void ObservePrimitive(MyHighLevelPrimitive primitive, IMyHighLevelPrimitiveObserver observer)</div><div class="ttdef"><b>Definition:</b> <a href="_my_high_level_group_8cs_source.html#l00186">MyHighLevelGroup.cs:186</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 23 2017 01:16:22 for Space Engineers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
