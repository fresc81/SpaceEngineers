<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Space Engineers: Sources/Sandbox.Game/Engine/Voxels/Planet/MyPlanetMaterialProvider.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Space Engineers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="dir_adcb7f0194fb5944415bcd7197787778.html">Sandbox.Game</a></li><li class="navelem"><a class="el" href="dir_38662c1c33bdf59b0e10164ceae4015b.html">Engine</a></li><li class="navelem"><a class="el" href="dir_3cf9bc50c9abd7c4555a7ac73a5c5da9.html">Voxels</a></li><li class="navelem"><a class="el" href="dir_d3b439163c9636733a982a4b05b1f00b.html">Planet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MyPlanetMaterialProvider.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_my_planet_material_provider_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_definitions.html">Definitions</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_game_systems.html">GameSystems</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_collections.html">Collections</a>.<a class="code" href="namespace_system_1_1_collections_1_1_generic.html">Generic</a>;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_profiler.html">Profiler</a>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_voxels.html">Voxels</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_sandbox.html">Sandbox</a>.Engine.Voxels</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html">   14</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">partial class </span><a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html">MyPlanetMaterialProvider</a></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">        #region Material Data Structures</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        unsafe <span class="keyword">struct </span>MapBlendCache</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            <span class="keyword">public</span> <a class="code" href="struct_v_rage_math_1_1_vector2_i.html">Vector2I</a> Cell;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            <span class="keyword">public</span> fixed ushort Data[4];</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            <span class="keyword">public</span> byte Face;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">int</span> HashCode;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        }</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html">   26</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">struct </span><a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html">PlanetOre</a></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        {</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a80f1263ca16fc8e4472cbebb97b7f06f">   28</a></span>&#160;            <span class="keyword">public</span> byte <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a80f1263ca16fc8e4472cbebb97b7f06f">Value</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad800845007ebb813dd465baf4dcb96ff">   29</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad800845007ebb813dd465baf4dcb96ff">Depth</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a75460ba68d8d1119d18f13205a5f7f14">   30</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a75460ba68d8d1119d18f13205a5f7f14">Start</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#acef4d70337e82cf9442ce5ec0803e687">   31</a></span>&#160;            <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#acef4d70337e82cf9442ce5ec0803e687">Material</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad62f89a22d5b8dc47d9d9093226c7899">   33</a></span>&#160;            <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad62f89a22d5b8dc47d9d9093226c7899">ToString</a>()</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                <span class="keywordflow">if</span> (Material == null)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                    <span class="keywordflow">return</span> String.Format(<span class="stringliteral">&quot;{0}({1}:{2}; {3})&quot;</span>, Material.<a class="code" href="class_v_rage_1_1_game_1_1_my_definition_base.html#a2f57e2783d41474baa1ac57a4112006c">Id</a>.<a class="code" href="struct_v_rage_1_1_game_1_1_my_definition_id.html#a5880eb9e5f2ed086691941ff343844b3">SubtypeName</a>, Start, Depth, Value);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordtype">int</span> m_mapResolutionMinusOne;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html">MyPlanetShapeProvider</a> m_planetShape;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        Dictionary&lt;byte, PlanetMaterial&gt; m_materials = null;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        Dictionary&lt;byte, PlanetBiome&gt; m_biomes = null;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        Dictionary&lt;byte, PlanetOre&gt; m_ores = null;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        PlanetMaterial m_defaultMaterial = null;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        PlanetMaterial m_subsurfaceMaterial = null;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="comment">// Materials</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">MyCubemap</a> m_materialMap;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// Biomes</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">MyCubemap</a> m_biomeMap;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="comment">// Ore Deposits</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">MyCubemap</a> m_oreMap;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">// Occlusion</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">MyCubemap</a> m_occlusionMap;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture.html">MyTileTexture&lt;byte&gt;</a> m_blendingTileset;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html">MyPlanetGeneratorDefinition</a> m_generator;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordtype">float</span> m_invHeightRange;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordtype">float</span> m_heightmapScale;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> m_biomePixelSize;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> m_hasRules;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> m_hashCode;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">// List of range reduced rules for biomes.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        [ThreadStatic]</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> List&lt;PlanetMaterialRule&gt;[] m_rangeBiomes = null;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        [ThreadStatic]</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> m_rangeClean = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        [ThreadStatic]</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html">MyPlanetMaterialProvider</a> m_providerForRules = null;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a305aeca489456b8345c6cc87a910d333">   89</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> Closed { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a70a958f2d5014f8d30f5dfc007272c24">   91</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a70a958f2d5014f8d30f5dfc007272c24">MyPlanetMaterialProvider</a>(<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html">MyPlanetGeneratorDefinition</a> generatorDef, <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html">MyPlanetShapeProvider</a> planetShape)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            m_materials = <span class="keyword">new</span> Dictionary&lt;byte, PlanetMaterial&gt;(generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#ab31ba832d7178d163dca348208b0bce6">SurfaceMaterialTable</a>.Length);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#ab31ba832d7178d163dca348208b0bce6">SurfaceMaterialTable</a>.Length; ++i)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                byte materialValue = (byte)generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#ab31ba832d7178d163dca348208b0bce6">SurfaceMaterialTable</a>[i].Value;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                m_materials[materialValue] = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a>(generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#ab31ba832d7178d163dca348208b0bce6">SurfaceMaterialTable</a>[i]);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            m_defaultMaterial = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a>(generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adc8b8810a5b1b8e490819a48b694df90">DefaultSurfaceMaterial</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">if</span> (generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a7a97313d49c6f62bb5616f9296204935">DefaultSubSurfaceMaterial</a> != null)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                m_subsurfaceMaterial = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a>(generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a7a97313d49c6f62bb5616f9296204935">DefaultSubSurfaceMaterial</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                m_subsurfaceMaterial = m_defaultMaterial;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            m_planetShape = planetShape;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">MyCubemap</a>[] maps;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html">MyHeightMapLoadingSystem</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a56dcd3653f96d1210ed4fe3569298082">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a0af48eec25daf139a59acba8b6999da0">GetPlanetMaps</a>(generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a304e8fda73771fcb2e245ee8490e2dd2">FolderName</a>, generatorDef.<a class="code" href="class_v_rage_1_1_game_1_1_my_definition_base.html#aaba988a4a4d7b7e33550b751c607d56d">Context</a>, generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a15c20fe1b309288dc755b78070f98b79">PlanetMaps</a>, out maps);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            m_materialMap = maps[0];</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            m_biomeMap = maps[1];</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            m_oreMap = maps[2];</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            m_occlusionMap = maps[3];</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">if</span> (m_biomeMap != null)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                m_mapResolutionMinusOne = m_biomeMap.Resolution - 1;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            m_generator = generatorDef;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            m_invHeightRange = 1 / (m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#afa0f43170006ce2fa3f930715b26d93b">MaxHillHeight</a> - m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ae66a414e702b7206b3e9334dc41c7eed">MinHillHeight</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            m_biomePixelSize = (float)((planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#afa0f43170006ce2fa3f930715b26d93b">MaxHillHeight</a> + planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#a0f6766c337793dc3702d5f9ad26da73b">Radius</a>) * <a class="code" href="namespace_math.html">Math</a>.PI) / ((<span class="keywordtype">float</span>)(m_mapResolutionMinusOne + 1) * 2);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            m_hashCode = generatorDef.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a304e8fda73771fcb2e245ee8490e2dd2">FolderName</a>.GetHashCode();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="comment">// Material groups</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (m_generator.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adbff61666e4441782260e68c0f3160b4">MaterialGroups</a> != null &amp;&amp; m_generator.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adbff61666e4441782260e68c0f3160b4">MaterialGroups</a>.Length &gt; 0)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                m_biomes = <span class="keyword">new</span> Dictionary&lt;byte, PlanetBiome&gt;();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="keywordflow">foreach</span> (var group <span class="keywordflow">in</span> m_generator.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adbff61666e4441782260e68c0f3160b4">MaterialGroups</a>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    m_biomes.Add(group.Value, <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_biome.html">PlanetBiome</a>(group));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            m_blendingTileset = <a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html">MyHeightMapLoadingSystem</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a56dcd3653f96d1210ed4fe3569298082">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a0a249db0cfce8a5a2170c956fcf5f1c8">GetTerrainBlendTexture</a>(m_generator.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a532681003b708f2708aac311faf30e95">MaterialBlending</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            m_ores = <span class="keyword">new</span> Dictionary&lt;byte, PlanetOre&gt;();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">foreach</span> (var mapping <span class="keywordflow">in</span> m_generator.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a311f814ee54916e2a1d0fa3ded4f4bab">OreMappings</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                var mat = GetMaterial(mapping.Type);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">if</span> (mat != null)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <span class="keywordflow">if</span> (m_ores.ContainsKey(mapping.Value))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        <span class="keywordtype">string</span> message = String.Format(<span class="stringliteral">&quot;Value {0} is already mapped to another ore.&quot;</span>, mapping.Value);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        Debug.Fail(message);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        <a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html">MyLog</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">Default</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(message);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        m_ores[mapping.Value] = <span class="keyword">new</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html">PlanetOre</a>()</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                            Depth = mapping.Depth,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                            Start = mapping.Start,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            Value = mapping.Value,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                            <a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694ad92a8333dd3ccb895cc65f7455b71206">Material</a> = mat</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                        };</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            Closed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a80551cd10761b1fa4227ff96799cb8b0">  179</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a80551cd10761b1fa4227ff96799cb8b0">Close</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">if</span> (m_providerForRules == <span class="keyword">this</span>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                m_providerForRules = null;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">// Clear to speed up collection</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            m_blendingTileset = null;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            m_subsurfaceMaterial = null;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            m_generator = null;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            m_biomeMap = null;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            m_biomes = null;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            m_materials = null;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            m_planetShape = null;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            m_ores = null;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            m_materialMap = null;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            m_oreMap = null;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            m_biomeMap = null;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            m_occlusionMap = null;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            Closed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keyword">private</span> unsafe <span class="keywordtype">void</span> GetRuleBounds(ref <a class="code" href="namespace_bounding_box.html">BoundingBox</a> request, out <a class="code" href="namespace_bounding_box.html">BoundingBox</a> ruleBounds)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a>* vertices = stackalloc <a class="code" href="namespace_vector3.html">Vector3</a>[8];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            ruleBounds.Min = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a>(<span class="keywordtype">float</span>.PositiveInfinity);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            ruleBounds.Max = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a>(<span class="keywordtype">float</span>.NegativeInfinity);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            request.GetCornersUnsafe(vertices);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordtype">float</span> latitude, longitude;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (Vector3.Zero.IsInsideInclusive(ref request.Min, ref request.Max))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                ruleBounds.Min.X = 0;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                var clamp = Vector3.Clamp(Vector3.Zero, request.Min, request.Max);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                ruleBounds.Min.X = m_planetShape.DistanceToRatio(clamp.Length());</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            { <span class="comment">// Calculate furthest point in BB</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                Vector3 end;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                Vector3 c = request.Center;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">X</a> &lt; 0)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">X</a> = request.Min.X;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">X</a> = request.Max.X;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a> &lt; 0)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a> = request.Min.Y;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a> = request.Max.Y;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">Z</a> &lt; 0)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">Z</a> = request.Min.Z;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">Z</a> = request.Max.Z;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                ruleBounds.Max.X = m_planetShape.DistanceToRatio(end.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">Length</a>());</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">// If box intercepts Y axis (north south axis).</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (request.Min.X &lt; 0 &amp;&amp; request.Min.Z &lt; 0 &amp;&amp; request.Max.X &gt; 0 &amp;&amp; request.Max.Z &gt; 0)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                ruleBounds.Min.Z = -1;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                ruleBounds.Max.Z = 3;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; i++)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <span class="keywordtype">float</span> len = vertices[i].<a class="code" href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">Length</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    latitude = vertices[i].<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a> / len;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Min.Y &gt; latitude) ruleBounds.Min.Y = latitude;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Max.Y &lt; latitude) ruleBounds.Max.Y = latitude;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; i++)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <span class="keywordtype">float</span> len = vertices[i].<a class="code" href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">Length</a>();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    vertices[i] /= len;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    latitude = vertices[i].<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <a class="code" href="namespace_vector2.html">Vector2</a> lon = <span class="keyword">new</span> <a class="code" href="_game_window_form_8cs.html#a4293ddbd89805ff3a31b929fae027318">Vector2</a>(-vertices[i].X, -vertices[i].Z);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    lon.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a131a04fd9bcdefdeb1ef0ba2efa505d0">Normalize</a>();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    longitude = lon.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a15e087e2bcf51768b0ae7a837665bd8b">Y</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <span class="keywordflow">if</span> (lon.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a4f0112b2f169ee65c109ab980e59aabf">X</a> &gt; 0)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                        longitude = 2 - longitude;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Min.Y &gt; latitude) ruleBounds.Min.Y = latitude;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Max.Y &lt; latitude) ruleBounds.Max.Y = latitude;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Min.Z &gt; longitude) ruleBounds.Min.Z = longitude;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    <span class="keywordflow">if</span> (ruleBounds.Max.Z &lt; longitude) ruleBounds.Max.Z = longitude;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a55572a3c1c371d7aab82bf09f2bb7d0d">  287</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a55572a3c1c371d7aab82bf09f2bb7d0d">PrepareRulesForBox</a>(ref <a class="code" href="namespace_bounding_box.html">BoundingBox</a> request)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">if</span> (m_biomes != null)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">if</span> (request.Extents.Sum &gt; 50)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    PrepareRulesForBoxInternal(ref request);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">else</span> CleanRules();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> PrepareRulesForBoxInternal(ref <a class="code" href="namespace_bounding_box.html">BoundingBox</a> request)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">if</span> (m_rangeBiomes == null) m_rangeBiomes = <span class="keyword">new</span> List&lt;PlanetMaterialRule&gt;[256];</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <a class="code" href="namespace_bounding_box.html">BoundingBox</a> box;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            request.Translate(-m_planetShape.Center());</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment">// Inflate so we don&#39;t miss any rules.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            request.Inflate(request.Extents.Length() * .1f);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            GetRuleBounds(ref request, out box);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">foreach</span> (var bio <span class="keywordflow">in</span> m_biomes.Values)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">if</span> (ReferenceEquals(m_rangeBiomes[bio.Value], bio.Rules) || m_rangeBiomes[bio.Value] == null || m_providerForRules != <span class="keyword">this</span>)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    m_rangeBiomes[bio.Value] = <span class="keyword">new</span> List&lt;PlanetMaterialRule&gt;();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                bio.MateriaTree.OverlapAllBoundingBox(ref box, m_rangeBiomes[bio.Value], clear: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            m_rangeClean = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            m_providerForRules = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CleanRules()</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span> (m_rangeBiomes == null) m_rangeBiomes = <span class="keyword">new</span> List&lt;PlanetMaterialRule&gt;[256];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">foreach</span> (var bio <span class="keywordflow">in</span> m_biomes.Values)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                m_rangeBiomes[bio.Value] = bio.Rules;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            m_rangeClean = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            m_providerForRules = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ab1decf91e626f9f8e6e63b1c7b0d54a1">  332</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ab1decf91e626f9f8e6e63b1c7b0d54a1">ReadMaterialRange</a>(ref <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_data_request.html">MyVoxelDataRequest</a> req)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            byte biome;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;MaterialComputation&quot;</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            req.Flags = req.RequestFlags &amp; (<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.SurfaceMaterial | <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.ConsiderContent);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> minInLod = req.minInLod;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> maxInLod = req.maxInLod;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            var target = req.Target;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordtype">float</span> lodVoxelSize = 1 &lt;&lt; req.Lod;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a> usedFlags = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordtype">bool</span> computeOcclusion = req.RequestedData.Requests(<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Occlusion);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">// We don&#39;t bother determining where the surface is if we don&#39;t have the normal.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordtype">bool</span> assignToSurface = req.RequestFlags.HasFlags(<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.SurfaceMaterial);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordtype">bool</span> useContent = req.RequestFlags.HasFlags(<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.ConsiderContent);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="comment">// Prepare coefficient cache</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad64b2c264f0a96c46b0f3173055439ea">PrepareCache</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">// Here we will compute which rules match the requested range and apply those.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (m_biomes != null)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">if</span> (req.SizeLinear &gt; 125)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <a class="code" href="namespace_bounding_box.html">BoundingBox</a> rbox = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a4f6647b688ebe11f9de2f9a037f5850a">BoundingBox</a>((Vector3)minInLod * lodVoxelSize, (Vector3)maxInLod * lodVoxelSize);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    PrepareRulesForBoxInternal(ref rbox);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m_rangeClean || m_providerForRules != <span class="keyword">this</span>)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    CleanRules();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> combinedOffset = -minInLod + req.Offset;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> v = <span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> coords = v;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        var write = v + combinedOffset;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                        var writeLinear = target.ComputeLinear(ref write);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <span class="keywordflow">if</span> ((assignToSurface &amp;&amp; target.Material(writeLinear) != 0)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                            || (useContent &amp;&amp; target.Content(writeLinear) == 0))</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            <span class="keywordflow">if</span> (computeOcclusion)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                            {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                <span class="comment">// Prevent empty voxels from affecting occlusion.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                target.Content(writeLinear, 0);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                            target.Material(writeLinear, MyVoxelConstants.NULL_MATERIAL);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> mat = null;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        byte occlusion = (byte)(computeOcclusion ? 255 : 0); <span class="comment">// flag that we want occlusion.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                        Vector3 localPos = coords * lodVoxelSize;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        mat = GetMaterialForPosition(ref localPos, lodVoxelSize, out biome, ref occlusion);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                        <span class="keywordflow">if</span> (mat == null) mat = <a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html">MyDefinitionManager</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#aa76b8697823951ea5c5ec16092b902ab">Static</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#a687ecc35d97dbeb307033699b9d525ce">GetVoxelMaterialDefinition</a>(0);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        target.Material(writeLinear, mat.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html#a7b1792a1559a41fa03cb519b5ea82fb9">Index</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        <span class="keywordflow">if</span> (computeOcclusion)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                        {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                            target[<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Occlusion][writeLinear] = occlusion;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a72d9a28ebd0c98e84b864a35d06fe9be">  418</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a72d9a28ebd0c98e84b864a35d06fe9be">ReadOcclusion</a>(ref <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_data_request.html">MyVoxelDataRequest</a> req)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;Occlusion Computation&quot;</span>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            req.Flags = req.RequestFlags &amp; (<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.SurfaceMaterial | <a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.ConsiderContent);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> minInLod = req.minInLod;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> maxInLod = req.maxInLod;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            var target = req.Target;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordtype">float</span> lodVoxelSize = 1 &lt;&lt; req.Lod;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="comment">// We don&#39;t bother determining where the surface is if we don&#39;t have the normal.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordtype">bool</span> assignToSurface = req.RequestFlags.HasFlags(<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.SurfaceMaterial) &amp;&amp; req.RequestedData.Requests(<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Material);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordtype">bool</span> useContent = req.RequestFlags.HasFlags(<a class="code" href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">MyVoxelRequestFlags</a>.ConsiderContent);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="comment">// Prepare coefficient cache</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad64b2c264f0a96c46b0f3173055439ea">PrepareCache</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> combinedOffset = -minInLod + req.Offset;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> v = <span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a>();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">Z</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">Y</a>)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    <span class="keywordflow">for</span> (v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a> = minInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>; v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a> &lt;= maxInLod.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>; ++v.<a class="code" href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">X</a>)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        <a class="code" href="struct_v_rage_math_1_1_vector3_i.html">Vector3I</a> coords = v;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        var write = v + combinedOffset;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        var writeLinear = target.ComputeLinear(ref write);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        <span class="keywordflow">if</span> ((assignToSurface &amp;&amp; target.Material(writeLinear) != 0)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                            || (useContent &amp;&amp; target.Content(writeLinear) == 0))</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                            target.Content(writeLinear, 0);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        Vector3 localPos = coords * lodVoxelSize;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                        var occlusion = GetOcclusionForPosition(ref localPos, lodVoxelSize);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        target[<a class="code" href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">MyStorageDataTypeEnum</a>.Occlusion][writeLinear] = occlusion;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> GetMaterial(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> def = <a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html">MyDefinitionManager</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#aa76b8697823951ea5c5ec16092b902ab">Static</a>.<a class="code" href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#a687ecc35d97dbeb307033699b9d525ce">GetVoxelMaterialDefinition</a>(name);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">if</span> (def == null)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <span class="comment">//Debug.Fail(&quot;Could not load voxel material &quot; + name);</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html">MyLog</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">Default</a>.<a class="code" href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">WriteLine</a>(<span class="stringliteral">&quot;Could not load voxel material &quot;</span> + name);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">return</span> def;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keyword">private</span> byte GetOcclusionForPosition(ref Vector3 localPos, <span class="keywordtype">float</span> lodVoxelSize)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordtype">int</span> face;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <a class="code" href="namespace_vector2.html">Vector2</a> texcoord;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            Vector3 localPosition = localPos - m_planetShape.Center();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            var distanceToCenter = localPosition.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">Length</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            MyCubemapHelpers.CalculateSampleTexcoord(ref localPosition, out face, out texcoord);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            Vector3 normal;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordtype">float</span> sampledHeight = m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad92090a6b6c73e7fa88e9413e07ee9d6">GetValueForPositionWithCache</a>(face, ref texcoord, out normal);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            var surfaceDepth = m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad1b9404d3c171439899db328528d5c72">SignedDistanceWithSample</a>(lodVoxelSize, distanceToCenter, sampledHeight) * normal.Z;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keywordflow">if</span> (m_occlusionMap != null &amp;&amp; surfaceDepth &gt; -(lodVoxelSize * 1.5f))</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordflow">if</span> (m_biomePixelSize &lt; lodVoxelSize)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    <span class="keywordflow">return</span> m_occlusionMap[face].GetValue(texcoord.X, texcoord.Y);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    <span class="keywordflow">return</span> ComputeMapBlend(texcoord, face, ref m_occlusionBC,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        m_occlusionMap[face]);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa66da7a82caa2709dd06305ba4dcaf7a">  510</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa66da7a82caa2709dd06305ba4dcaf7a">GetMaterialForPosition</a>(ref Vector3 pos, <span class="keywordtype">float</span> lodSize)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            byte bb, oo = 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">return</span> GetMaterialForPosition(ref pos, lodSize, out bb, ref oo);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ac66850d69173730578371372b211a6c4">  516</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ac66850d69173730578371372b211a6c4">GetMaterialForPosition</a>(ref Vector3 pos, <span class="keywordtype">float</span> lodSize, out byte biomeValue, ref byte occlusion)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            biomeValue = 0;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">MaterialSampleParams</a> ps;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            GetPositionParams(ref pos, lodSize, out ps);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <a class="code" href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">MyVoxelMaterialDefinition</a> def = null;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordtype">float</span> oreDepth = ps.SurfaceDepth / <a class="code" href="namespace_math.html">Math</a>.Max(lodSize * .5f, 1f) + .5f; <span class="comment">// Hack to preserve position for ore detector.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="comment">// Ore depositis from map come first.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">if</span> (m_oreMap != null)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                byte ore = m_oreMap.Faces[ps.Face].GetValue(ps.Texcoord.X, ps.Texcoord.Y);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html">PlanetOre</a> om;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">if</span> (m_ores.TryGetValue(ore, out om))</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    <span class="keywordflow">if</span> (om.Start &lt;= -oreDepth &amp;&amp; om.Start + om.Depth &gt;= -oreDepth)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                        occlusion = 0;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        <span class="keywordflow">return</span> om.<a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#acef4d70337e82cf9442ce5ec0803e687">Material</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a> voxelMaterial = GetLayeredMaterialForPosition(ref ps, out biomeValue, ref occlusion);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="comment">// Extend depth to compensate for lod rounding</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordtype">float</span> voxelDepth = ps.SurfaceDepth / lodSize;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="comment">// Check layers</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">if</span> (voxelMaterial.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html#af8fd01a8ccd3fe3635d872e19314dc79">HasLayers</a>)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                var layers = voxelMaterial.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html#a658454d843c264694c4affd7650ed862">Layers</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; layers.Length; i++)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <span class="keywordflow">if</span> (voxelDepth &gt;= -layers[i].Depth)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        def = voxelMaterial.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html#a658454d843c264694c4affd7650ed862">Layers</a>[i].<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material.html#a79d8a2cd8f0d33cc6348c474fd6185d2">Material</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="comment">// Check single layered</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">if</span> (voxelDepth &gt;= -voxelMaterial.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material.html#a8dceff33e154bee34c0e1750e77f0c34">Depth</a>)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    def = voxelMaterial.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material.html#a79d8a2cd8f0d33cc6348c474fd6185d2">Material</a>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <span class="keywordflow">if</span> (def == null)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                def = m_subsurfaceMaterial.FirstOrDefault;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">return</span> def;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        [ThreadStatic]</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> MapBlendCache m_materialBC;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        [ThreadStatic]</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> MapBlendCache m_occlusionBC;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keyword">private</span> unsafe byte ComputeMapBlend(<a class="code" href="namespace_vector2.html">Vector2</a> coords, <span class="keywordtype">int</span> face, ref MapBlendCache cache, <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html">MyCubemapData&lt;byte&gt;</a> map)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            coords = coords * map.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a2bbd21ad43d9eec57b125dbd6172944f">Resolution</a> - .5f;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <a class="code" href="struct_v_rage_math_1_1_vector2_i.html">Vector2I</a> isample = <span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_vector2_i.html">Vector2I</a>(coords);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">if</span> (cache.HashCode != m_hashCode || cache.Face != face || cache.Cell != isample)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                byte tl, tr, bl, br;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                cache.HashCode = m_hashCode;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                cache.Cell = isample;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                cache.Face = (byte)face;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="comment">// Biome</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="keywordflow">if</span> (m_materialMap != null)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                    map.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a5bcab06853ae1b9a619509ca701e3e9e">GetValue</a>(isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#af748ceced7b11b4254b19e9bdda21160">X</a>, isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#aa45a6199c3012a3d00d2f988ac416712">Y</a>, out tl);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    map.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a5bcab06853ae1b9a619509ca701e3e9e">GetValue</a>(isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#af748ceced7b11b4254b19e9bdda21160">X</a> + 1, isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#aa45a6199c3012a3d00d2f988ac416712">Y</a>, out tr);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    map.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a5bcab06853ae1b9a619509ca701e3e9e">GetValue</a>(isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#af748ceced7b11b4254b19e9bdda21160">X</a>, isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#aa45a6199c3012a3d00d2f988ac416712">Y</a> + 1, out bl);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    map.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a5bcab06853ae1b9a619509ca701e3e9e">GetValue</a>(isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#af748ceced7b11b4254b19e9bdda21160">X</a> + 1, isample.<a class="code" href="struct_v_rage_math_1_1_vector2_i.html#aa45a6199c3012a3d00d2f988ac416712">Y</a> + 1, out br);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    byte* ss = stackalloc byte[4];</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    ss[0] = tl;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    ss[1] = tr;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    ss[2] = bl;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    ss[3] = br;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    <span class="keywordflow">if</span> (tl == tr &amp;&amp; bl == br &amp;&amp; bl == tl)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                        fixed (ushort* smpls = cache.Data)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                        {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                            smpls[0] = (ushort)((tl &lt;&lt; 8) | 0xF);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                            smpls[1] = 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                            smpls[2] = 0;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                            smpls[3] = 0;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                        fixed (ushort* smpls = cache.Data)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                            Sort4(ss);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                            ComputeTilePattern(tl, tr, bl, br, ss, smpls);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            byte value;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            fixed (ushort* smpls = cache.Data)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                coords -= <a class="code" href="namespace_vector2.html">Vector2</a>.Floor(coords);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <span class="keywordflow">if</span> (coords.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a4f0112b2f169ee65c109ab980e59aabf">X</a> == 1) coords.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a4f0112b2f169ee65c109ab980e59aabf">X</a> = .99999f;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="keywordflow">if</span> (coords.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a15e087e2bcf51768b0ae7a837665bd8b">Y</a> == 1) coords.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a15e087e2bcf51768b0ae7a837665bd8b">Y</a> = .99999f;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                SampleTile(smpls, ref coords, out value);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> unsafe <span class="keywordtype">void</span> Sort4(byte* v)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            byte tmp;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="comment">// 4 way sorting network</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">if</span> (v[0] &gt; v[1]) { tmp = v[1]; v[1] = v[0]; v[0] = tmp; }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">if</span> (v[2] &gt; v[3]) { tmp = v[2]; v[2] = v[3]; v[3] = tmp; }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">if</span> (v[0] &gt; v[3]) { tmp = v[3]; v[3] = v[0]; v[3] = tmp; }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span> (v[1] &gt; v[2]) { tmp = v[1]; v[1] = v[2]; v[2] = tmp; }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">if</span> (v[0] &gt; v[1]) { tmp = v[1]; v[1] = v[0]; v[0] = tmp; }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (v[2] &gt; v[3]) { tmp = v[2]; v[2] = v[3]; v[3] = tmp; }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> unsafe <span class="keywordtype">void</span> ComputeTilePattern(byte tl, byte tr, byte bl, byte br, byte* ss, ushort* values)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordtype">int</span> cnt = 0;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp; ss[i] == ss[i - 1]) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                values[cnt++] = (ushort)((ss[i] &lt;&lt; 8) | (ss[i] == tl ? 1 &lt;&lt; 3 : 0) | (ss[i] == tr ? 1 &lt;&lt; 2 : 0) | (ss[i] == bl ? 1 &lt;&lt; 1 : 0) | (ss[i] == br ? 1 &lt;&lt; 0 : 0));</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="keywordflow">for</span> (; cnt &lt; 4; ++cnt)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                values[cnt] = 0;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keyword">private</span> unsafe <span class="keywordtype">void</span> SampleTile(ushort* values, ref <a class="code" href="namespace_vector2.html">Vector2</a> coords, out byte computed)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            byte last = 0;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                byte mat = (byte)(values[i] &gt;&gt; 8);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="keywordflow">if</span> (values[i] != 0)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <span class="keywordtype">int</span> tileId = values[i] &amp; 0xF;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    byte value;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    m_blendingTileset.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture.html#afdd864c2a4d83b0fed8b773312e78da9">GetValue</a>(tileId, coords, out value);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    last = mat;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    <span class="keywordflow">if</span> (value == 0)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            computed = last;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">  700</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">struct </span><a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">MaterialSampleParams</a></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        {</div>
<div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a4a2fae861970b744bdd0367c387b0423">  702</a></span>&#160;            <span class="keyword">public</span> Vector3 <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a4a2fae861970b744bdd0367c387b0423">Gravity</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ac22d9ef98ad63d204d1a7a28c81d4940">  703</a></span>&#160;            <span class="keyword">public</span> Vector3 <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ac22d9ef98ad63d204d1a7a28c81d4940">Normal</a>;</div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a97d01fb2fd11481127521ab7e10841bb">  704</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a97d01fb2fd11481127521ab7e10841bb">DistanceToCenter</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a9035c997db67bd28ab89c36b3b4a6e5b">  705</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a9035c997db67bd28ab89c36b3b4a6e5b">SampledHeight</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a98c1604556d589d90ea8ea721aee3b48">  706</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a98c1604556d589d90ea8ea721aee3b48">Face</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a961c7c03f3eb7ca8fc168c30d174a4e3">  707</a></span>&#160;            <span class="keyword">public</span> <a class="code" href="namespace_vector2.html">Vector2</a> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a961c7c03f3eb7ca8fc168c30d174a4e3">Texcoord</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ab862691ff93c74c6bfc2c5849b7a5f02">  708</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ab862691ff93c74c6bfc2c5849b7a5f02">SurfaceDepth</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a43a4643543b2af26fd3fa51055ec820f">  709</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a43a4643543b2af26fd3fa51055ec820f">LodSize</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a18147088efdb96601827b23e1fcf831d">  710</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a18147088efdb96601827b23e1fcf831d">Latitude</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a3fdba11f7b5e50dd12ae5bb8a6a3b116">  711</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a3fdba11f7b5e50dd12ae5bb8a6a3b116">Longitude</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa205b2999a77224bc3bac3bc1b87ffcb">  714</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa205b2999a77224bc3bac3bc1b87ffcb">GetPositionParams</a>(ref Vector3 pos, <span class="keywordtype">float</span> lodSize, out <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">MaterialSampleParams</a> ps, <span class="keywordtype">bool</span> skipCache = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            Vector3 localPosition = pos - m_planetShape.Center();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            ps.DistanceToCenter = localPosition.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">Length</a>();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            ps.LodSize = lodSize;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="keywordflow">if</span> (ps.DistanceToCenter &lt; 0.01f)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                ps.SurfaceDepth = 0;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                ps.Gravity = Vector3.Down;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                ps.Latitude = 0;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                ps.Longitude = 0;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                ps.Texcoord = <a class="code" href="namespace_vector2.html">Vector2</a>.One / 2;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                ps.Face = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                ps.Normal = Vector3.Backward;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                ps.SampledHeight = 0;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            ps.Gravity = localPosition / ps.DistanceToCenter;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            MyCubemapHelpers.CalculateSampleTexcoord(ref localPosition, out ps.Face, out ps.Texcoord);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="comment">// this guarantess texcoord in [0,1)</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordflow">if</span> (skipCache)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                ps.SampledHeight = m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#a1d0959930146995011afda13fc000be3">GetValueForPositionCacheless</a>(ps.Face, ref ps.Texcoord, out ps.Normal);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                ps.SampledHeight = m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad92090a6b6c73e7fa88e9413e07ee9d6">GetValueForPositionWithCache</a>(ps.Face, ref ps.Texcoord, out ps.Normal);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            ps.SurfaceDepth = m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad1b9404d3c171439899db328528d5c72">SignedDistanceWithSample</a>(lodSize, ps.DistanceToCenter, ps.SampledHeight) * ps.Normal.Z;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            ps.Latitude = ps.Gravity.Y;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <a class="code" href="namespace_vector2.html">Vector2</a> lon = <span class="keyword">new</span> <a class="code" href="_game_window_form_8cs.html#a4293ddbd89805ff3a31b929fae027318">Vector2</a>(-ps.Gravity.X, -ps.Gravity.Z);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            lon.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a131a04fd9bcdefdeb1ef0ba2efa505d0">Normalize</a>();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            ps.Longitude = lon.<a class="code" href="struct_v_rage_math_1_1_vector2.html#a15e087e2bcf51768b0ae7a837665bd8b">Y</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="keywordflow">if</span> (-ps.Gravity.X &gt; 0)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                ps.Longitude = 2 - ps.Longitude;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa91538c19b53a2106c49fcb2a655dac5">  757</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a> <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa91538c19b53a2106c49fcb2a655dac5">GetLayeredMaterialForPosition</a>(ref <a class="code" href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">MaterialSampleParams</a> ps, out byte spawnsItems, ref byte occlusion)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> (ps.DistanceToCenter &lt; 0.01)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                spawnsItems = 255;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                occlusion = 0;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <span class="keywordflow">return</span> m_defaultMaterial;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            Byte roundedMaterial = 0;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">PlanetMaterial</a> voxelMaterial = null;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            byte spawns = 0;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <span class="keywordtype">bool</span> computeOcclusion = m_occlusionMap != null &amp;&amp; ps.SurfaceDepth &gt; -(ps.LodSize * 2) &amp;&amp; occlusion != 0;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span> (m_biomeMap != null)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                spawns = m_biomeMap.Faces[ps.Face].GetValue(ps.Texcoord.X, ps.Texcoord.Y);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> (m_biomePixelSize &lt; ps.LodSize)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">if</span> (m_materialMap != null)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    roundedMaterial = m_materialMap.Faces[ps.Face].GetValue(ps.Texcoord.X, ps.Texcoord.Y);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                <span class="keywordflow">if</span> (computeOcclusion)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                    occlusion = m_occlusionMap.Faces[ps.Face].GetValue(ps.Texcoord.X, ps.Texcoord.Y);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                    occlusion = 0;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                <span class="keywordflow">if</span> (m_biomeMap != null)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                    roundedMaterial = ComputeMapBlend(ps.Texcoord, ps.Face, ref m_materialBC,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                        m_materialMap.Faces[ps.Face]);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <span class="keywordflow">if</span> (computeOcclusion)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    occlusion = ComputeMapBlend(ps.Texcoord, ps.Face, ref m_occlusionBC,</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        m_occlusionMap.Faces[ps.Face]);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                <span class="keywordflow">else</span> occlusion = 0;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            m_materials.TryGetValue(roundedMaterial, out voxelMaterial);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordflow">if</span> (MyFakes.ENABLE_DEFINITION_ENVIRONMENTS &amp;&amp; voxelMaterial == null &amp;&amp; m_biomes != null)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                var rules = m_rangeBiomes[roundedMaterial];</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">if</span> (rules != null &amp;&amp; rules.Count != 0)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                    <span class="keywordtype">float</span> height = (ps.SampledHeight - m_planetShape.<a class="code" href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ae66a414e702b7206b3e9334dc41c7eed">MinHillHeight</a>) * m_invHeightRange;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                    <span class="keywordflow">foreach</span> (var rule <span class="keywordflow">in</span> rules)</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        <span class="keywordflow">if</span> (rule.Check(height, ps.Latitude, ps.Longitude, ps.Normal.Z))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                        {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                            voxelMaterial = rule;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                        }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="keywordflow">if</span> (voxelMaterial == null)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                voxelMaterial = m_defaultMaterial;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            spawnsItems = spawns;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">return</span> voxelMaterial;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div>
<div class="ttc" id="namespace_sandbox_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_game.html">Sandbox.Game</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_ad64b2c264f0a96c46b0f3173055439ea"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad64b2c264f0a96c46b0f3173055439ea">Sandbox.Engine.Voxels.MyPlanetShapeProvider.PrepareCache</a></div><div class="ttdeci">void PrepareCache()</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00387">MyPlanetShapeProvider.cs:387</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_aca3e1637d1d2f9cce4eba1905a92ddb5"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#aca3e1637d1d2f9cce4eba1905a92ddb5">VRageMath.Vector3I.X</a></div><div class="ttdeci">int X</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00112">Vector3I.cs:112</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_ac7bc7922c19dc1e3d8ac436a93456bd8"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#ac7bc7922c19dc1e3d8ac436a93456bd8">VRageMath.Vector3I.Y</a></div><div class="ttdeci">int Y</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00114">Vector3I.cs:114</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_a15c20fe1b309288dc755b78070f98b79"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a15c20fe1b309288dc755b78070f98b79">Sandbox.Definitions.MyPlanetGeneratorDefinition.PlanetMaps</a></div><div class="ttdeci">MyPlanetMaps PlanetMaps</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00197">MyPlanetGeneratorDefinition.cs:197</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material_html_a79d8a2cd8f0d33cc6348c474fd6185d2"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material.html#a79d8a2cd8f0d33cc6348c474fd6185d2">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.VoxelMaterial.Material</a></div><div class="ttdeci">MyVoxelMaterialDefinition Material</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00021">MyPlanetMaterialProvider.Tree.cs:21</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_a55572a3c1c371d7aab82bf09f2bb7d0d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a55572a3c1c371d7aab82bf09f2bb7d0d">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PrepareRulesForBox</a></div><div class="ttdeci">void PrepareRulesForBox(ref BoundingBox request)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00287">MyPlanetMaterialProvider.cs:287</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a98c1604556d589d90ea8ea721aee3b48"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a98c1604556d589d90ea8ea721aee3b48">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Face</a></div><div class="ttdeci">int Face</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00706">MyPlanetMaterialProvider.cs:706</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html">VRage.Utils.MyLog</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00049">MyLog.cs:49</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_adc8b8810a5b1b8e490819a48b694df90"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adc8b8810a5b1b8e490819a48b694df90">Sandbox.Definitions.MyPlanetGeneratorDefinition.DefaultSurfaceMaterial</a></div><div class="ttdeci">MyPlanetMaterialDefinition DefaultSurfaceMaterial</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00215">MyPlanetGeneratorDefinition.cs:215</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_a0f6766c337793dc3702d5f9ad26da73b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#a0f6766c337793dc3702d5f9ad26da73b">Sandbox.Engine.Voxels.MyPlanetShapeProvider.Radius</a></div><div class="ttdeci">float Radius</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00264">MyPlanetShapeProvider.cs:264</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_html_a131a04fd9bcdefdeb1ef0ba2efa505d0"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2.html#a131a04fd9bcdefdeb1ef0ba2efa505d0">VRageMath.Vector2.Normalize</a></div><div class="ttdeci">void Normalize()</div><div class="ttdoc">Turns the current vector into a unit vector. The result is a vector one unit in length pointing in th...</div><div class="ttdef"><b>Definition:</b> <a href="_vector2_8cs_source.html#l00369">Vector2.cs:369</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition_html_a7b1792a1559a41fa03cb519b5ea82fb9"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html#a7b1792a1559a41fa03cb519b5ea82fb9">Sandbox.Definitions.MyVoxelMaterialDefinition.Index</a></div><div class="ttdeci">byte Index</div><div class="ttdoc">Value generated at runtime to ensure correctness. Do not serialize or deserialize. This is what the old cast to int used to result into, but now numbers depend on order in XML file. TODO Serialize to XML and ensure upon loading that these values are starting from 0 and continuous. </div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_material_definition_8cs_source.html#l00062">MyVoxelMaterialDefinition.cs:62</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_1_1_generic_html"><div class="ttname"><a href="namespace_system_1_1_collections_1_1_generic.html">System.Collections.Generic</a></div><div class="ttdef"><b>Definition:</b> <a href="_dictionary_extensions_8cs_source.html#l00007">DictionaryExtensions.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap.html">Sandbox.Engine.Voxels.MyCubemap</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_cubemaps_8cs_source.html#l00258">MyPlanetCubemaps.cs:258</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine.html">Sandbox.Engine</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00700">MyPlanetMaterialProvider.cs:700</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_a72d9a28ebd0c98e84b864a35d06fe9be"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a72d9a28ebd0c98e84b864a35d06fe9be">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.ReadOcclusion</a></div><div class="ttdeci">void ReadOcclusion(ref MyVoxelDataRequest req)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00418">MyPlanetMaterialProvider.cs:418</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_aa91538c19b53a2106c49fcb2a655dac5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa91538c19b53a2106c49fcb2a655dac5">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.GetLayeredMaterialForPosition</a></div><div class="ttdeci">PlanetMaterial GetLayeredMaterialForPosition(ref MaterialSampleParams ps, out byte spawnsItems, ref byte occlusion)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00757">MyPlanetMaterialProvider.cs:757</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition_html"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_voxel_material_definition.html">Sandbox.Definitions.MyVoxelMaterialDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_material_definition_8cs_source.html#l00015">MyVoxelMaterialDefinition.cs:15</a></div></div>
<div class="ttc" id="_game_window_form_8cs_html_a4293ddbd89805ff3a31b929fae027318"><div class="ttname"><a href="_game_window_form_8cs.html#a4293ddbd89805ff3a31b929fae027318">Vector2</a></div><div class="ttdeci">VRageMath.Vector2 Vector2</div><div class="ttdef"><b>Definition:</b> <a href="_game_window_form_8cs_source.html#l00015">GameWindowForm.cs:15</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetMaterial</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00036">MyPlanetMaterialProvider.Tree.cs:36</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a3fdba11f7b5e50dd12ae5bb8a6a3b116"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a3fdba11f7b5e50dd12ae5bb8a6a3b116">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Longitude</a></div><div class="ttdeci">float Longitude</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00711">MyPlanetMaterialProvider.cs:711</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_i_html_af748ceced7b11b4254b19e9bdda21160"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2_i.html#af748ceced7b11b4254b19e9bdda21160">VRageMath.Vector2I.X</a></div><div class="ttdeci">int X</div><div class="ttdef"><b>Definition:</b> <a href="_vector2_i_8cs_source.html#l00017">Vector2I.cs:17</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html">Sandbox.Game.GameSystems.MyHeightMapLoadingSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_height_map_loading_system_8cs_source.html#l00030">MyHeightMapLoadingSystem.cs:30</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_a7973ae211be4c69693212a02b97636aa"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">VRageMath.Vector3.Z</a></div><div class="ttdeci">float Z</div><div class="ttdoc">Gets or sets the z-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00059">Vector3.cs:59</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system_html_a0a249db0cfce8a5a2170c956fcf5f1c8"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a0a249db0cfce8a5a2170c956fcf5f1c8">Sandbox.Game.GameSystems.MyHeightMapLoadingSystem.GetTerrainBlendTexture</a></div><div class="ttdeci">MyTileTexture&lt; byte &gt; GetTerrainBlendTexture(MyPlanetMaterialBlendSettings settings)</div><div class="ttdef"><b>Definition:</b> <a href="_my_height_map_loading_system_8cs_source.html#l00520">MyHeightMapLoadingSystem.cs:520</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_ab31ba832d7178d163dca348208b0bce6"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#ab31ba832d7178d163dca348208b0bce6">Sandbox.Definitions.MyPlanetGeneratorDefinition.SurfaceMaterialTable</a></div><div class="ttdeci">MyPlanetMaterialDefinition[] SurfaceMaterialTable</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00211">MyPlanetGeneratorDefinition.cs:211</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_a8fa0ae81d4b9318107530235d4dcbe8c"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">VRageMath.Vector3.X</a></div><div class="ttdeci">float X</div><div class="ttdoc">Gets or sets the x-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00049">Vector3.cs:49</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_adbff61666e4441782260e68c0f3160b4"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#adbff61666e4441782260e68c0f3160b4">Sandbox.Definitions.MyPlanetGeneratorDefinition.MaterialGroups</a></div><div class="ttdeci">MyPlanetMaterialGroup[] MaterialGroups</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00224">MyPlanetGeneratorDefinition.cs:224</a></div></div>
<div class="ttc" id="_my_gui_skin_definition_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">using System</div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_skin_definition_8cs_source.html#l00001">MyGuiSkinDefinition.cs:1</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_ad1b9404d3c171439899db328528d5c72"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad1b9404d3c171439899db328528d5c72">Sandbox.Engine.Voxels.MyPlanetShapeProvider.SignedDistanceWithSample</a></div><div class="ttdeci">float SignedDistanceWithSample(float lodVoxelSize, float distance, float value)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00613">MyPlanetShapeProvider.cs:613</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_ab862691ff93c74c6bfc2c5849b7a5f02"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ab862691ff93c74c6bfc2c5849b7a5f02">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.SurfaceDepth</a></div><div class="ttdeci">float SurfaceDepth</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00708">MyPlanetMaterialProvider.cs:708</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_a7a97313d49c6f62bb5616f9296204935"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a7a97313d49c6f62bb5616f9296204935">Sandbox.Definitions.MyPlanetGeneratorDefinition.DefaultSubSurfaceMaterial</a></div><div class="ttdeci">MyPlanetMaterialDefinition DefaultSubSurfaceMaterial</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00217">MyPlanetGeneratorDefinition.cs:217</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_ab1decf91e626f9f8e6e63b1c7b0d54a1"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ab1decf91e626f9f8e6e63b1c7b0d54a1">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.ReadMaterialRange</a></div><div class="ttdeci">void ReadMaterialRange(ref MyVoxelDataRequest req)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00332">MyPlanetMaterialProvider.cs:332</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html_ad800845007ebb813dd465baf4dcb96ff"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad800845007ebb813dd465baf4dcb96ff">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre.Depth</a></div><div class="ttdeci">float Depth</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00029">MyPlanetMaterialProvider.cs:29</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a8f45636aeb06bcc409b3d95f18d05694"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694">VRage.Voxels.MyStorageDataTypeEnum</a></div><div class="ttdeci">MyStorageDataTypeEnum</div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00013">Enums.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_a1d0959930146995011afda13fc000be3"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#a1d0959930146995011afda13fc000be3">Sandbox.Engine.Voxels.MyPlanetShapeProvider.GetValueForPositionCacheless</a></div><div class="ttdeci">unsafe float GetValueForPositionCacheless(int face, ref Vector2 texcoord, out Vector3 localNormal)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00587">MyPlanetShapeProvider.cs:587</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_definitions_html"><div class="ttname"><a href="namespace_sandbox_1_1_definitions.html">Sandbox.Definitions</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_common_2_my_definition_errors_8cs_source.html#l00008">MyDefinitionErrors.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system_html_a56dcd3653f96d1210ed4fe3569298082"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a56dcd3653f96d1210ed4fe3569298082">Sandbox.Game.GameSystems.MyHeightMapLoadingSystem.Static</a></div><div class="ttdeci">static MyHeightMapLoadingSystem Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_height_map_loading_system_8cs_source.html#l00037">MyHeightMapLoadingSystem.cs:37</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a9035c997db67bd28ab89c36b3b4a6e5b"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a9035c997db67bd28ab89c36b3b4a6e5b">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.SampledHeight</a></div><div class="ttdeci">float SampledHeight</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00705">MyPlanetMaterialProvider.cs:705</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_utils_html"><div class="ttname"><a href="namespace_v_rage_1_1_utils.html">VRage.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my5_bit_encoding_8cs_source.html#l00006">My5BitEncoding.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_a311f814ee54916e2a1d0fa3ded4f4bab"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a311f814ee54916e2a1d0fa3ded4f4bab">Sandbox.Definitions.MyPlanetGeneratorDefinition.OreMappings</a></div><div class="ttdeci">MyPlanetOreMapping[] OreMappings</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00205">MyPlanetGeneratorDefinition.cs:205</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html_ad62f89a22d5b8dc47d9d9093226c7899"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#ad62f89a22d5b8dc47d9d9093226c7899">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00033">MyPlanetMaterialProvider.cs:33</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a8f45636aeb06bcc409b3d95f18d05694ad92a8333dd3ccb895cc65f7455b71206"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a8f45636aeb06bcc409b3d95f18d05694ad92a8333dd3ccb895cc65f7455b71206">VRage.Voxels.Material</a></div></div>
<div class="ttc" id="namespace_bounding_box_html"><div class="ttname"><a href="namespace_bounding_box.html">BoundingBox</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_ac66850d69173730578371372b211a6c4"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#ac66850d69173730578371372b211a6c4">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.GetMaterialForPosition</a></div><div class="ttdeci">MyVoxelMaterialDefinition GetMaterialForPosition(ref Vector3 pos, float lodSize, out byte biomeValue, ref byte occlusion)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00516">MyPlanetMaterialProvider.cs:516</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_ad92090a6b6c73e7fa88e9413e07ee9d6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ad92090a6b6c73e7fa88e9413e07ee9d6">Sandbox.Engine.Voxels.MyPlanetShapeProvider.GetValueForPositionWithCache</a></div><div class="ttdeci">unsafe float GetValueForPositionWithCache(int face, ref Vector2 texcoord, out Vector3 localNormal)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00701">MyPlanetShapeProvider.cs:701</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_a280e0f68244c251cc79e8e6862340bf2"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#a280e0f68244c251cc79e8e6862340bf2">VRage.Utils.MyLog.WriteLine</a></div><div class="ttdeci">void WriteLine(string message, LoggingOptions option)</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00347">MyLog.cs:347</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a43a4643543b2af26fd3fa51055ec820f"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a43a4643543b2af26fd3fa51055ec820f">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.LodSize</a></div><div class="ttdeci">float LodSize</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00709">MyPlanetMaterialProvider.cs:709</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material_html_a8dceff33e154bee34c0e1750e77f0c34"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_voxel_material.html#a8dceff33e154bee34c0e1750e77f0c34">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.VoxelMaterial.Depth</a></div><div class="ttdeci">float Depth</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00022">MyPlanetMaterialProvider.Tree.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system_html_a0af48eec25daf139a59acba8b6999da0"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_height_map_loading_system.html#a0af48eec25daf139a59acba8b6999da0">Sandbox.Game.GameSystems.MyHeightMapLoadingSystem.GetPlanetMaps</a></div><div class="ttdeci">void GetPlanetMaps(string folder, MyModContext context, MyPlanetMaps mapsToUse, out MyCubemap[] maps)</div><div class="ttdef"><b>Definition:</b> <a href="_my_height_map_loading_system_8cs_source.html#l00286">MyHeightMapLoadingSystem.cs:286</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material_html_a658454d843c264694c4affd7650ed862"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html#a658454d843c264694c4affd7650ed862">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetMaterial.Layers</a></div><div class="ttdeci">VoxelMaterial[] Layers</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00038">MyPlanetMaterialProvider.Tree.cs:38</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data_html_a2bbd21ad43d9eec57b125dbd6172944f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a2bbd21ad43d9eec57b125dbd6172944f">Sandbox.Engine.Voxels.MyCubemapData.Resolution</a></div><div class="ttdeci">int Resolution</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_cubemaps_8cs_source.html#l00248">MyPlanetCubemaps.cs:248</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture_html_afdd864c2a4d83b0fed8b773312e78da9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture.html#afdd864c2a4d83b0fed8b773312e78da9">Sandbox.Engine.Voxels.MyTileTexture.GetValue</a></div><div class="ttdeci">void GetValue(int corners, Vector2I coords, out Pixel value)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_cubemaps_8cs_source.html#l00380">MyPlanetCubemaps.cs:380</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_ac22d9ef98ad63d204d1a7a28c81d4940"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#ac22d9ef98ad63d204d1a7a28c81d4940">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Normal</a></div><div class="ttdeci">Vector3 Normal</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00703">MyPlanetMaterialProvider.cs:703</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a961c7c03f3eb7ca8fc168c30d174a4e3"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a961c7c03f3eb7ca8fc168c30d174a4e3">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Texcoord</a></div><div class="ttdeci">Vector2 Texcoord</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00707">MyPlanetMaterialProvider.cs:707</a></div></div>
<div class="ttc" id="namespace_math_html"><div class="ttname"><a href="namespace_math.html">Math</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_a4d44c319212bffba8239f9b1e96f9730"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#a4d44c319212bffba8239f9b1e96f9730">VRageMath.Vector3.Length</a></div><div class="ttdeci">float Length()</div><div class="ttdoc">Calculates the length of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00472">Vector3.cs:472</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html">Sandbox.Engine.Voxels.MyPlanetShapeProvider</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00017">MyPlanetShapeProvider.cs:17</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html_a80f1263ca16fc8e4472cbebb97b7f06f"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a80f1263ca16fc8e4472cbebb97b7f06f">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre.Value</a></div><div class="ttdeci">byte Value</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00028">MyPlanetMaterialProvider.cs:28</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a4a2fae861970b744bdd0367c387b0423"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a4a2fae861970b744bdd0367c387b0423">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Gravity</a></div><div class="ttdeci">Vector3 Gravity</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00702">MyPlanetMaterialProvider.cs:702</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_profiler_html"><div class="ttname"><a href="namespace_v_rage_1_1_profiler.html">VRage.Profiler</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_draw_area_8cs_source.html#l00003">MyDrawArea.cs:3</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a18147088efdb96601827b23e1fcf831d"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a18147088efdb96601827b23e1fcf831d">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.Latitude</a></div><div class="ttdeci">float Latitude</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00710">MyPlanetMaterialProvider.cs:710</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_aa205b2999a77224bc3bac3bc1b87ffcb"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa205b2999a77224bc3bac3bc1b87ffcb">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.GetPositionParams</a></div><div class="ttdeci">void GetPositionParams(ref Vector3 pos, float lodSize, out MaterialSampleParams ps, bool skipCache=false)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00714">MyPlanetMaterialProvider.cs:714</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_game_systems_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_game_systems.html">Sandbox.Game.GameSystems</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_thrust_component_8cs_source.html#l00020">MyEntityThrustComponent.cs:20</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html"><div class="ttname"><a href="namespace_v_rage_math.html">VRageMath</a></div><div class="ttdef"><b>Definition:</b> <a href="_base27_directions_8cs_source.html#l00007">Base27Directions.cs:7</a></div></div>
<div class="ttc" id="class_v_rage_1_1_utils_1_1_my_log_html_ad6211c26fe6b341fedd7d8fe05eb14fd"><div class="ttname"><a href="class_v_rage_1_1_utils_1_1_my_log.html#ad6211c26fe6b341fedd7d8fe05eb14fd">VRage.Utils.MyLog.Default</a></div><div class="ttdeci">static MyLog Default</div><div class="ttdef"><b>Definition:</b> <a href="_my_log_8cs_source.html#l00121">MyLog.cs:121</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html">Sandbox.Definitions.MyPlanetGeneratorDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00185">MyPlanetGeneratorDefinition.cs:185</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data_html_a5bcab06853ae1b9a619509ca701e3e9e"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html#a5bcab06853ae1b9a619509ca701e3e9e">Sandbox.Engine.Voxels.MyCubemapData.GetValue</a></div><div class="ttdeci">void GetValue(int x, int y, out T value)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_cubemaps_8cs_source.html#l00149">MyPlanetCubemaps.cs:149</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_biome_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_biome.html">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetBiome</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00143">MyPlanetMaterialProvider.Tree.cs:143</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params_html_a97d01fb2fd11481127521ab7e10841bb"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_material_sample_params.html#a97d01fb2fd11481127521ab7e10841bb">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MaterialSampleParams.DistanceToCenter</a></div><div class="ttdeci">float DistanceToCenter</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00704">MyPlanetMaterialProvider.cs:704</a></div></div>
<div class="ttc" id="namespace_vector2_html"><div class="ttname"><a href="namespace_vector2.html">Vector2</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_afa0f43170006ce2fa3f930715b26d93b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#afa0f43170006ce2fa3f930715b26d93b">Sandbox.Engine.Voxels.MyPlanetShapeProvider.MaxHillHeight</a></div><div class="ttdeci">float MaxHillHeight</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00256">MyPlanetShapeProvider.cs:256</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html_aa76b8697823951ea5c5ec16092b902ab"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#aa76b8697823951ea5c5ec16092b902ab">Sandbox.Definitions.MyDefinitionManager.Static</a></div><div class="ttdeci">static new MyDefinitionManager Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager_8cs_source.html#l00069">MyDefinitionManager.cs:69</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html_a4081e953267edd6792fff74f36a71093"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html#a4081e953267edd6792fff74f36a71093">VRageMath.Vector3I.Z</a></div><div class="ttdeci">int Z</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00116">Vector3I.cs:116</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material_html_af8fd01a8ccd3fe3635d872e19314dc79"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_material.html#af8fd01a8ccd3fe3635d872e19314dc79">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetMaterial.HasLayers</a></div><div class="ttdeci">bool HasLayers</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8_tree_8cs_source.html#l00040">MyPlanetMaterialProvider.Tree.cs:40</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_game_1_1_my_definition_id_html_a5880eb9e5f2ed086691941ff343844b3"><div class="ttname"><a href="struct_v_rage_1_1_game_1_1_my_definition_id.html#a5880eb9e5f2ed086691941ff343844b3">VRage.Game.MyDefinitionId.SubtypeName</a></div><div class="ttdeci">string SubtypeName</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_id_8cs_source.html#l00102">MyDefinitionId.cs:102</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_html"><div class="ttname"><a href="namespace_system_1_1_collections.html">System.Collections</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_data_request_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_voxel_data_request.html">Sandbox.Engine.Voxels.MyVoxelDataRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_storage_data_provider_8cs_source.html#l00021">IMyStorageDataProvider.cs:21</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_cubemap_data.html">Sandbox.Engine.Voxels.MyCubemapData</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_cubemaps_8cs_source.html#l00132">MyPlanetCubemaps.cs:132</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html_a6b2e3effeaf63cb322ecb46b3d19c7b7"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html#a6b2e3effeaf63cb322ecb46b3d19c7b7">VRage.Voxels.MyVoxelRequestFlags</a></div><div class="ttdeci">MyVoxelRequestFlags</div><div class="ttdoc">Flags used when requesting voxel materials and content. </div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00043">Enums.cs:43</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_i_html"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_i.html">VRageMath.Vector3I</a></div><div class="ttdef"><b>Definition:</b> <a href="_vector3_i_8cs_source.html#l00076">Vector3I.cs:76</a></div></div>
<div class="ttc" id="_my_texture_atlas_utils_8cs_html_a4f6647b688ebe11f9de2f9a037f5850a"><div class="ttname"><a href="_my_texture_atlas_utils_8cs.html#a4f6647b688ebe11f9de2f9a037f5850a">BoundingBox</a></div><div class="ttdeci">VRageMath.BoundingBox BoundingBox</div><div class="ttdef"><b>Definition:</b> <a href="_my_texture_atlas_utils_8cs_source.html#l00014">MyTextureAtlasUtils.cs:14</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_i_html"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2_i.html">VRageMath.Vector2I</a></div><div class="ttdef"><b>Definition:</b> <a href="_vector2_i_8cs_source.html#l00008">Vector2I.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_html"><div class="ttname"><a href="namespace_sandbox.html">Sandbox</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_definition_base_html_aaba988a4a4d7b7e33550b751c607d56d"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_definition_base.html#aaba988a4a4d7b7e33550b751c607d56d">VRage.Game.MyDefinitionBase.Context</a></div><div class="ttdeci">MyModContext Context</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_base_8cs_source.html#l00050">MyDefinitionBase.cs:50</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00026">MyPlanetMaterialProvider.cs:26</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html_a75460ba68d8d1119d18f13205a5f7f14"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#a75460ba68d8d1119d18f13205a5f7f14">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre.Start</a></div><div class="ttdeci">float Start</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00030">MyPlanetMaterialProvider.cs:30</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_a80551cd10761b1fa4227ff96799cb8b0"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a80551cd10761b1fa4227ff96799cb8b0">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.Close</a></div><div class="ttdeci">void Close()</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00179">MyPlanetMaterialProvider.cs:179</a></div></div>
<div class="ttc" id="namespace_v_rage_html"><div class="ttname"><a href="namespace_v_rage.html">VRage</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_definition_base_html_a2f57e2783d41474baa1ac57a4112006c"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_definition_base.html#a2f57e2783d41474baa1ac57a4112006c">VRage.Game.MyDefinitionBase.Id</a></div><div class="ttdeci">MyDefinitionId Id</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_base_8cs_source.html#l00011">MyDefinitionBase.cs:11</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore_html_acef4d70337e82cf9442ce5ec0803e687"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_1_1_planet_ore.html#acef4d70337e82cf9442ce5ec0803e687">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.PlanetOre.Material</a></div><div class="ttdeci">MyVoxelMaterialDefinition Material</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00031">MyPlanetMaterialProvider.cs:31</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider_html_ae66a414e702b7206b3e9334dc41c7eed"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_shape_provider.html#ae66a414e702b7206b3e9334dc41c7eed">Sandbox.Engine.Voxels.MyPlanetShapeProvider.MinHillHeight</a></div><div class="ttdeci">float MinHillHeight</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_shape_provider_8cs_source.html#l00248">MyPlanetShapeProvider.cs:248</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html">Sandbox.Definitions.MyDefinitionManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager-_definition_set_8cs_source.html#l00020">MyDefinitionManager-DefinitionSet.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_a70a958f2d5014f8d30f5dfc007272c24"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#a70a958f2d5014f8d30f5dfc007272c24">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.MyPlanetMaterialProvider</a></div><div class="ttdeci">MyPlanetMaterialProvider(MyPlanetGeneratorDefinition generatorDef, MyPlanetShapeProvider planetShape)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00091">MyPlanetMaterialProvider.cs:91</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_html_a15e087e2bcf51768b0ae7a837665bd8b"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2.html#a15e087e2bcf51768b0ae7a837665bd8b">VRageMath.Vector2.Y</a></div><div class="ttdeci">float Y</div><div class="ttdoc">Gets or sets the y-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector2_8cs_source.html#l00028">Vector2.cs:28</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_voxels_html"><div class="ttname"><a href="namespace_v_rage_1_1_voxels.html">VRage.Voxels</a></div><div class="ttdef"><b>Definition:</b> <a href="_enums_8cs_source.html#l00003">Enums.cs:3</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_html_a4f0112b2f169ee65c109ab980e59aabf"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2.html#a4f0112b2f169ee65c109ab980e59aabf">VRageMath.Vector2.X</a></div><div class="ttdeci">float X</div><div class="ttdoc">Gets or sets the x-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector2_8cs_source.html#l00023">Vector2.cs:23</a></div></div>
<div class="ttc" id="namespace_vector3_html"><div class="ttname"><a href="namespace_vector3.html">Vector3</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_a304e8fda73771fcb2e245ee8490e2dd2"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a304e8fda73771fcb2e245ee8490e2dd2">Sandbox.Definitions.MyPlanetGeneratorDefinition.FolderName</a></div><div class="ttdeci">string FolderName</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00244">MyPlanetGeneratorDefinition.cs:244</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_ab3e1bb2d2d351b58864f23f3a87f7aaf"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">VRageMath.Vector3.Y</a></div><div class="ttdeci">float Y</div><div class="ttdoc">Gets or sets the y-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00054">Vector3.cs:54</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_tile_texture.html">Sandbox.Engine.Voxels.MyTileTexture&lt; byte &gt;</a></div></div>
<div class="ttc" id="_my_texture_atlas_utils_8cs_html_a739619d477e8e447588f40eba590b3b3"><div class="ttname"><a href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a></div><div class="ttdeci">VRageMath.Vector3 Vector3</div><div class="ttdef"><b>Definition:</b> <a href="_my_texture_atlas_utils_8cs_source.html#l00020">MyTextureAtlasUtils.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_definition_manager_html_a687ecc35d97dbeb307033699b9d525ce"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_definition_manager.html#a687ecc35d97dbeb307033699b9d525ce">Sandbox.Definitions.MyDefinitionManager.GetVoxelMaterialDefinition</a></div><div class="ttdeci">MyVoxelMaterialDefinition GetVoxelMaterialDefinition(byte materialIndex)</div><div class="ttdef"><b>Definition:</b> <a href="_my_definition_manager_8cs_source.html#l04056">MyDefinitionManager.cs:4056</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_utils_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_utils.html">Sandbox.Engine.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_battle_helper_8cs_source.html#l00014">MyBattleHelper.cs:14</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector2_i_html_aa45a6199c3012a3d00d2f988ac416712"><div class="ttname"><a href="struct_v_rage_math_1_1_vector2_i.html#aa45a6199c3012a3d00d2f988ac416712">VRageMath.Vector2I.Y</a></div><div class="ttdeci">int Y</div><div class="ttdef"><b>Definition:</b> <a href="_vector2_i_8cs_source.html#l00019">Vector2I.cs:19</a></div></div>
<div class="ttc" id="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition_html_a532681003b708f2708aac311faf30e95"><div class="ttname"><a href="class_sandbox_1_1_definitions_1_1_my_planet_generator_definition.html#a532681003b708f2708aac311faf30e95">Sandbox.Definitions.MyPlanetGeneratorDefinition.MaterialBlending</a></div><div class="ttdeci">MyPlanetMaterialBlendSettings MaterialBlending</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_generator_definition_8cs_source.html#l00238">MyPlanetGeneratorDefinition.cs:238</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html_aa66da7a82caa2709dd06305ba4dcaf7a"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html#aa66da7a82caa2709dd06305ba4dcaf7a">Sandbox.Engine.Voxels.MyPlanetMaterialProvider.GetMaterialForPosition</a></div><div class="ttdeci">MyVoxelMaterialDefinition GetMaterialForPosition(ref Vector3 pos, float lodSize)</div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00510">MyPlanetMaterialProvider.cs:510</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_voxels_1_1_my_planet_material_provider.html">Sandbox.Engine.Voxels.MyPlanetMaterialProvider</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_planet_material_provider_8cs_source.html#l00014">MyPlanetMaterialProvider.cs:14</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 23 2017 01:16:21 for Space Engineers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
