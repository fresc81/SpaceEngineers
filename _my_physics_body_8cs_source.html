<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Space Engineers: Sources/Sandbox.Game/Engine/Physics/MyPhysicsBody.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Space Engineers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="dir_adcb7f0194fb5944415bcd7197787778.html">Sandbox.Game</a></li><li class="navelem"><a class="el" href="dir_38662c1c33bdf59b0e10164ceae4015b.html">Engine</a></li><li class="navelem"><a class="el" href="dir_79f67eca8d8aa4b1219f3bd9e4732ae5.html">Physics</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MyPhysicsBody.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_my_physics_body_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="_my_physics_body_8cs.html#a1cd8713ba6aa75194cf8496a382faced">    1</a></span>&#160;<span class="preprocessor">#define DYNAMIC_CHARACTER_CONTROLLER</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#region Using</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_physics.html">Physics</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_linq.html">Linq</a>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_collections.html">Collections</a>.<a class="code" href="namespace_system_1_1_collections_1_1_generic.html">Generic</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_render.html">VRageRender</a>;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_app_code.html">AppCode</a>.<a class="code" href="namespace_sandbox_1_1_app_code_1_1_game.html">Game</a>;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_models.html">Models</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_havok.html">Havok</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_graphics.html">Graphics</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_common.html">Common</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_world.html">World</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html">Gui</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html">Character</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage_math.html">VRageMath</a>.<a class="code" href="namespace_v_rage_math_1_1_spatial.html">Spatial</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_collections.html">Collections</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_profiler.html">Profiler</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endregion</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_sandbox.html">Sandbox</a>.Engine.<a class="code" href="namespace_v_rage_1_1_network.html#afd0c0e2c33a4c1987d62c47d4bd7ffa1a50ae99e9c35446c2580e4b540b0fd104">Physics</a></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">//using MyHavokCluster = MyClusterTree&lt;HkWorld&gt;;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_my_havok_cluster.html">MyHavokCluster</a> = <a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">MyClusterTree</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_mod_a_p_i.html">ModAPI</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities.html">Entities</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_cube.html">Cube</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_game_systems.html">GameSystems</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_multiplayer.html">Multiplayer</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_library.html">Library</a>.<a class="code" href="namespace_v_rage_1_1_library_1_1_utils.html">Utils</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">using</span> <a class="code" href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_definitions.html">Definitions</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_mod_a_p_i.html">ModAPI</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="namespace_v_rage_1_1_game_1_1_components.html">Components</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_trace.html">Trace</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="namespace_v_rage_1_1_game_1_1_entity.html">Entity</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entity_components.html">EntityComponents</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="namespace_v_rage_1_1_game_1_1_object_builders.html">ObjectBuilders</a>.<a class="code" href="namespace_v_rage_1_1_game_1_1_object_builders_1_1_component_system.html">ComponentSystem</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entity_components.html">EntityComponents</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_entity_components_1_1_systems.html">Systems</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_game.html">Game</a>.<a class="code" href="namespace_sandbox_1_1_game_1_1_replication.html">Replication</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    [MyComponentBuilder(typeof(<a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_body_component.html">MyObjectBuilder_PhysicsBodyComponent</a>))]</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html">   59</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">partial class </span><a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html">MyPhysicsBody</a> : <a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html">MyPhysicsComponentBase</a>, <a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">MyClusterTree</a>.IMyActivationHandler</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">        #region Fields</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">static</span> <a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_id.html">MyStringId</a> m_startCue = <a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_id.html">MyStringId</a>.<a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_id.html#a8385362f2856a13363692987fc99e29b">GetOrCompute</a>(<span class="stringliteral">&quot;Start&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_hash.html">MyStringHash</a> m_character = <a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_hash.html">MyStringHash</a>.<a class="code" href="struct_v_rage_1_1_utils_1_1_my_string_hash.html#a1152d628d02d88f56878ad3fbdfccab5">GetOrCompute</a>(<span class="stringliteral">&quot;Character&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> m_motionCounter = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">//MyMotionState m_motionState;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57063757d45ac87891d0cd6ed69bcd85">   67</a></span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">float</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57063757d45ac87891d0cd6ed69bcd85">m_angularDamping</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab39330a9f46c975f3d4e196525bcbeef">   68</a></span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">float</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab39330a9f46c975f3d4e196525bcbeef">m_linearDamping</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">private</span> ulong m_clusterObjectID = MyHavokCluster.CLUSTERED_OBJECT_ID_UNITIALIZED;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keyword">protected</span> ulong ClusterObjectID</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5a3592d649aa961b60525180842c32d7">   73</a></span>&#160;        {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_clusterObjectID; }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            set</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                m_clusterObjectID = value;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keywordflow">if</span> (value != MyHavokCluster.CLUSTERED_OBJECT_ID_UNITIALIZED)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    Offset = <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#a5c6aaff626dda263779a01345e190421">GetObjectOffset</a>(value);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    Offset = <a class="code" href="namespace_vector3_d.html">Vector3D</a>.Zero;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                    </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">foreach</span> (var child <span class="keywordflow">in</span> WeldInfo.Children)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                    child.Offset = Offset;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a7076ed9a88c857659afaf746ff349ed5">   89</a></span>&#160;        <span class="keyword">protected</span> <a class="code" href="namespace_vector3_d.html">Vector3D</a> Offset = <a class="code" href="namespace_vector3_d.html">Vector3D</a>.Zero;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a2daf910eca1649573e35e8aa68d04d4d">   90</a></span>&#160;        <span class="keyword">protected</span> <a class="code" href="namespace_matrix.html">Matrix</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a2daf910eca1649573e35e8aa68d04d4d">m_bodyMatrix</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac7c651b07361a7c865d13ed15e757ac3">   92</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_physics_body_component_definition.html">MyPhysicsBodyComponentDefinition</a> Definition { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a16c1affb2ed4007298bf82e292f48026">   94</a></span>&#160;        <span class="keyword">protected</span> HkWorld <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a16c1affb2ed4007298bf82e292f48026">m_world</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">public</span> HkWorld HavokWorld</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5c4191281035fc517cbfa52956c12f92">   96</a></span>&#160;        {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> IsWelded ? WeldInfo.Parent.m_world : m_world; }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">        #region Properties</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">int</span> HavokCollisionSystemID</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aaa0885ee47288ddbaf3da88392430f0a">  105</a></span>&#160;        {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">return</span> RigidBody != null ? HkGroupFilter.GetSystemGroupFromFilterInfo(RigidBody.GetCollisionFilterInfo()) : 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keyword">protected</span> set</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    RigidBody.SetCollisionFilterInfo(HkGroupFilter.CalcFilterInfo(RigidBody.Layer, value, 1, 1));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    <span class="comment">//HavokWorld.RefreshCollisionFilterOnEntity(RigidBody);//not here, its not in world yet</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    RigidBody2.SetCollisionFilterInfo(HkGroupFilter.CalcFilterInfo(RigidBody2.Layer, value, 1, 1));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="comment">//HavokWorld.RefreshCollisionFilterOnEntity(RigidBody2);</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">private</span> HkRigidBody m_rigidBody;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> HkRigidBody RigidBody</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a49b5d4e0641641042d86e94e0a888a18">  128</a></span>&#160;        {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> WeldInfo.Parent != null ? WeldInfo.Parent.RigidBody : m_rigidBody; }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keyword">protected</span> set</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">if</span> (m_rigidBody != value)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    <span class="keywordflow">if</span> (m_rigidBody != null &amp;&amp; !m_rigidBody.IsDisposed)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        m_rigidBody.ContactSoundCallback -= MyPhysicsBody_ContactSoundCallback;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        m_rigidBody.ContactPointCallback -= OnContactPointCallback;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        m_rigidBody.Activated -= OnDynamicRigidBodyActivated;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        m_rigidBody.Deactivated -= OnDynamicRigidBodyDeactivated;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    m_rigidBody = value;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    <span class="keywordflow">if</span> (m_rigidBody != null)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                        m_rigidBody.ContactPointCallback += OnContactPointCallback;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        m_rigidBody.ContactSoundCallback += MyPhysicsBody_ContactSoundCallback;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        m_rigidBody.Activated += OnDynamicRigidBodyActivated;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                        m_rigidBody.Deactivated += OnDynamicRigidBodyDeactivated;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    }                 </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab05ce66ee1ab077a864f004800d6ce86">  154</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> HkRigidBody RigidBody2 { <span class="keyword">get</span>; <span class="keyword">protected</span> set; }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keyword">public</span> delegate <span class="keywordtype">void</span> PhysicsContactHandler(ref <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html">MyContactPointEvent</a> e);</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1fce614b2f35af380f247d29271f7d50">  157</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">event</span> PhysicsContactHandler <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1fce614b2f35af380f247d29271f7d50">ContactPointCallback</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keyword">private</span> readonly HashSet&lt;HkConstraint&gt; m_constraints = <span class="keyword">new</span> HashSet&lt;HkConstraint&gt;();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keyword">private</span> readonly List&lt;HkConstraint&gt; m_constraintsAddBatch = <span class="keyword">new</span> List&lt;HkConstraint&gt;();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keyword">private</span> readonly List&lt;HkConstraint&gt; m_constraintsRemoveBatch = <span class="keyword">new</span> List&lt;HkConstraint&gt;();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">float</span> Mass</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a0f1695d312aaa0e1c7bcd23e86b0a4f0">  170</a></span>&#160;        {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    <span class="keywordflow">return</span> CharacterProxy.Mass;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="keywordflow">return</span> RigidBody.Mass;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keywordflow">if</span> (Ragdoll != null)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <span class="keywordflow">return</span> Ragdoll.Mass;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">float</span> Speed</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8cd03c51ccfca79f6fe7784cb95d88d1">  195</a></span>&#160;        {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <span class="keywordflow">return</span> LinearVelocity.Length();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">float</span> Friction</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aba474e2ac8c6c30c7ee8e300b12e0d53">  204</a></span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">return</span> RigidBody.Friction;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            set</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                RigidBody.Friction = value;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsStatic</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#af33809e1bf816abf4e92bd4847cb8c59">  216</a></span>&#160;        {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    <span class="keywordflow">return</span> RigidBody.IsFixed;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsKinematic</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a30ecdc9c982b5f8b559158293862ca9b">  226</a></span>&#160;        {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    <span class="keywordflow">return</span> !RigidBody.IsFixed &amp;&amp; RigidBody.IsFixedOrKeyframed;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// True for piston subparts only</span></div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a2d38c56aa0bda560877cde35201c4889">  236</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> IsSubpart { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a262f2ce04a77c9f489b71b63966723c5">  238</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a262f2ce04a77c9f489b71b63966723c5">CloseRigidBody</a>()</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">if</span>(IsWelded)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                WeldInfo.Parent.Unweld(<span class="keyword">this</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span>(WeldInfo.Children.Count != 0)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html">MyWeldingGroups</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html#a447ade22b30e0a2ca2b340747d56bfee">ReplaceParent</a>(<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html">MyWeldingGroups</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html#aa716bec16aa2b59e64241b4b94da95b8">Static</a>.GetGroup((<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)<a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a>), (<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)Entity, null);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(WeldInfo.Children.Count == 0, <span class="stringliteral">&quot;Closing weld parent!&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(IsWelded == <span class="keyword">false</span>, <span class="stringliteral">&quot;Closing welded physics&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            CheckRBNotInWorld();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="comment">// RigidBody.CollisionShape.Dispose();</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="comment">// RigidBody.Dispose();</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="comment">//RigidBody.ContactPointCallbackEnabled = false;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">if</span> (!RigidBody.IsDisposed) <span class="comment">//welded</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    RigidBody.Dispose();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                RigidBody = null;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="comment">// RigidBody.CollisionShape.Dispose();</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="comment">// RigidBody.Dispose();</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                RigidBody2.Dispose();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                RigidBody2 = null;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">if</span> (BreakableBody != null)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                BreakableBody.Dispose();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                BreakableBody = null;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span>(WeldedRigidBody != null)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                WeldedRigidBody.Dispose();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                WeldedRigidBody = null;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">//public abstract void CreateFromCollisionObject(HkShape shape, Vector3 center, Matrix worldTransform, HkMassProperties massProperties = null, int collisionFilter = 15/*MyPhysics.CollisionLayers.DefaultCollisionLayer*/); //TODO!</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab306a11f62f2786fea9ec5c37ca65759">  288</a></span>&#160;        <span class="keyword">public</span> HkSolverDeactivation InitialSolverDeactivation = HkSolverDeactivation.Low;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a9af88c97a053722cce8343e945282364">  290</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html">MyCharacterProxy</a> CharacterProxy { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac36dcb3b62e5221cd6dbb839ac91b7a7">  293</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> CharacterSystemGroupCollisionFilterID { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae75ead8c727b6e974761378ab51bdf65">  295</a></span>&#160;        <span class="keyword">public</span> uint CharacterCollisionFilter { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> m_isInWorld = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsInWorld</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#af034cb6be4263c0ace88a25c49cd1406">  300</a></span>&#160;        {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="comment">//if (WeldInfo.Parent != null)</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="comment">//    return WeldInfo.Parent.IsInWorld;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">return</span> m_isInWorld;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keyword">protected</span> set</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                m_isInWorld = value;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3.html">Vector3</a> LinearVelocity</div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a80c66e1efceef2bbf6efa36c408e53ea">  320</a></span>&#160;        {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    <span class="keywordflow">return</span> this.RigidBody.LinearVelocity;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <span class="keywordflow">return</span> CharacterProxy.LinearVelocity;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.IsActive)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <span class="keywordflow">return</span> Ragdoll.GetRootRigidBody().LinearVelocity;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            set</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!<span class="keywordtype">float</span>.IsNaN(value.X));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(value.Length() &lt; 1000000);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    this.RigidBody.LinearVelocity = value;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    CharacterProxy.LinearVelocity = value;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.IsActive)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    <span class="keywordflow">foreach</span> (var body <span class="keywordflow">in</span> Ragdoll.RigidBodies)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        body.LinearVelocity = value;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">float</span> LinearDamping</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#acb67154b487f22dbfbeef4588e7cc9c8">  367</a></span>&#160;        {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">return</span> this.RigidBody.LinearDamping;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            set</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    this.RigidBody.LinearDamping = value;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!<span class="keywordtype">float</span>.IsNaN(value));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                m_linearDamping = value;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">float</span> AngularDamping</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a75b976aedbb2970070374b6dd9516e44">  388</a></span>&#160;        {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordflow">return</span> this.RigidBody.AngularDamping;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            set</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <span class="keywordflow">if</span>(RigidBody != null)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    this.RigidBody.AngularDamping = value;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!<span class="keywordtype">float</span>.IsNaN(value));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                m_angularDamping = value;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3.html">Vector3</a> AngularVelocity</div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a95f9ffe372f6f4040ec658af3f961cf1">  409</a></span>&#160;        {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <span class="keywordflow">return</span> RigidBody.AngularVelocity;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    <span class="keywordflow">return</span> CharacterProxy.AngularVelocity;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.IsActive)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    <span class="keywordflow">return</span> Ragdoll.GetRootRigidBody().AngularVelocity;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            set</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!<span class="keywordtype">float</span>.IsNaN(value.X));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(value.Length() &lt; 1000000);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    this.RigidBody.AngularVelocity = value;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    CharacterProxy.AngularVelocity = value;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.IsActive)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    <span class="keywordflow">foreach</span> (var body <span class="keywordflow">in</span> Ragdoll.RigidBodies)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                        body.AngularVelocity = value;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">        #region Methods</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// Parameterless constructor for component initializer.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aeddf3315eac2b1c002f5e665a846fd85">  450</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aeddf3315eac2b1c002f5e665a846fd85">MyPhysicsBody</a>()</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a619b946fb1a4c65b3266630a7901f4f6">  458</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a619b946fb1a4c65b3266630a7901f4f6">MyPhysicsBody</a>(<a class="code" href="namespace_i_my_entity.html">IMyEntity</a> entity, <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a> flags)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="comment">//Debug.Assert(entity != null);           </span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            this.m_enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            this.<a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a> = entity;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            this.Flags = flags;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            this.IsSubpart = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordtype">void</span> MyPhysicsBody_ContactSoundCallback(ref HkContactPointEvent e)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;PhysicsBody.ContacSoundCallback&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            byte val;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">if</span> (e.EventType != HkContactPointEvent.Type.Manifold || <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html">MyAudioComponent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html#ae50758bf11335f6d8e9af590508e904f">ContactSoundsPool</a>.TryGetValue(<a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a>.EntityId, out val))</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            PlayContactSound(e);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ade535bff613e079bb3b2cfdd7e0ef498">  480</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ade535bff613e079bb3b2cfdd7e0ef498">Close</a>()</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="comment">//MyPhysics.AssertThread();</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;MyPhysicsBody::Close()&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            CloseRagdoll();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            base.Close();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                CharacterProxy.Dispose();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                CharacterProxy = null;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae41ee0ca0890cdc77a8899a6d1aae812">  507</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae41ee0ca0890cdc77a8899a6d1aae812">AddForce</a>(<a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">MyPhysicsForceType</a> type, <a class="code" href="namespace_vector3.html">Vector3</a>? force, <a class="code" href="namespace_vector3_d.html">Vector3D</a>? position, <a class="code" href="namespace_vector3.html">Vector3</a>? torque)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            force.AssertIsValid();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            position.<a class="code" href="struct_v_rage_math_1_1_vector3_d.html#ae093fe8e5282daf2a22a9377a228fcaa">AssertIsValid</a>();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            torque.AssertIsValid();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="comment">//System.Diagnostics.Debug.Assert(IsInWorld == true || IsWelded);</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">if</span> (IsStatic)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">if</span> (MyDebugDrawSettings.DEBUG_DRAW_PHYSICS_FORCES)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                MyPhysicsDebugDraw.DebugDrawAddForce(<span class="keyword">this</span>, type, force, position, torque);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="namespace_matrix.html">Matrix</a> transform;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">MyPhysicsForceType</a>.ADD_BODY_FORCE_AND_BODY_TORQUE:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                        <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                            transform = RigidBody.GetRigidBodyMatrix();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                            AddForceTorqueBody(force, torque, RigidBody, ref transform);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                        }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                        <span class="keywordflow">if</span> (CharacterProxy != null &amp;&amp; CharacterProxy.GetHitRigidBody() != null)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                            transform = <a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a>.WorldMatrix;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                            AddForceTorqueBody(force, torque, CharacterProxy.GetHitRigidBody(), ref transform);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                        }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.InWorld &amp;&amp; !Ragdoll.IsKeyframed)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                            transform = <a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a>.WorldMatrix;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                            ApplyForceTorqueOnRagdoll(force, torque, Ragdoll, ref transform);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">MyPhysicsForceType</a>.APPLY_WORLD_IMPULSE_AND_WORLD_ANGULAR_IMPULSE:</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        ApplyImplusesWorld(force, position, torque, RigidBody);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                        <span class="keywordflow">if</span> (CharacterProxy != null &amp;&amp; force.HasValue &amp;&amp; position.HasValue)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                            CharacterProxy.ApplyLinearImpulse(force.Value);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                        }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                        <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.InWorld &amp;&amp; !Ragdoll.IsKeyframed)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                            ApplyImpuseOnRagdoll(force, position, torque, Ragdoll);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">MyPhysicsForceType</a>.APPLY_WORLD_FORCE:</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                        ApplyForceWorld(force, position, RigidBody);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                        <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; Ragdoll.InWorld &amp;&amp; !Ragdoll.IsKeyframed)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                        {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                            ApplyForceOnRagdoll(force, position, Ragdoll);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                        <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Unhandled enum!&quot;</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ApplyForceWorld(<a class="code" href="namespace_vector3.html">Vector3</a>? force, <a class="code" href="namespace_vector3_d.html">Vector3D</a>? position, HkRigidBody rigidBody)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keywordflow">if</span> (rigidBody == null || force == null || MyUtils.IsZero(force.Value))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">if</span> (position.HasValue)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <a class="code" href="namespace_vector3.html">Vector3</a> point = position.Value - Offset;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                rigidBody.ApplyForce(<a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a>, force.Value, point);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                rigidBody.ApplyForce(<a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a>, force.Value);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> ApplyImplusesWorld(<a class="code" href="namespace_vector3.html">Vector3</a>? force, <a class="code" href="namespace_vector3_d.html">Vector3D</a>? position, <a class="code" href="namespace_vector3.html">Vector3</a>? torque, HkRigidBody rigidBody)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">if</span> (rigidBody == null)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span> (force.HasValue &amp;&amp; position.HasValue)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                rigidBody.ApplyPointImpulse(force.Value, (<a class="code" href="namespace_vector3.html">Vector3</a>)(position.Value - Offset));</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="keywordflow">if</span> (torque.HasValue)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                rigidBody.ApplyAngularImpulse(torque.Value * <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a> * MyFakes.SIMULATION_SPEED);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> AddForceTorqueBody(<a class="code" href="namespace_vector3.html">Vector3</a>? force, <a class="code" href="namespace_vector3.html">Vector3</a>? torque, HkRigidBody rigidBody, ref <a class="code" href="namespace_matrix.html">Matrix</a> transform)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="namespace_matrix.html">Matrix</a> tempM = transform;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            tempM.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a> = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">if</span> (force != null &amp;&amp; !MyUtils.<a class="code" href="struct_v_rage_math_1_1_vector3.html#aa51d4d112c5b6e87c54956a4aafd4812">IsZero</a>(force.Value))</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <a class="code" href="namespace_vector3.html">Vector3</a> tmpForce = <a class="code" href="namespace_vector3.html">Vector3</a>.Transform(force.Value, tempM);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                rigidBody.ApplyLinearImpulse(tmpForce * <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a> * MyFakes.SIMULATION_SPEED);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">if</span> (torque != null &amp;&amp; !MyUtils.<a class="code" href="struct_v_rage_math_1_1_vector3.html#aa51d4d112c5b6e87c54956a4aafd4812">IsZero</a>(torque.Value))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <a class="code" href="namespace_vector3.html">Vector3</a> tmpTorque = <a class="code" href="namespace_vector3.html">Vector3</a>.Transform(torque.Value, tempM);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                rigidBody.ApplyAngularImpulse(tmpTorque * <a class="code" href="namespace_v_rage.html">VRage</a>.<a class="code" href="namespace_v_rage_1_1_game.html">Game</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a> * MyFakes.SIMULATION_SPEED);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4f82f84e2c12ddc51ccd06493afb7984">  625</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4f82f84e2c12ddc51ccd06493afb7984">ApplyImpulse</a>(<a class="code" href="namespace_vector3.html">Vector3</a> impulse, <a class="code" href="namespace_vector3_d.html">Vector3D</a> pos)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            AddForce(<a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">MyPhysicsForceType</a>.APPLY_WORLD_IMPULSE_AND_WORLD_ANGULAR_IMPULSE, impulse, pos, null);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57fc1ccb7a15bbe525654f4948e831d2">  633</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57fc1ccb7a15bbe525654f4948e831d2">ClearSpeed</a>()</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="comment">//RigidBody.Clear();</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="comment">//RigidBody.LinearAcceleration = Vector3.Zero;</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="comment">//  RigidBody.ClearForces();</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                RigidBody.LinearVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                RigidBody.AngularVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                CharacterProxy.LinearVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                CharacterProxy.AngularVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                CharacterProxy.PosX = 0;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                CharacterProxy.PosY = 0;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                CharacterProxy.Elevate = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="comment">//RigidBody.AngularAcceleration = Vector3.Zero;</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a67d27705a38cda701a422bd721400e2f">  659</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a67d27705a38cda701a422bd721400e2f">Clear</a>()</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            ClearSpeed();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8a1109f9da218443cc841df0a8b414cf">  664</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8a1109f9da218443cc841df0a8b414cf">DebugDraw</a>()</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span> (MyDebugDrawSettings.DEBUG_DRAW_CONSTRAINTS)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> Constraints)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    <span class="keywordflow">if</span> (c.IsDisposed)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    <a class="code" href="namespace_color.html">Color</a> col = <a class="code" href="namespace_color.html">Color</a>.Green;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    <span class="keywordflow">if</span> (!IsConstraintValid(c))</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        col = <a class="code" href="namespace_color.html">Color</a>.Red;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <span class="keywordflow">if</span> (!c.Enabled)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                        col = <a class="code" href="namespace_color.html">Color</a>.Yellow;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <a class="code" href="namespace_vector3.html">Vector3</a> pivotA, pivotB;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    c.GetPivotsInWorld(out pivotA, out pivotB);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    var pos = ClusterToWorld(pivotA);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(pos, 0.2f, col, 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawText3D(pos, i + <span class="stringliteral">&quot; A&quot;</span>, <a class="code" href="namespace_color.html">Color</a>.White, 0.7f, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    <a class="code" href="namespace_vector3.html">Vector3</a> pos1 = pos;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                  </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    pos = ClusterToWorld(pivotB);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(pos, 0.2f, col, 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawText3D(pos, i+ <span class="stringliteral">&quot; B&quot;</span>, <a class="code" href="namespace_color.html">Color</a>.White, 0.7f, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    <a class="code" href="namespace_my_render_proxy.html">MyRenderProxy</a>.DebugDrawLine3D(pos1,pos,col,col,<span class="keyword">false</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    i++;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">if</span> (MyDebugDrawSettings.DEBUG_DRAW_INERTIA_TENSORS &amp;&amp; RigidBody != null)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                var com = ClusterToWorld(RigidBody.CenterOfMassWorld);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawLine3D(com, com + RigidBody.AngularVelocity, <a class="code" href="namespace_color.html">Color</a>.Blue, <a class="code" href="namespace_color.html">Color</a>.Red, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                var invMass = 1/RigidBody.Mass;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                var diag = RigidBody.InertiaTensor.Scale;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                var betSq = (diag.X - diag.Y + diag.Z) * invMass * 6;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                var gamaSq = diag.X * invMass * 12 - betSq;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                var alpSq = diag.Z * invMass * 12 - betSq;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                var scale = 1.01f * 0.5f;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                var he = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a>(<a class="code" href="namespace_math.html">Math</a>.Sqrt(alpSq), <a class="code" href="namespace_math.html">Math</a>.Sqrt(betSq), <a class="code" href="namespace_math.html">Math</a>.Sqrt(gamaSq)) * scale;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                <a class="code" href="struct_v_rage_math_1_1_my_oriented_bounding_box_d.html">MyOrientedBoundingBoxD</a> obb = <span class="keyword">new</span> <a class="code" href="struct_v_rage_math_1_1_my_oriented_bounding_box_d.html">MyOrientedBoundingBoxD</a>(<span class="keyword">new</span> <a class="code" href="_my_camera_8cs.html#ae65023afd5ab6af4293a2e4ea3aca407">BoundingBoxD</a>(-he, he), <a class="code" href="namespace_matrix_d.html">MatrixD</a>.Identity);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                obb.Transform(RigidBody.GetRigidBodyMatrix());</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                obb.Center = CenterOfMassWorld;<span class="comment">// RigidBody.GetBody().ClusterToWorld(RigidBody.CenterOfMassWorld);</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawOBB(obb, <a class="code" href="namespace_color.html">Color</a>.Purple, 0.05f, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="comment">//VRageRender.MyRenderProxy.DebugDrawText3D(obb.Center, Entity.ToString(), Color.Purple, 0.5f, false);</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span> (MyDebugDrawSettings.DEBUG_DRAW_PHYSICS_SHAPES &amp;&amp; !IsWelded)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> alpha = 0.3f;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <span class="comment">//if (!Enabled)</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                <span class="comment">//    return;</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null &amp;&amp; BreakableBody != null)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                    <a class="code" href="namespace_vector3_d.html">Vector3D</a> com = <a class="code" href="namespace_vector3_d.html">Vector3D</a>.Transform((<a class="code" href="namespace_vector3_d.html">Vector3D</a>)BreakableBody.BreakableShape.CoM, RigidBody.GetRigidBodyMatrix()) + Offset;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    <a class="code" href="namespace_color.html">Color</a> color = RigidBody.GetMotionType() != <a class="code" href="namespace_havok.html">Havok</a>.HkMotionType.Box_Inertia ? <a class="code" href="namespace_color.html">Color</a>.Gray : RigidBody.IsActive ? <a class="code" href="namespace_color.html">Color</a>.Red : <a class="code" href="namespace_color.html">Color</a>.Blue;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                    <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawSphere(RigidBody.CenterOfMassWorld + Offset, 0.2f, color, 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.DebugDrawAxis(<a class="code" href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">Entity</a>.PositionComp.WorldMatrix, 0.2f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    index = 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                    <a class="code" href="namespace_matrix.html">Matrix</a> rbMatrix = RigidBody.GetRigidBodyMatrix();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                    <a class="code" href="namespace_matrix_d.html">MatrixD</a> worldMatrix = <a class="code" href="namespace_matrix_d.html">MatrixD</a>.CreateWorld(rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a> + Offset, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a1c7aab6a6146fa0ec24490f53e2920c3">Forward</a>, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a08fcf9fbcb9ba375a997613dcc7e4611">Up</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                    MyPhysicsDebugDraw.DrawCollisionShape(RigidBody.GetShape(), worldMatrix, alpha, ref index);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    index = 0;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    <a class="code" href="namespace_matrix.html">Matrix</a> rbMatrix = RigidBody2.GetRigidBodyMatrix();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    <a class="code" href="namespace_matrix_d.html">MatrixD</a> worldMatrix = <a class="code" href="namespace_matrix_d.html">MatrixD</a>.CreateWorld(rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a> + Offset, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a1c7aab6a6146fa0ec24490f53e2920c3">Forward</a>, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a08fcf9fbcb9ba375a997613dcc7e4611">Up</a>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                    MyPhysicsDebugDraw.DrawCollisionShape(RigidBody2.GetShape(), worldMatrix, alpha, ref index);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    index = 0;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <span class="comment">//MatrixD characterTransform = MatrixD.CreateWorld(CharacterProxy.Position + offset, CharacterProxy.Forward, CharacterProxy.Up);</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    <a class="code" href="namespace_matrix.html">Matrix</a> rbMatrix = CharacterProxy.GetRigidBodyTransform();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    <a class="code" href="namespace_matrix_d.html">MatrixD</a> worldMatrix = <a class="code" href="namespace_matrix_d.html">MatrixD</a>.CreateWorld(rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a> + Offset, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a1c7aab6a6146fa0ec24490f53e2920c3">Forward</a>, rbMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a08fcf9fbcb9ba375a997613dcc7e4611">Up</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    MyPhysicsDebugDraw.DrawCollisionShape(CharacterProxy.GetShape(), worldMatrix, alpha, ref index);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa4bd2d62b93b6b6fd509f519ed6e9784">  766</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa4bd2d62b93b6b6fd509f519ed6e9784">CreateFromCollisionObject</a>(HkShape shape, <a class="code" href="namespace_vector3.html">Vector3</a> center, <a class="code" href="namespace_matrix_d.html">MatrixD</a> worldTransform, HkMassProperties? massProperties = null, <span class="keywordtype">int</span> collisionFilter = <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">CollisionLayers</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#a3a768d8d7bed4fbc66375329775635bf">DefaultCollisionLayer</a>)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="comment">//jn:TODO: is this safe? repro: destruction of cockpit -&gt; character gets spawned</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="comment">//MyPhysics.AssertThread();</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.GetRenderProfiler().StartProfilingBlock(<span class="stringliteral">&quot;MyPhysicsBody::CreateFromCollisionObject()&quot;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(RigidBody == null, <span class="stringliteral">&quot;Must be removed from scene and null&quot;</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            CloseRigidBody();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            Center = center;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            CanUpdateAccelerations = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="comment">//m_motionState = new MyMotionState(worldTransform);</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            CreateBody(ref shape, massProperties);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            RigidBody.UserObject = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            RigidBody.SetWorldMatrix(worldTransform);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            RigidBody.Layer = collisionFilter;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(Flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DISABLE_COLLISION_RESPONSE) &gt; 0)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                RigidBody.Layer = <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">CollisionLayers</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#ac0f5409ebc3c7def4130acd13caff065">NoCollisionLayer</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(Flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DOUBLED_KINEMATIC) &gt; 0 &amp;&amp; MyFakes.ENABLE_DOUBLED_KINEMATIC)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                HkRigidBodyCinfo rbInfo2 = <span class="keyword">new</span> HkRigidBodyCinfo();</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                rbInfo2.AngularDamping = m_angularDamping;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                rbInfo2.LinearDamping = m_linearDamping;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                rbInfo2.Shape = shape;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                rbInfo2.MotionType = HkMotionType.Keyframed;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                rbInfo2.QualityType = HkCollidableQualityType.Keyframed;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                RigidBody2 = <span class="keyword">new</span> HkRigidBody(rbInfo2);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                RigidBody2.UserObject = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                RigidBody2.SetWorldMatrix(worldTransform);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="comment">//m_motionState.Body = this;</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <a class="code" href="namespace_v_rage_render.html">VRageRender</a>.<a class="code" href="class_v_rage_render_1_1_my_render_proxy.html">MyRenderProxy</a>.GetRenderProfiler().EndProfilingBlock();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3f6d3a202e5f1d1a3838f6781431be49">  812</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3f6d3a202e5f1d1a3838f6781431be49">CreateBody</a>(ref HkShape shape, HkMassProperties? massProperties)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;CreateBody&quot;</span>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            HkRigidBodyCinfo rbInfo = <span class="keyword">new</span> HkRigidBodyCinfo();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            rbInfo.AngularDamping = m_angularDamping;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            rbInfo.LinearDamping = m_linearDamping;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            rbInfo.Shape = shape;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            rbInfo.SolverDeactivation = InitialSolverDeactivation;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            rbInfo.ContactPointCallbackDelay = ContactPointDelay;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="keywordflow">if</span> (massProperties.HasValue)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                rbInfo.SetMassProperties(massProperties.Value);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            GetInfoFromFlags(rbInfo, Flags);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            RigidBody = <span class="keyword">new</span> HkRigidBody(rbInfo);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1a16d4bac5b0cd8ca6fa637b0d975867">  835</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1a16d4bac5b0cd8ca6fa637b0d975867">GetInfoFromFlags</a>(HkRigidBodyCinfo rbInfo, <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a> flags)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_STATIC) &gt; 0)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                rbInfo.MotionType = HkMotionType.Fixed;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Fixed;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_BULLET) &gt; 0)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                rbInfo.MotionType = HkMotionType.Dynamic;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Bullet;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_KINEMATIC) &gt; 0)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                rbInfo.MotionType = HkMotionType.Keyframed;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Keyframed;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DOUBLED_KINEMATIC) &gt; 0)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                rbInfo.MotionType = HkMotionType.Dynamic;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Moving;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DISABLE_COLLISION_RESPONSE) &gt; 0)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                rbInfo.MotionType = HkMotionType.Fixed;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Fixed;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="comment">//rbInfo.CollisionResponse = HkResponseType.None;</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DEBRIS) &gt; 0)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                rbInfo.MotionType = HkMotionType.Dynamic;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Debris;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(flags &amp; <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_KEYFRAMED_REPORTING) &gt; 0)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                rbInfo.MotionType = HkMotionType.Keyframed;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.KeyframedReporting;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                rbInfo.MotionType = HkMotionType.Dynamic;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                rbInfo.QualityType = HkCollidableQualityType.Moving;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#adf2fceabd7802b93acbd8e72dfdb5aee">  880</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#adf2fceabd7802b93acbd8e72dfdb5aee">PlayContactSound</a>(HkContactPointEvent value, <span class="keywordtype">float</span> volume = 0)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;PlayContactSound&quot;</span>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            var bodyA = value.Base.BodyA.GetBody();</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            var bodyB = value.Base.BodyB.GetBody();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <span class="keywordflow">if</span> (bodyA == null || bodyB == null)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            ProfilerShort.BeginNextBlock(<span class="stringliteral">&quot;GetMaterial&quot;</span>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            var worldPos = ClusterToWorld(value.ContactPoint.Position);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            var materialA = bodyA.GetMaterialAt(worldPos + value.ContactPoint.Normal * 0.1f);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            var materialB = bodyB.GetMaterialAt(worldPos - value.ContactPoint.Normal * 0.1f);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <span class="comment">/*if (materialA == m_character || materialB == m_character)</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">            {</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">                ProfilerShort.End();</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">                return;</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">            }*/</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;Lambdas&quot;</span>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            var colision = value.Base;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            Func&lt;bool&gt; canHear = () =&gt;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a> != null)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    var entity = <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a>.<a class="code" href="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity.html#a3d99482fd65886b42c7a2c5ff6793af5">Entity</a>.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a2bcca263645e94f5ed3a0108366ffc3a">GetTopMostParent</a>();</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    <span class="keywordflow">return</span> (entity == value.GetPhysicsBody(0).Entity || entity == value.GetPhysicsBody(1).Entity);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            };</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            Func&lt;bool&gt; shouldPlay2D = () =&gt; <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a> != null &amp;&amp; <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a>.<a class="code" href="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity.html#a3d99482fd65886b42c7a2c5ff6793af5">Entity</a> is <a class="code" href="class_sandbox_1_1_game_1_1_entities_1_1_character_1_1_my_character.html">MyCharacter</a> &amp;&amp; (</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                            <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a>.<a class="code" href="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity.html#a3d99482fd65886b42c7a2c5ff6793af5">Entity</a>.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a0cc308f11c2653511ef193ce14053e70">Components</a> == value.GetPhysicsBody(0).<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_entity_component_container.html#ab5c941e7fcfec354bd634605e52efed4">Entity</a> || <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">MySession</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Static</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">ControlledEntity</a>.<a class="code" href="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity.html#a3d99482fd65886b42c7a2c5ff6793af5">Entity</a>.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a0cc308f11c2653511ef193ce14053e70">Components</a> == value.GetPhysicsBody(1).<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_entity_component_container.html#ab5c941e7fcfec354bd634605e52efed4">Entity</a>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            ProfilerShort.BeginNextBlock(<span class="stringliteral">&quot;Volume&quot;</span>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <span class="keywordflow">if</span> (volume == 0)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="comment">//var vel = value.Base.BodyA.LinearVelocity - value.Base.BodyB.LinearVelocity;</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                <span class="comment">//if (System.Math.Abs(Vector3.Normalize(vel).Dot(value.ContactPoint.Normal)) &lt; 0.7f)\</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">                //var val = System.Math.Abs(Vector3.Normalize(vel).Dot(value.ContactPoint.Normal)) * vel.Length();</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="comment">//var mass = value.Base.BodyA.Mass;</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="comment">//var massB = value.Base.BodyB.Mass;</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                <span class="comment">//mass = mass == 0 ? massB : massB == 0 ? mass : mass &lt; massB ? mass : massB; // select smaller mass &gt; 0</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                <span class="comment">//mass /= 40; //reference mass</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                <span class="comment">//val *= mass;</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_math.html">Math</a>.Abs(value.SeparatingVelocity) &lt; 10f)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    volume = 0.5f + <a class="code" href="namespace_math.html">Math</a>.Abs(value.SeparatingVelocity) / 20f;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                    volume = 1f;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            ProfilerShort.BeginNextBlock(<span class="stringliteral">&quot;PlaySound&quot;</span>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordtype">bool</span> firstOneIsLighter = bodyB.Entity is <a class="code" href="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base.html">MyVoxelBase</a> || bodyB.Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a6bc755f3e700ce49c042a1a25f8ea854">Physics</a> == null;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordflow">if</span> (firstOneIsLighter == <span class="keyword">false</span> &amp;&amp; bodyA.Entity.Physics != null &amp;&amp; bodyA.Entity.Physics.IsStatic == <span class="keyword">false</span> &amp;&amp; (bodyB.Entity.Physics.IsStatic || bodyA.Entity.Physics.Mass &lt; bodyB.Entity.Physics.Mass))</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                firstOneIsLighter = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">if</span> (firstOneIsLighter)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html">MyAudioComponent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html#a515ec5ab1425cb9fe9971f36a2561dfd">PlayContactSound</a>(bodyA.Entity.EntityId, m_startCue, worldPos, materialA, materialB, volume, canHear, surfaceEntity: (<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)bodyB.Entity, separatingVelocity: <a class="code" href="namespace_math.html">Math</a>.Abs(value.SeparatingVelocity));</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                <a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html">MyAudioComponent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html#a515ec5ab1425cb9fe9971f36a2561dfd">PlayContactSound</a>(bodyB.Entity.EntityId, m_startCue, worldPos, materialB, materialA, volume, canHear, surfaceEntity: (<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)bodyA.Entity, separatingVelocity: <a class="code" href="namespace_math.html">Math</a>.Abs(value.SeparatingVelocity));</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a7fbb512531ee4f3849399b00c83001bf">  944</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a7fbb512531ee4f3849399b00c83001bf">CreateCharacterCollision</a>(<a class="code" href="namespace_vector3.html">Vector3</a> center, <span class="keywordtype">float</span> characterWidth, <span class="keywordtype">float</span> characterHeight,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                                    <span class="keywordtype">float</span> crouchHeight, <span class="keywordtype">float</span> ladderHeight, <span class="keywordtype">float</span> headSize, <span class="keywordtype">float</span> headHeight,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                                                    <a class="code" href="namespace_matrix_d.html">MatrixD</a> worldTransform, <span class="keywordtype">float</span> mass, ushort collisionLayer, <span class="keywordtype">bool</span> isOnlyVertical, <span class="keywordtype">float</span> maxSlope, <span class="keywordtype">float</span> maxImpulse, <span class="keywordtype">float</span> maxSpeedRelativeToShip, <span class="keywordtype">bool</span> networkProxy,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                                    <span class="keywordtype">float</span>? maxForce = null)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            Center = center;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            CanUpdateAccelerations = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keywordflow">if</span> (networkProxy)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            { <span class="comment">//create kinematic body for network proxy</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                HkShape shape = <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html">MyCharacterProxy</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html#a692028299e363365c08f0407995673e1">CreateCharacterShape</a>(characterHeight, characterWidth, characterHeight + headHeight, headSize, 0.0f);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                HkMassProperties massProperties = <span class="keyword">new</span> HkMassProperties();</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                massProperties.Mass = mass;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                massProperties.InertiaTensor = <a class="code" href="namespace_matrix.html">Matrix</a>.Identity;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                massProperties.Volume = characterWidth * characterWidth * (characterHeight + 2 * characterWidth);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                CreateFromCollisionObject(shape, center, worldTransform, massProperties, collisionLayer);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                CanUpdateAccelerations = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a> transformedCenter = <a class="code" href="namespace_vector3.html">Vector3</a>.TransformNormal(Center, worldTransform);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <a class="code" href="namespace_matrix.html">Matrix</a> worldTransformCentered = <a class="code" href="namespace_matrix.html">Matrix</a>.CreateWorld(transformedCenter + worldTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a>, worldTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#ad0c304a6cdf9cafece7d3e7cd72f2d3b">Forward</a>, worldTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#ae858a625b2b3d4b5e6bd3ffd7f194ff2">Up</a>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            CharacterProxy = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html">MyCharacterProxy</a>(</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="_my_physics_body_8cs.html#a1cd8713ba6aa75194cf8496a382faced">DYNAMIC_CHARACTER_CONTROLLER</a></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="keyword">true</span>,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;#<span class="keywordflow">else</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="keyword">false</span>,</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;#endif</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; <span class="keyword">true</span>, characterWidth, characterHeight,</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        crouchHeight, ladderHeight, headSize, headHeight,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; worldTransformCentered.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a>,</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                worldTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#ae858a625b2b3d4b5e6bd3ffd7f194ff2">Up</a>, worldTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#ad0c304a6cdf9cafece7d3e7cd72f2d3b">Forward</a>, mass,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                <span class="keyword">this</span>,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                isOnlyVertical,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                maxSlope,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                maxImpulse,</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                maxSpeedRelativeToShip,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                maxForce);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            CharacterProxy.GetRigidBody().ContactPointCallbackDelay = 0;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4b18a415223467f77321139de73c69d6">  989</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4b18a415223467f77321139de73c69d6">ActivateCollision</a>() { }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aad4b0646ca93d616b2ff44b48de55041">  994</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aad4b0646ca93d616b2ff44b48de55041">Deactivate</a>()</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordflow">if</span> (ClusterObjectID != <a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">MyClusterTree</a>.<a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html#a72eacc37d4fa5e58be5b698703ad5de3">CLUSTERED_OBJECT_ID_UNITIALIZED</a>)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                UnweldAll(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <span class="keywordflow">if</span> (IsWelded)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    Unweld(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#abb00c832708d42279de12226c1994444">RemoveObject</a>(ClusterObjectID);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                    ClusterObjectID = MyHavokCluster.CLUSTERED_OBJECT_ID_UNITIALIZED;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    CheckRBNotInWorld();</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CheckRBNotInWorld()</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null &amp;&amp; RigidBody.InWorld)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;RB in world after deactivation.&quot;</span>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <a class="code" href="namespace_sandbox.html">Sandbox</a>.<a class="code" href="namespace_sandbox_1_1_engine.html">Engine</a>.<a class="code" href="namespace_sandbox_1_1_engine_1_1_networking.html">Networking</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper.html">MyAnalyticsHelper</a>.ReportActivityStart((<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)Entity, <span class="stringliteral">&quot;RigidBody in world after deactivation&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;DevNote&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                RigidBody.RemoveFromWorld();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null &amp;&amp; RigidBody2.InWorld)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;RB in world after deactivation.&quot;</span>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                RigidBody2.RemoveFromWorld();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae9cc74950103b20467d14b1b5ba2394f"> 1025</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae9cc74950103b20467d14b1b5ba2394f">Deactivate</a>(<span class="keywordtype">object</span> world)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(world == m_world, <span class="stringliteral">&quot;Inconsistency in clusters!&quot;</span>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="keywordflow">if</span> (IsRagdollModeActive)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                ReactivateRagdoll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                CloseRagdollMode(world as HkWorld);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">// MW: activate simulation island when a physics body is removed</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">if</span> (IsInWorld &amp;&amp; RigidBody != null &amp;&amp; !RigidBody.IsActive)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="keywordflow">if</span> (!RigidBody.IsFixed)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                    RigidBody.Activate();</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <a class="code" href="namespace_bounding_box_d.html">BoundingBoxD</a> worldBox = Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">PositionComp</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#aabab933a8121949c2643215e51550fc7">WorldAABB</a>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    worldBox.<a class="code" href="struct_v_rage_math_1_1_bounding_box_d.html#a2d1f66c2a4a842550650c04c20a275dd">Inflate</a>(0.5f);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#ac06ef55903985473b0951709f60ac782">ActivateInBox</a>(ref worldBox);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">if</span> (BreakableBody != null &amp;&amp; m_world.DestructionWorld != null)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                m_world.DestructionWorld.RemoveBreakableBody(BreakableBody);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RigidBody != null &amp;&amp; !RigidBody.IsDisposed)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                m_world.RemoveRigidBody(RigidBody);                </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null &amp;&amp; !RigidBody2.IsDisposed)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                m_world.RemoveRigidBody(RigidBody2);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                CharacterProxy.Deactivate(m_world);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraints)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;               <span class="keywordflow">if</span> (constraint.IsDisposed) </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                   <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;               m_world.RemoveConstraint(constraint);             </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            CheckRBNotInWorld();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            m_world = null;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            IsInWorld = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div>
<div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a93b2e483324c18f4457fe1dee3bbb6c6"> 1080</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a93b2e483324c18f4457fe1dee3bbb6c6">DeactivateBatch</a>(<span class="keywordtype">object</span> world)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(world == m_world, <span class="stringliteral">&quot;Inconsistency in clusters!&quot;</span>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <span class="keywordflow">if</span> (IsRagdollModeActive)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                ReactivateRagdoll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                CloseRagdollMode(world as HkWorld);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="keywordflow">if</span> (BreakableBody != null &amp;&amp; m_world.DestructionWorld != null)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                m_world.DestructionWorld.RemoveBreakableBody(BreakableBody);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                m_world.RemoveRigidBodyBatch(RigidBody);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                m_world.RemoveRigidBodyBatch(RigidBody2);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                CharacterProxy.Deactivate(m_world);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraints)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <span class="keywordflow">if</span> (IsConstraintValid(constraint) &amp;&amp; constraint.InWorld)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                    m_constraintsRemoveBatch.Add(constraint);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Trying to remove invalid constraint!&quot;</span>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            m_world = null;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            IsInWorld = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a94c37207743db91eb4f99b6e941125c8"> 1119</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a94c37207743db91eb4f99b6e941125c8">FinishAddBatch</a>()</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            ActivateCollision();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraintsAddBatch)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                <span class="keywordflow">if</span> (IsConstraintValid(constraint))</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                    m_world.AddConstraint(constraint);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Trying to add invalid constraint!&quot;</span>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            m_constraintsAddBatch.Clear();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                <span class="comment">//has to be called after all entities are in world</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <span class="comment">//otherwise character will fly(jetpack on) through obstacles after reorder clusters</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                var characterBody = CharacterProxy.GetRigidBody();</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                <span class="keywordflow">if</span>(characterBody != null)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    m_world.RefreshCollisionFilterOnEntity(characterBody); </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="keywordflow">if</span> (ReactivateRagdoll)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                GetRigidBodyMatrix(out m_bodyMatrix);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                ActivateRagdoll(m_bodyMatrix);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                ReactivateRagdoll = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div>
<div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#af61d511349a41b67cf85aa40f66c685b"> 1152</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#af61d511349a41b67cf85aa40f66c685b">FinishRemoveBatch</a>(<span class="keywordtype">object</span> userData)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            HkWorld world = (HkWorld)userData;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraintsRemoveBatch)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                <span class="keywordflow">if</span> (IsConstraintValid(constraint) &amp;&amp; constraint.InWorld)</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    <span class="comment">//System.Diagnostics.Debug.Assert(world.RigidBodies.Contains(constraint.RigidBodyA), &quot;Object was removed prior to constraint&quot;);</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    <span class="comment">//System.Diagnostics.Debug.Assert(world.RigidBodies.Contains(constraint.RigidBodyB), &quot;Object was removed prior to constraint&quot;);</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    world.RemoveConstraint(constraint);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                       <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Trying to remove invalid constraint!&quot;</span>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <span class="keywordflow">if</span> (IsRagdollModeActive)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                ReactivateRagdoll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                CloseRagdollMode(world);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            m_constraintsRemoveBatch.Clear();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        }</div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae39b77ca7a52b81e2e87bc41cfc8894b"> 1179</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae39b77ca7a52b81e2e87bc41cfc8894b">ForceActivate</a>()</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="keywordflow">if</span> (IsInWorld)</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    RigidBody.ForceActivate();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    m_world.ActiveRigidBodies.Add(RigidBody);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsMoving</div>
<div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aee35c103c1e5fc271b13ed77a69d2f3a"> 1195</a></span>&#160;        {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> !<a class="code" href="namespace_vector3.html">Vector3</a>.IsZero(LinearVelocity) || !<a class="code" href="namespace_vector3.html">Vector3</a>.IsZero(AngularVelocity); }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3.html">Vector3</a> <a class="code" href="namespace_v_rage_1_1_game.html#aea369121ace94073194cb1b33def465ea8a88c39cef668fb55f188af09665bd40">Gravity</a></div>
<div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a544fc5e1739d73495350e6bb0abb0792"> 1200</a></span>&#160;        {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a>)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                    <span class="keywordflow">return</span> this.RigidBody.Gravity;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                    <span class="keywordflow">return</span> CharacterProxy.Gravity;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ad24462a328026e003f84e6fbf50fbf48"> 1222</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ad24462a328026e003f84e6fbf50fbf48">OnMotion</a>(HkRigidBody rbo, <span class="keywordtype">float</span> step, <span class="keywordtype">bool</span> fromParent = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <span class="keywordflow">if</span> (rbo == RigidBody2)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(rbo == RigidBody);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;         </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">if</span> (Entity == null)</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <span class="keywordflow">if</span> (!IsSubpart &amp;&amp; (Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ad324c3ff85ae9293cdef792963205093">Parent</a> != null)) <span class="comment">//Parent should take care of moving children but now for piston subpart</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keywordflow">if</span> (this.Flags == <a class="code" href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">RigidBodyFlag</a>.RBF_DISABLE_COLLISION_RESPONSE)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">if</span> (IsPhantom)</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            ProfilerShort.Begin(RigidBody2 != null ? <span class="stringliteral">&quot;Double kinematic&quot;</span> : <span class="stringliteral">&quot;Normal&quot;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;Update acceleration&quot;</span>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="keywordflow">if</span> (CanUpdateAccelerations)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                UpdateAccelerations();</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                <span class="comment">// To prevent disconnect movement between dynamic and kinematic</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                <span class="comment">// Setting motion to prevent body activation (we don&#39;t want to activate kinematic body)</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                ProfilerShort.Begin(<span class="stringliteral">&quot;Set doubled body&quot;</span>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                <span class="comment">//RigidBody2.Motion.SetWorldMatrix(rbo.GetRigidBodyMatrix());</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                                  </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                <a class="code" href="namespace_matrix.html">Matrix</a> mt = rbo.PredictRigidBodyMatrix(<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a>, HavokWorld);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                <a class="code" href="namespace_quaternion.html">Quaternion</a> nextOrientation = <a class="code" href="namespace_quaternion.html">Quaternion</a>.CreateFromRotationMatrix(mt);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <a class="code" href="namespace_vector4.html">Vector4</a> nextPosition = <span class="keyword">new</span> <a class="code" href="_my_texture_atlas_utils_8cs.html#a9e9b0feb20482f58c1b986d351db5d1e">Vector4</a>(mt.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a>.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">X</a>, mt.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a>.<a class="code" href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">Y</a>, mt.<a class="code" href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">Translation</a>.<a class="code" href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">Z</a>, 0);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                HkKeyFrameUtility.ApplyHardKeyFrame(ref nextPosition, ref nextOrientation, 1.0f/<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html">MyEngineConstants</a>.<a class="code" href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">UPDATE_STEP_SIZE_IN_SECONDS</a>, RigidBody2);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;              </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="comment">//Console.WriteLine(&quot;Rb Omg:{0} {1} {2} Omg2:{3} {4} {5}\n&quot;, rbo.AngularVelocity.X, rbo.AngularVelocity.Y, rbo.AngularVelocity.Z, RigidBody2.AngularVelocity.X, RigidBody2.AngularVelocity.Y, RigidBody2.AngularVelocity.Z);</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                <span class="comment">//Console.WriteLine(&quot;LV:{0} {1} {2} LV2:{3} {4} {5}\n&quot;, rbo.LinearVelocity.X, rbo.LinearVelocity.Y, rbo.LinearVelocity.Z, RigidBody2.LinearVelocity.X, RigidBody2.LinearVelocity.Y, RigidBody2.LinearVelocity.Z); </span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="comment">// Add mixed balanced angular velocity</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> w = 0.1f;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                RigidBody2.AngularVelocity = RigidBody2.AngularVelocity * w + rbo.AngularVelocity * (1 - w);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                             </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                       </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> MaxIgnoredMovements = -1; <span class="comment">// Default 5</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> MinVelocitySq = 0.00000001f;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            m_motionCounter++;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <span class="keywordflow">if</span> (m_motionCounter &gt; MaxIgnoredMovements ||</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                LinearVelocity.LengthSquared() &gt; MinVelocitySq || AngularVelocity.LengthSquared() &gt; MinVelocitySq || fromParent || ServerWorldMatrix.HasValue)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                ProfilerShort.Begin(<span class="stringliteral">&quot;GetWorldMatrix&quot;</span>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                var matrix = ServerWorldMatrix.HasValue ? ServerWorldMatrix.Value : GetWorldMatrix();</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                ProfilerShort.Begin(<span class="stringliteral">&quot;SetWorldMatrix&quot;</span>);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                this.Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">PositionComp</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#a6b3b85eda7691af8c8d19ad4c77f3a77">SetWorldMatrix</a>(matrix, ServerWorldMatrix.HasValue ? null : <span class="keyword">this</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                ServerWorldMatrix = null;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                ProfilerShort.End();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                m_motionCounter = 0;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                <span class="keywordflow">foreach</span> (var child <span class="keywordflow">in</span> WeldInfo.Children)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                    child.OnMotion(rbo, step,<span class="keyword">true</span>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(fromParent == <span class="keyword">false</span>,<span class="stringliteral">&quot;well well well&quot;</span>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;UpdateCluster&quot;</span>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">if</span>(WeldInfo.Parent == null)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                UpdateCluster();</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8cb030b23cd88e9181c5efee5dc3fe9f"> 1306</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8cb030b23cd88e9181c5efee5dc3fe9f">SynchronizeKeyframedRigidBody</a>()</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            <span class="keywordflow">if</span> ( (RigidBody != null) &amp;&amp; (RigidBody2 != null) )</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <span class="keywordflow">if</span>(RigidBody.IsActive != RigidBody2.IsActive)</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                    Console.WriteLine(<span class="stringliteral">&quot; RigidBody:{0} RigidBody2:{1} &quot;</span>, RigidBody.IsActive, RigidBody2.IsActive);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                    <span class="keywordflow">if</span> (RigidBody.IsActive)</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                    {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                        RigidBody2.IsActive = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                    }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                    {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                        <span class="comment">// Reset velocities</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                        RigidBody2.LinearVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                        RigidBody2.AngularVelocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                        RigidBody2.IsActive = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                    }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                }               </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            }            </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordtype">void</span> OnDynamicRigidBodyActivated(HkEntity entity)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            SynchronizeKeyframedRigidBody();</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordtype">void</span> OnDynamicRigidBodyDeactivated(HkEntity entity)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            SynchronizeKeyframedRigidBody();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3c7b8cedf953c004641c2c2e40182fe5"> 1340</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_matrix_d.html">MatrixD</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3c7b8cedf953c004641c2c2e40182fe5">GetWorldMatrix</a>()</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="keywordflow">if</span> (WeldInfo.Parent != null)</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="keywordflow">return</span> WeldInfo.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a32c1b9c3b313c079b98a339a9d19a1e0">Transform</a> * WeldInfo.Parent.GetWorldMatrix();</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <a class="code" href="namespace_matrix_d.html">MatrixD</a> entityMatrix;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                entityMatrix = RigidBody.GetRigidBodyMatrix();</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                entityMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> += Offset;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                entityMatrix = RigidBody2.GetRigidBodyMatrix();</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                entityMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> += Offset;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                <a class="code" href="namespace_matrix_d.html">MatrixD</a> characterTransform = CharacterProxy.GetRigidBodyTransform();</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                <span class="comment">//MatrixD characterTransform = MatrixD.CreateWorld(CharacterProxy.Position, CharacterProxy.Forward, CharacterProxy.Up);</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                characterTransform.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> = CharacterProxy.Position + Offset;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                entityMatrix = characterTransform;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ragdoll != null &amp; IsRagdollModeActive)</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                entityMatrix = Ragdoll.WorldMatrix;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                entityMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> = entityMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> + Offset;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                entityMatrix = <a class="code" href="namespace_matrix_d.html">MatrixD</a>.Identity;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <span class="keywordflow">if</span> (Center != <a class="code" href="namespace_vector3.html">Vector3</a>.Zero)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                entityMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> -= <a class="code" href="namespace_vector3_d.html">Vector3D</a>.TransformNormal(Center, ref entityMatrix);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">return</span> entityMatrix;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div>
<div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a101d986e08e2664b4d64c8b85922c007"> 1383</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3.html">Vector3</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a101d986e08e2664b4d64c8b85922c007">GetVelocityAtPoint</a>(<a class="code" href="namespace_vector3_d.html">Vector3D</a> worldPos)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <span class="comment">//TODO:Avoid M/N transition inside RigidBody.GetVelocityAtPoint</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a> relPos = (<a class="code" href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a>)WorldToCluster(worldPos);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                <span class="keywordflow">return</span> RigidBody.GetVelocityAtPoint(relPos);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">        #region Implementation of IMyNotifyEntityChanged</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01399"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ec4a61146fecf1f762858c7e4b2ea7d"> 1399</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ec4a61146fecf1f762858c7e4b2ea7d">OnWorldPositionChanged</a>(<span class="keywordtype">object</span> source)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <span class="keywordflow">if</span> (IsInWorld == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(<span class="keyword">this</span> != source, <span class="stringliteral">&quot;Recursion!&quot;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <span class="comment">//Debug.Assert(Entity.Parent == null || RigidBody.IsFixedOrKeyframed);</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            <a class="code" href="namespace_vector3.html">Vector3</a> velocity = <a class="code" href="namespace_vector3.html">Vector3</a>.Zero;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            <a class="code" href="namespace_i_my_entity.html">IMyEntity</a> parentEntity = Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a2bcca263645e94f5ed3a0108366ffc3a">GetTopMostParent</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <span class="keywordflow">if</span> (parentEntity.<a class="code" href="interface_v_rage_1_1_mod_a_p_i_1_1_i_my_entity.html#a608f2b0c3dd441dfcc4c592ccfafe601">Physics</a> != null)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                velocity = parentEntity.<a class="code" href="interface_v_rage_1_1_mod_a_p_i_1_1_i_my_entity.html#a608f2b0c3dd441dfcc4c592ccfafe601">Physics</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html#a498f78542991edbe51a0b7c804213539">LinearVelocity</a>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                <span class="comment">//TODO:this should be optional, all our child bodies are kinematic and dependent on parent atm</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                <span class="keywordflow">if</span> (Entity != parentEntity)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                    LinearVelocity = parentEntity.<a class="code" href="interface_v_rage_1_1_mod_a_p_i_1_1_i_my_entity.html#a608f2b0c3dd441dfcc4c592ccfafe601">Physics</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html#aba7e4147273d10608cbf27b4642cbebb">GetVelocityAtPoint</a>(Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">PositionComp</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#afd61d28f2eda68cca34fc113b77987dd">GetPosition</a>());</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <span class="keywordflow">if</span>(!IsWelded)</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#a7e3ed11371b2302fd800d28b1c3b817c">MoveObject</a>(ClusterObjectID, parentEntity.<a class="code" href="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_ingame_1_1_i_my_entity.html#afb2234d473fec6c71a72ab2ea5731942">WorldAABB</a>, velocity);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <a class="code" href="namespace_matrix.html">Matrix</a> bodyMatrix;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            GetRigidBodyMatrix(out bodyMatrix);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> (bodyMatrix.EqualsFast(ref m_bodyMatrix))</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            m_bodyMatrix = bodyMatrix;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                RigidBody.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                RigidBody2.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                <span class="comment">//CharacterProxy.Position = m_bodyMatrix.Translation; // Position is set later by SetRigidBodyTransform</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                CharacterProxy.Forward = m_bodyMatrix.Forward;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                CharacterProxy.Up = m_bodyMatrix.Up;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                CharacterProxy.Speed = 0;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                <span class="comment">//if (CharacterProxy.ImmediateSetWorldTransform)</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                    CharacterProxy.SetRigidBodyTransform(m_bodyMatrix);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <span class="comment">// TODO: This is disabled due to world synchronization, Ragdoll if set to some position from server doesn&#39;t simulate properly</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="comment">// Ragdoll updates it&#39;s position also in AfterUpdate on MyCharacter, so now this is not needed, but should be working.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="comment">//if (Ragdoll != null &amp;&amp; IsRagdollModeActive &amp;&amp; m_ragdollDeadMode &amp;&amp; !Sync.IsServer &amp;&amp; MyFakes.ENABLE_RAGDOLL_CLIENT_SYNC)</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <span class="comment">//{</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="comment">//    //Ragdoll.SetToKeyframed();</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            <span class="comment">//    //Ragdoll.SwitchToLayer(MyPhysics.CollisionLayers.RagdollCollisionLayer);</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <span class="comment">//    Ragdoll.SetWorldMatrix(rigidBodyMatrix,true);</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">if</span> (Ragdoll != null &amp;&amp; IsRagdollModeActive &amp;&amp; source is <a class="code" href="class_sandbox_1_1_game_1_1_entities_1_1_my_cockpit.html">MyCockpit</a>)</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(m_bodyMatrix.IsValid() &amp;&amp; m_bodyMatrix != <a class="code" href="namespace_matrix.html">Matrix</a>.Zero, <span class="stringliteral">&quot;Ragdoll world matrix is invalid!&quot;</span>);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                Ragdoll.ResetToRigPose();</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                Ragdoll.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                Ragdoll.ResetVelocities();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div>
<div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5ad7abe29ce6ea00f18be45004e09f62"> 1468</a></span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5ad7abe29ce6ea00f18be45004e09f62">GetRigidBodyMatrix</a>(out <a class="code" href="namespace_matrix.html">Matrix</a> m)</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(ClusterObjectID != MyHavokCluster.CLUSTERED_OBJECT_ID_UNITIALIZED, <span class="stringliteral">&quot;Unitialized object in cluster!&quot;</span>);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            var wm = Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#adaee247939f34a696a7e8bc239f8f419">WorldMatrix</a>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <span class="keywordflow">if</span> (Center != <a class="code" href="namespace_vector3.html">Vector3</a>.Zero)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                wm.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> += <a class="code" href="namespace_vector3.html">Vector3</a>.TransformNormal(Center, wm);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            wm.Translation -= Offset;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            m = wm;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        }</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div>
<div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac91edc18f6372f4441de4a1332052a75"> 1478</a></span>&#160;        <span class="keyword">protected</span> <a class="code" href="namespace_matrix.html">Matrix</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac91edc18f6372f4441de4a1332052a75">GetRigidBodyMatrix</a>(<a class="code" href="namespace_matrix_d.html">MatrixD</a> worldMatrix)</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(ClusterObjectID != MyHavokCluster.CLUSTERED_OBJECT_ID_UNITIALIZED, <span class="stringliteral">&quot;Unitialized object in cluster!&quot;</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            <span class="keywordflow">if</span>(Center != <a class="code" href="namespace_vector3.html">Vector3</a>.Zero)</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                worldMatrix.<a class="code" href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">Translation</a> += <a class="code" href="namespace_vector3_d.html">Vector3D</a>.TransformNormal(Center, ref worldMatrix);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            worldMatrix.Translation -= Offset;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <span class="keywordflow">return</span> worldMatrix;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div>
<div class="line"><a name="l01488"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aedcfa71d4375786ef7f57e4f00f517be"> 1488</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aedcfa71d4375786ef7f57e4f00f517be">ChangeQualityType</a>(HkCollidableQualityType quality)</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            RigidBody.Quality = quality;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4896e694977d8a53613360fbce83cef6"> 1495</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> HasRigidBody { <span class="keyword">get</span> { <span class="keywordflow">return</span> RigidBody != null; } }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3_d.html">Vector3D</a> CenterOfMassWorld</div>
<div class="line"><a name="l01498"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5e77bc66b9b63614381ab4b72a47137b"> 1498</a></span>&#160;        {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                <span class="keywordflow">return</span> RigidBody.CenterOfMassWorld + Offset;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="preprocessor">        #region Clusters</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordtype">void</span> OnContactPointCallback(ref HkContactPointEvent e)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            ProfilerShort.Begin(<span class="stringliteral">&quot;PhysicsBody.OnContacPointCallback&quot;</span>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            <span class="keywordflow">if</span> (ContactPointCallback != null)</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html">MyContactPointEvent</a> ce = <span class="keyword">new</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html">MyContactPointEvent</a>()</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                    ContactPointEvent = e,</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    Position = e.ContactPoint.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html#a1654c9fe238e5807e0f4a96409a69d8e">Position</a> + Offset</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                };</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                ContactPointCallback(ref ce);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            ProfilerShort.End();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> IsConstraintValid(HkConstraint constraint, <span class="keywordtype">bool</span> checkBodiesInWorld)</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            <span class="keywordflow">if</span> (constraint == null) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            <span class="keywordflow">if</span> (constraint.IsDisposed) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="keywordflow">if</span> (constraint.RigidBodyA == null | constraint.RigidBodyB == null) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            <span class="comment">//bodies are not in world when using batches</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            <span class="keywordflow">if</span> (checkBodiesInWorld &amp;&amp; (!constraint.RigidBodyA.InWorld | !constraint.RigidBodyB.InWorld)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div>
<div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a683482c1a486522bda2c1a0687eaf38f"> 1533</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a683482c1a486522bda2c1a0687eaf38f">IsConstraintValid</a>(HkConstraint constraint)</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">return</span> IsConstraintValid(constraint, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div>
<div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a50851b83ea0f2addcbb089f05fba27ae"> 1538</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a50851b83ea0f2addcbb089f05fba27ae">AddConstraint</a>(HkConstraint constraint)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <span class="keywordflow">if</span> (IsWelded)</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                WeldInfo.Parent.AddConstraint(constraint);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <span class="keywordflow">if</span> (HavokWorld == null || RigidBody == null)</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(!m_constraints.Contains(constraint), <span class="stringliteral">&quot;Constraint added twice&quot;</span>);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(HavokWorld.RigidBodies.Contains(constraint.RigidBodyA), <span class="stringliteral">&quot;Object must be in the world&quot;</span>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(HavokWorld.RigidBodies.Contains(constraint.RigidBodyB), <span class="stringliteral">&quot;Object must be in the world&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(IsConstraintValid(constraint), <span class="stringliteral">&quot;Cannot add invalid constraint&quot;</span>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <span class="keywordflow">if</span> (constraint.UserData == 0)</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                constraint.UserData = (uint)(WeldedRigidBody == null ? RigidBody.GetGcRoot() : WeldedRigidBody.GetGcRoot());</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            m_constraints.Add(constraint);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            HavokWorld.AddConstraint(constraint);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div>
<div class="line"><a name="l01560"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1e59ed4fe9c189e507adb2aca0ef3b76"> 1560</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1e59ed4fe9c189e507adb2aca0ef3b76">RemoveConstraint</a>(HkConstraint constraint)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            constraint.UserData = 0;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            <span class="keywordflow">if</span>(IsWelded)</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            {</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                m_constraints.Remove(constraint);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                WeldInfo.Parent.RemoveConstraint(constraint);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            }</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            m_constraints.Remove(constraint);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            <span class="keywordflow">if</span> (HavokWorld != null)</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                HavokWorld.RemoveConstraint(constraint);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_v_rage_1_1_collections_1_1_hash_set_reader.html">HashSetReader&lt;HkConstraint&gt;</a> Constraints</div>
<div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac77fd5be4dbb24636e98b3c804381028"> 1580</a></span>&#160;        {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_constraints; }</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> m_isStaticForCluster = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsStaticForCluster</div>
<div class="line"><a name="l01586"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a716a22b20e848037f1a3475db2d0d0c1"> 1586</a></span>&#160;        {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> m_isStaticForCluster; }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            set { m_isStaticForCluster = value; }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a9914239b9d46f3c6bdd7dd5ba58dbb0b"> 1591</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3_d.html">Vector3D</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a9914239b9d46f3c6bdd7dd5ba58dbb0b">WorldToCluster</a>(<a class="code" href="namespace_vector3_d.html">Vector3D</a> worldPos)</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <span class="keywordflow">return</span> worldPos - Offset;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa66145098d17da5cd7a55023a39654a9"> 1596</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_vector3_d.html">Vector3D</a> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa66145098d17da5cd7a55023a39654a9">ClusterToWorld</a>(<a class="code" href="namespace_vector3.html">Vector3</a> clusterPos)</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="namespace_vector3_d.html">Vector3D</a>)clusterPos + Offset;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div>
<div class="line"><a name="l01604"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5870439789c016ca3c302b65ee740000"> 1604</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5870439789c016ca3c302b65ee740000">Activate</a>()</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a>)</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(!IsInWorld &amp;&amp; ClusterObjectID == <a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">MyClusterTree</a>.<a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html#a72eacc37d4fa5e58be5b698703ad5de3">CLUSTERED_OBJECT_ID_UNITIALIZED</a> &amp;&amp; m_world == null);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <span class="keywordflow">if</span>(ClusterObjectID == <a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">MyClusterTree</a>.<a class="code" href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html#a72eacc37d4fa5e58be5b698703ad5de3">CLUSTERED_OBJECT_ID_UNITIALIZED</a>)</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                ClusterObjectID = <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#ab249f95c5e12ec28dcca1ab0710f30f3">AddObject</a>(Entity.WorldAABB, <span class="keyword">this</span>, null, ((<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">MyEntity</a>)<span class="keyword">this</span>.Entity).DebugName, Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a1445baef094070a8aee6bb8247c294be">EntityId</a>);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Hotfix. Object was activated twice fix properly!&quot;</span>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            }</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div>
<div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4760b19f38c2b46941d3094dd5312a04"> 1619</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4760b19f38c2b46941d3094dd5312a04">Activate</a>(<span class="keywordtype">object</span> world, ulong clusterObjectID)</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(m_world == null, <span class="stringliteral">&quot;Cannot activate already active object!&quot;</span>);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(!IsInWorld, <span class="stringliteral">&quot;Cannot activate already active object!&quot;</span>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(!IsWelded, <span class="stringliteral">&quot;Activating welded body!&quot;</span>);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            m_world = (HkWorld)world;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            ClusterObjectID = clusterObjectID;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            ActivateCollision();</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            IsInWorld = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            GetRigidBodyMatrix(out m_bodyMatrix);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            <span class="keywordflow">if</span> (BreakableBody != null)</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                RigidBody.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                <span class="comment">//Disable destruction on clients</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_v_rage_1_1_mod_a_p_i.html#a7beb854f7c2e3825d10973e0cc1be3baad8e87c0927539672f54462c837be0b7f">Sync</a>.IsServer)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                    m_world.DestructionWorld.AddBreakableBody(BreakableBody);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                    m_world.AddRigidBody(RigidBody);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                RigidBody.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                m_world.AddRigidBody(RigidBody);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                RigidBody2.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                m_world.AddRigidBody(RigidBody2);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            }</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                <span class="comment">// obtain this character new system group id for collision filtering</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                CharacterSystemGroupCollisionFilterID = m_world.GetCollisionFilter().GetNewSystemGroup();</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                <span class="comment">// Calculate filter info for this character</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                CharacterCollisionFilter = HkGroupFilter.CalcFilterInfo(<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">CollisionLayers</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#aae50a542e0b8b63da92495018b4e563d">CharacterCollisionLayer</a>, CharacterSystemGroupCollisionFilterID, 0, 0);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                CharacterProxy.SetCollisionFilterInfo(CharacterCollisionFilter);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                CharacterProxy.SetRigidBodyTransform(m_bodyMatrix);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                CharacterProxy.Activate(m_world);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <span class="comment">//if (ReactivateRagdoll)</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            <span class="comment">//{</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="comment">//    if (MyFakes.ENABLE_RAGDOLL_DEBUG) Debug.WriteLine(&quot;MyPhysicsBody.Activate.ReactivateRagdoll&quot;);</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <span class="comment">//    ActivateRagdoll(rigidBodyMatrix);</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="comment">//    ReactivateRagdoll = false;</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <span class="keywordflow">if</span> (SwitchToRagdollModeOnActivate)</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                <span class="keywordflow">if</span> (MyFakes.ENABLE_RAGDOLL_DEBUG) <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.WriteLine(<span class="stringliteral">&quot;MyPhysicsBody.Activate.SwitchToRagdollModeOnActivate&quot;</span>);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                SwitchToRagdollModeOnActivate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                SwitchToRagdollMode(m_ragdollDeadMode);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            m_world.LockCriticalOperations();</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                      </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraints)</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                <span class="keywordflow">if</span> (!IsConstraintValid(constraint)) </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                m_world.AddConstraint(constraint);               </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            m_world.UnlockCriticalOperations();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;           </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div>
<div class="line"><a name="l01696"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ebfef6d964a99ede7f694fba2cddafc"> 1696</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ebfef6d964a99ede7f694fba2cddafc">ActivateBatch</a>(<span class="keywordtype">object</span> world, ulong clusterObjectID)</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(m_world == null, <span class="stringliteral">&quot;Cannot activate already active object!&quot;</span>);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <a class="code" href="namespace_system.html">System</a>.Diagnostics.Debug.Assert(!IsWelded, <span class="stringliteral">&quot;Activating welded body!&quot;</span>);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            m_world = (HkWorld)world;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            ClusterObjectID = clusterObjectID;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            IsInWorld = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            GetRigidBodyMatrix(out m_bodyMatrix);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            <span class="keywordflow">if</span> (RigidBody != null)</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                RigidBody.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                m_world.AddRigidBodyBatch(RigidBody);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">if</span> (RigidBody2 != null)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                RigidBody2.SetWorldMatrix(m_bodyMatrix);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                m_world.AddRigidBodyBatch(RigidBody2);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">if</span> (CharacterProxy != null)</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                <span class="comment">// obtain this character new system group id for collision filtering</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                CharacterSystemGroupCollisionFilterID = m_world.GetCollisionFilter().GetNewSystemGroup();</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                <span class="comment">// Calculate filter info for this character</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                CharacterCollisionFilter = HkGroupFilter.CalcFilterInfo(<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">CollisionLayers</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#aae50a542e0b8b63da92495018b4e563d">CharacterCollisionLayer</a>, CharacterSystemGroupCollisionFilterID, 1, 1);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                CharacterProxy.SetCollisionFilterInfo(CharacterCollisionFilter);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                CharacterProxy.SetRigidBodyTransform(m_bodyMatrix);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                CharacterProxy.Activate(m_world);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            }</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <span class="keywordflow">if</span> (SwitchToRagdollModeOnActivate)</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                <span class="keywordflow">if</span> (MyFakes.ENABLE_RAGDOLL_DEBUG) <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.WriteLine(<span class="stringliteral">&quot;MyPhysicsBody.Activate.SwitchToRagdollModeOnActivate&quot;</span>);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                SwitchToRagdollModeOnActivate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                SwitchToRagdollMode(m_ragdollDeadMode);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keywordflow">foreach</span> (var constraint <span class="keywordflow">in</span> m_constraints)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                <span class="comment">//boides wont be in world yet here</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                <span class="keywordflow">if</span> (!IsConstraintValid(constraint,<span class="keyword">false</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                m_constraintsAddBatch.Add(constraint);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            <span class="comment">//if (ReactivateRagdoll)</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="comment">//{</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            <span class="comment">//    if (MyFakes.ENABLE_RAGDOLL_DEBUG) Debug.WriteLine(&quot;MyPhysicsBody.ActivateBatch.ReactivateRagdoll&quot;);</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            <span class="comment">//    ActivateRagdoll(m_bodyMatrix);</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <span class="comment">//    ReactivateRagdoll = false;</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        }</div>
<div class="line"><a name="l01754"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a44552f34ca03f88933c9ca2cdbace5e5"> 1754</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a44552f34ca03f88933c9ca2cdbace5e5">UpdateCluster</a>()</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(Entity != null &amp;&amp; !Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac85adf2451e47ce1c8bf900d4b0e9db8">Closed</a> &amp;&amp; Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a2bcca263645e94f5ed3a0108366ffc3a">GetTopMostParent</a>().Physics != null);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            <span class="keywordflow">if</span> (!MyPerGameSettings.LimitedWorld &amp;&amp; Entity != null &amp;&amp; !Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac85adf2451e47ce1c8bf900d4b0e9db8">Closed</a>)</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                <span class="comment">//Entity.WorldAABB triger AABB recalculation after the worldmatrix changed (part of execution time)</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#a7e3ed11371b2302fd800d28b1c3b817c">MoveObject</a>(ClusterObjectID, Entity.WorldAABB,</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                        <span class="keyword">this</span>.LinearVelocity);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.Activate(<span class="keywordtype">object</span> userData, ulong clusterObjectID)</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            Activate(userData, clusterObjectID);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.Deactivate(<span class="keywordtype">object</span> userData)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            Deactivate(userData);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.ActivateBatch(<span class="keywordtype">object</span> userData, ulong clusterObjectID)</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            ActivateBatch(userData, clusterObjectID);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.DeactivateBatch(<span class="keywordtype">object</span> userData)</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            DeactivateBatch(userData);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.FinishAddBatch()</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            FinishAddBatch();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordtype">void</span> MyHavokCluster.IMyActivationHandler.FinishRemoveBatch(<span class="keywordtype">object</span> userData)</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            FinishRemoveBatch(userData);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="keywordtype">bool</span> MyHavokCluster.IMyActivationHandler.IsStaticForCluster</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> IsStaticForCluster; }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div>
<div class="line"><a name="l01806"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4a3bb5f535e4dcd8090948f9dbae46b0"> 1806</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> HkShape <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4a3bb5f535e4dcd8090948f9dbae46b0">GetShape</a>()</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(RigidBody != null);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keywordflow">if</span> (WeldedRigidBody != null)</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="keywordflow">return</span> WeldedRigidBody.GetShape();</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            var shape = RigidBody.GetShape();</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <span class="keywordflow">if</span> (shape.ShapeType == HkShapeType.List)</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                var cont = RigidBody.GetShape().GetContainer();</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                <span class="keywordflow">while</span> (cont.IsValid)</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                    var shape2 = cont.GetShape(cont.CurrentShapeKey);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                    <span class="keywordflow">if</span> (RigidBody.GetGcRoot() == shape2.UserData)</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                        <span class="keywordflow">return</span> shape2;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    cont.Next();</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <span class="keywordflow">return</span> shape;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> HkMassProperties? GetMassPropertiesFromDefinition(<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_physics_body_component_definition.html">MyPhysicsBodyComponentDefinition</a> physicsBodyComponentDefinition, <a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html">MyModelComponentDefinition</a> modelComponentDefinition)</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            HkMassProperties? massProperties = null;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <span class="keywordflow">switch</span> (physicsBodyComponentDefinition.<a class="code" href="class_v_rage_1_1_game_1_1_my_physics_component_definition_base.html#a73cd17ea0042b9f427c66a0766a191d6">MassPropertiesComputation</a>) </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html">MyObjectBuilder_PhysicsComponentDefinitionBase</a>.<a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html#ac3db4feede708088b64b120daf8c81a8">MyMassPropertiesComputationType</a>.None:</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html">MyObjectBuilder_PhysicsComponentDefinitionBase</a>.<a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html#ac3db4feede708088b64b120daf8c81a8">MyMassPropertiesComputationType</a>.Box:</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                    massProperties = HkInertiaTensorComputer.ComputeBoxVolumeMassProperties(</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        modelComponentDefinition.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html#ae17cd46978b17a785787e205d50921bc">Size</a> / 2, (MyPerGameSettings.Destruction ? MyDestructionHelper.MassToHavok(modelComponentDefinition.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html#abe552691f10cc38b3aab9b6c49e139c2">Mass</a>) : modelComponentDefinition.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html#abe552691f10cc38b3aab9b6c49e139c2">Mass</a>));</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                    <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Fail(<span class="stringliteral">&quot;Not implemented&quot;</span>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="keywordflow">return</span> massProperties;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> OnModelChanged(MyEntityContainerEventExtensions.EntityEventParams eventParams)</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <a class="code" href="namespace_sandbox.html#a3df5667fabda75033481d325b1fcbf5bad3d2e617335f08df83599665eef8a418">Close</a>();</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            InitializeRigidBodyFromModel();</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab6fc89e94e87477f7b814aafc07b86aa"> 1853</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab6fc89e94e87477f7b814aafc07b86aa">Init</a>(<a class="code" href="class_v_rage_1_1_game_1_1_my_component_definition_base.html">MyComponentDefinitionBase</a> definition)</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            base.Init(definition);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            Definition = definition as <a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_physics_body_component_definition.html">MyPhysicsBodyComponentDefinition</a>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <a class="code" href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Debug</a>.Assert(Definition != null);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div>
<div class="line"><a name="l01861"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a641b6f8c4ca3d1783cbc77dfd5315579"> 1861</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a641b6f8c4ca3d1783cbc77dfd5315579">OnAddedToContainer</a>()</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            base.OnAddedToContainer();</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <span class="keywordflow">if</span> (Definition != null) </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                InitializeRigidBodyFromModel();</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                this.RegisterForEntityEvent(<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html">MyModelComponent</a>.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#a4972a5869747cf9b39eb3d363a80cbd9">ModelChanged</a>, OnModelChanged);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div>
<div class="line"><a name="l01873"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae4b90f47ebace66ed55838932fc0fbb9"> 1873</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae4b90f47ebace66ed55838932fc0fbb9">OnAddedToScene</a>()</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            base.OnAddedToScene();</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">if</span> (Definition != null)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                <a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                <span class="keywordflow">if</span> (Definition.ForceActivate)</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                    ForceActivate();</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        }</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> InitializeRigidBodyFromModel()</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            <span class="keywordflow">if</span> (Definition != null &amp;&amp; RigidBody == null &amp;&amp; Definition.CreateFromCollisionObject &amp;&amp; Container.Has&lt;<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html">MyModelComponent</a>&gt;())</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                <a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html">MyModelComponent</a> modelComponent = Container.Get&lt;<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html">MyModelComponent</a>&gt;();</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                <span class="keywordflow">if</span> (modelComponent.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ac3c0cd3093d32bfbd1917b55463e394a">Definition</a> != null &amp;&amp; modelComponent.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ae98b2d4019519b0120f7058526b835a6">ModelCollision</a> != null &amp;&amp; modelComponent.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ae98b2d4019519b0120f7058526b835a6">ModelCollision</a>.HavokCollisionShapes.Length &gt;= 1)</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                    HkMassProperties? massProperties = GetMassPropertiesFromDefinition(Definition, modelComponent.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ac3c0cd3093d32bfbd1917b55463e394a">Definition</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                    <span class="keywordtype">int</span> collisionFilter = Definition.CollisionLayer != null ? <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#adbfe1a6bd052137c791d2cdaaba12eea">GetCollisionLayer</a>(Definition.CollisionLayer) : <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">MyPhysics</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">CollisionLayers</a>.<a class="code" href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#a3a768d8d7bed4fbc66375329775635bf">DefaultCollisionLayer</a>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                    CreateFromCollisionObject(modelComponent.<a class="code" href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ae98b2d4019519b0120f7058526b835a6">ModelCollision</a>.HavokCollisionShapes[0], <a class="code" href="namespace_vector3.html">Vector3</a>.Zero, Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#adaee247939f34a696a7e8bc239f8f419">WorldMatrix</a>, massProperties, collisionFilter: collisionFilter);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                }</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div>
<div class="line"><a name="l01899"></a><span class="lineno"><a class="line" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac96a6e64fb0109293654c257d897418b"> 1899</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac96a6e64fb0109293654c257d897418b">UpdateFromSystem</a>()</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <span class="keywordflow">if</span> (Definition != null &amp;&amp; (Definition.UpdateFlags &amp; <a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html">MyObjectBuilder_PhysicsComponentDefinitionBase</a>.<a class="code" href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html#a27b286bdd0371b7304589b32ca95ed54">MyUpdateFlags</a>.Gravity) != 0</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                &amp;&amp; MyFakes.ENABLE_PLANETS &amp;&amp; Entity != null &amp;&amp; Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">PositionComp</a> != null &amp;&amp; <a class="code" href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a> &amp;&amp; RigidBody != null)</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                RigidBody.Gravity = <a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html">MyGravityProviderSystem</a>.<a class="code" href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html#a05b4c22409a7955b7c9c8744b09b26bf">CalculateNaturalGravityInPoint</a>(Entity.<a class="code" href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">PositionComp</a>.<a class="code" href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#afd61d28f2eda68cca34fc113b77987dd">GetPosition</a>());</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;}</div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a3f6d3a202e5f1d1a3838f6781431be49"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3f6d3a202e5f1d1a3838f6781431be49">Sandbox.Engine.Physics.MyPhysicsBody.CreateBody</a></div><div class="ttdeci">virtual void CreateBody(ref HkShape shape, HkMassProperties?massProperties)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00812">MyPhysicsBody.cs:812</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_game.html">Sandbox.Game</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html">Sandbox.Engine.Physics.MyPhysicsBody</a></div><div class="ttdoc">Abstract engine physics body object. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00059">MyPhysicsBody.cs:59</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_models_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_models.html">Sandbox.Engine.Models</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_model_octree_8cs_source.html#l00022">MyModelOctree.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component_html_ae50758bf11335f6d8e9af590508e904f"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html#ae50758bf11335f6d8e9af590508e904f">Sandbox.Game.World.MyAudioComponent.ContactSoundsPool</a></div><div class="ttdeci">static ConcurrentDictionary&lt; long, byte &gt; ContactSoundsPool</div><div class="ttdef"><b>Definition:</b> <a href="_my_audio_component_8cs_source.html#l00027">MyAudioComponent.cs:27</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_html_a1c7aab6a6146fa0ec24490f53e2920c3"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix.html#a1c7aab6a6146fa0ec24490f53e2920c3">VRageMath.Matrix.Forward</a></div><div class="ttdeci">Vector3 Forward</div><div class="ttdoc">Gets and sets the forward vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_8cs_source.html#l00267">Matrix.cs:267</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_aa4bd2d62b93b6b6fd509f519ed6e9784"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa4bd2d62b93b6b6fd509f519ed6e9784">Sandbox.Engine.Physics.MyPhysicsBody.CreateFromCollisionObject</a></div><div class="ttdeci">virtual void CreateFromCollisionObject(HkShape shape, Vector3 center, MatrixD worldTransform, HkMassProperties?massProperties=null, int collisionFilter=MyPhysics.CollisionLayers.DefaultCollisionLayer)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00766">MyPhysicsBody.cs:766</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_1_1_character_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html">Sandbox.Game.Entities.Character</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_character_component_8cs_source.html#l00051">MyCharacterComponent.cs:51</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_aa51d4d112c5b6e87c54956a4aafd4812"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#aa51d4d112c5b6e87c54956a4aafd4812">VRageMath.Vector3.IsZero</a></div><div class="ttdeci">static bool IsZero(Vector3 value)</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00357">Vector3.cs:357</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_graphics_html"><div class="ttname"><a href="namespace_sandbox_1_1_graphics.html">Sandbox.Graphics</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_components_html_a063e9c938b8db4d9ea5bc37eee61ad8a"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_components.html#a063e9c938b8db4d9ea5bc37eee61ad8a">VRage.Game.Components.MyPhysicsForceType</a></div><div class="ttdeci">MyPhysicsForceType</div><div class="ttdoc">Force type applied to physic object. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_component_base_8cs_source.html#l00037">MyPhysicsComponentBase.cs:37</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_world_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_world.html">Sandbox.Game.World</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_build_component_base_8cs_source.html#l00022">MyBuildComponentBase.cs:22</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ae41ee0ca0890cdc77a8899a6d1aae812"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae41ee0ca0890cdc77a8899a6d1aae812">Sandbox.Engine.Physics.MyPhysicsBody.AddForce</a></div><div class="ttdeci">override void AddForce(MyPhysicsForceType type, Vector3?force, Vector3D?position, Vector3?torque)</div><div class="ttdoc">Applies external force to the physics object. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00507">MyPhysicsBody.cs:507</a></div></div>
<div class="ttc" id="namespace_system_1_1_linq_html"><div class="ttname"><a href="namespace_system_1_1_linq.html">System.Linq</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_d_html_ad0c304a6cdf9cafece7d3e7cd72f2d3b"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix_d.html#ad0c304a6cdf9cafece7d3e7cd72f2d3b">VRageMath.MatrixD.Forward</a></div><div class="ttdeci">Vector3D Forward</div><div class="ttdoc">Gets and sets the forward vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_d_8cs_source.html#l00233">MatrixD.cs:233</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html_ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f"><div class="ttname"><a href="namespace_v_rage_1_1_game.html#ac697864e8ab889c4f33a10b92e1e8df2a1a434befae3f49ae09347ded52032f6f">VRage.Game.Entity</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_network_html_afd0c0e2c33a4c1987d62c47d4bd7ffa1a50ae99e9c35446c2580e4b540b0fd104"><div class="ttname"><a href="namespace_v_rage_1_1_network.html#afd0c0e2c33a4c1987d62c47d4bd7ffa1a50ae99e9c35446c2580e4b540b0fd104">VRage.Network.Physics</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_ac06ef55903985473b0951709f60ac782"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#ac06ef55903985473b0951709f60ac782">Sandbox.Engine.Physics.MyPhysics.ActivateInBox</a></div><div class="ttdeci">static void ActivateInBox(ref BoundingBoxD box)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00749">MyPhysics.cs:749</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_1_1_generic_html"><div class="ttname"><a href="namespace_system_1_1_collections_1_1_generic.html">System.Collections.Generic</a></div><div class="ttdef"><b>Definition:</b> <a href="_dictionary_extensions_8cs_source.html#l00007">DictionaryExtensions.cs:7</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_d_html_a32c1b9c3b313c079b98a339a9d19a1e0"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix_d.html#a32c1b9c3b313c079b98a339a9d19a1e0">VRageMath.MatrixD.Transform</a></div><div class="ttdeci">static MatrixD Transform(MatrixD value, Quaternion rotation)</div><div class="ttdoc">Transforms a Matrix by applying a Quaternion rotation. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_d_8cs_source.html#l02284">MatrixD.cs:2284</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_collections_html"><div class="ttname"><a href="namespace_v_rage_1_1_collections.html">VRage.Collections</a></div><div class="ttdef"><b>Definition:</b> <a href="_caching_dictionary_8cs_source.html#l00007">CachingDictionary.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a101d986e08e2664b4d64c8b85922c007"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a101d986e08e2664b4d64c8b85922c007">Sandbox.Engine.Physics.MyPhysicsBody.GetVelocityAtPoint</a></div><div class="ttdeci">override Vector3 GetVelocityAtPoint(Vector3D worldPos)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01383">MyPhysicsBody.cs:1383</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine.html">Sandbox.Engine</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_ac182112024a8a65cd601c23c7f49e434"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac182112024a8a65cd601c23c7f49e434">VRage.Game.Entity.MyEntity.PositionComp</a></div><div class="ttdeci">MyPositionComponentBase PositionComp</div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00048">MyEntity.cs:48</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a3c7b8cedf953c004641c2c2e40182fe5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a3c7b8cedf953c004641c2c2e40182fe5">Sandbox.Engine.Physics.MyPhysicsBody.GetWorldMatrix</a></div><div class="ttdeci">override MatrixD GetWorldMatrix()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01340">MyPhysicsBody.cs:1340</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ab6fc89e94e87477f7b814aafc07b86aa"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab6fc89e94e87477f7b814aafc07b86aa">Sandbox.Engine.Physics.MyPhysicsBody.Init</a></div><div class="ttdeci">override void Init(MyComponentDefinitionBase definition)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01853">MyPhysicsBody.cs:1853</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base_html_a27b286bdd0371b7304589b32ca95ed54"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html#a27b286bdd0371b7304589b32ca95ed54">VRage.Game.ObjectBuilders.ComponentSystem.MyObjectBuilder_PhysicsComponentDefinitionBase.MyUpdateFlags</a></div><div class="ttdeci">MyUpdateFlags</div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___physics_component_definition_base_8cs_source.html#l00023">MyObjectBuilder_PhysicsComponentDefinitionBase.cs:23</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system_html_a05b4c22409a7955b7c9c8744b09b26bf"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html#a05b4c22409a7955b7c9c8744b09b26bf">Sandbox.Game.GameSystems.MyGravityProviderSystem.CalculateNaturalGravityInPoint</a></div><div class="ttdeci">static Vector3 CalculateNaturalGravityInPoint(Vector3D worldPoint, bool clearVectors=true)</div><div class="ttdef"><b>Definition:</b> <a href="_my_gravity_provider_system_8cs_source.html#l00067">MyGravityProviderSystem.cs:67</a></div></div>
<div class="ttc" id="namespace_my_havok_cluster_html"><div class="ttname"><a href="namespace_my_havok_cluster.html">MyHavokCluster</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_physics_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_physics.html">Sandbox.Engine.Physics</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_breakable_shape_clone_job_8cs_source.html#l00011">MyBreakableShapeCloneJob.cs:11</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a4f82f84e2c12ddc51ccd06493afb7984"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4f82f84e2c12ddc51ccd06493afb7984">Sandbox.Engine.Physics.MyPhysicsBody.ApplyImpulse</a></div><div class="ttdeci">override void ApplyImpulse(Vector3 impulse, Vector3D pos)</div><div class="ttdoc">Applies the impulse. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00625">MyPhysicsBody.cs:625</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html_af76bbf8ef1269420760d55cacd951912"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#af76bbf8ef1269420760d55cacd951912">Sandbox.Game.World.MySession.Static</a></div><div class="ttdeci">static MySession Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8cs_source.html#l00102">MySession.cs:102</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a1fce614b2f35af380f247d29271f7d50"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1fce614b2f35af380f247d29271f7d50">Sandbox.Engine.Physics.MyPhysicsBody.ContactPointCallback</a></div><div class="ttdeci">PhysicsContactHandler ContactPointCallback</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00157">MyPhysicsBody.cs:157</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_object_builders_1_1_component_system_html"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_object_builders_1_1_component_system.html">VRage.Game.ObjectBuilders.ComponentSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___trigger_aggregate_8cs_source.html#l00008">MyObjectBuilder_TriggerAggregate.cs:8</a></div></div>
<div class="ttc" id="namespace_quaternion_html"><div class="ttname"><a href="namespace_quaternion.html">Quaternion</a></div></div>
<div class="ttc" id="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_ingame_1_1_i_my_entity_html_afb2234d473fec6c71a72ab2ea5731942"><div class="ttname"><a href="interface_v_rage_1_1_game_1_1_mod_a_p_i_1_1_ingame_1_1_i_my_entity.html#afb2234d473fec6c71a72ab2ea5731942">VRage.Game.ModAPI.Ingame.IMyEntity.WorldAABB</a></div><div class="ttdeci">VRageMath.BoundingBoxD WorldAABB</div><div class="ttdef"><b>Definition:</b> <a href="_ingame_2_i_my_entity_8cs_source.html#l00022">IMyEntity.cs:22</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_v_rage_render_1_1_my_render_proxy_html"><div class="ttname"><a href="class_v_rage_render_1_1_my_render_proxy.html">VRageRender.MyRenderProxy</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_render_proxy_8cs_source.html#l00035">MyRenderProxy.cs:35</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a262f2ce04a77c9f489b71b63966723c5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a262f2ce04a77c9f489b71b63966723c5">Sandbox.Engine.Physics.MyPhysicsBody.CloseRigidBody</a></div><div class="ttdeci">override void CloseRigidBody()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00238">MyPhysicsBody.cs:238</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_my_oriented_bounding_box_d_html"><div class="ttname"><a href="struct_v_rage_math_1_1_my_oriented_bounding_box_d.html">VRageMath.MyOrientedBoundingBoxD</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_oriented_bounding_box_d_8cs_source.html#l00008">MyOrientedBoundingBoxD.cs:8</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event_html_a1654c9fe238e5807e0f4a96409a69d8e"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html#a1654c9fe238e5807e0f4a96409a69d8e">Sandbox.Engine.Physics.MyPhysics.MyContactPointEvent.Position</a></div><div class="ttdeci">Vector3D Position</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00085">MyPhysics.cs:85</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_components_html"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_components.html">VRage.Game.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_components_debug_draw_8cs_source.html#l00011">MyEntityComponentsDebugDraw.cs:11</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_a5c6aaff626dda263779a01345e190421"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#a5c6aaff626dda263779a01345e190421">Sandbox.Engine.Physics.MyPhysics.GetObjectOffset</a></div><div class="ttdeci">static Vector3D GetObjectOffset(ulong id)</div><div class="ttdoc">Return offset of objects subspace center. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l01516">MyPhysics.cs:1516</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html_a50896fb8305e2d026171896d6fd3cc8d"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html#a50896fb8305e2d026171896d6fd3cc8d">Sandbox.Game.World.MySession.ControlledEntity</a></div><div class="ttdeci">Entities.IMyControllableEntity ControlledEntity</div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8cs_source.html#l00301">MySession.cs:301</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a683482c1a486522bda2c1a0687eaf38f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a683482c1a486522bda2c1a0687eaf38f">Sandbox.Engine.Physics.MyPhysicsBody.IsConstraintValid</a></div><div class="ttdeci">static bool IsConstraintValid(HkConstraint constraint)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01533">MyPhysicsBody.cs:1533</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entity_components_1_1_systems_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entity_components_1_1_systems.html">Sandbox.Game.EntityComponents.Systems</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_timer_component_system_8cs_source.html#l00008">MyTimerComponentSystem.cs:8</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html">VRage.Game.Entity.MyEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00027">MyEntity.cs:27</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_a2bcca263645e94f5ed3a0108366ffc3a"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a2bcca263645e94f5ed3a0108366ffc3a">VRage.Game.Entity.MyEntity.GetTopMostParent</a></div><div class="ttdeci">MyEntity GetTopMostParent(Type type=null)</div><div class="ttdoc">Return top most parent of this entity </div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00324">MyEntity.cs:324</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_adf2fceabd7802b93acbd8e72dfdb5aee"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#adf2fceabd7802b93acbd8e72dfdb5aee">Sandbox.Engine.Physics.MyPhysicsBody.PlayContactSound</a></div><div class="ttdeci">void PlayContactSound(HkContactPointEvent value, float volume=0)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00880">MyPhysicsBody.cs:880</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_a6bc755f3e700ce49c042a1a25f8ea854"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a6bc755f3e700ce49c042a1a25f8ea854">VRage.Game.Entity.MyEntity.Physics</a></div><div class="ttdeci">MyPhysicsComponentBase Physics</div><div class="ttdoc">Gets the physic component of the entity. </div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00357">MyEntity.cs:357</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a57fc1ccb7a15bbe525654f4948e831d2"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57fc1ccb7a15bbe525654f4948e831d2">Sandbox.Engine.Physics.MyPhysicsBody.ClearSpeed</a></div><div class="ttdeci">override void ClearSpeed()</div><div class="ttdoc">Clears the speeds. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00633">MyPhysicsBody.cs:633</a></div></div>
<div class="ttc" id="_my_texture_atlas_utils_8cs_html_a9e9b0feb20482f58c1b986d351db5d1e"><div class="ttname"><a href="_my_texture_atlas_utils_8cs.html#a9e9b0feb20482f58c1b986d351db5d1e">Vector4</a></div><div class="ttdeci">VRageMath.Vector4 Vector4</div><div class="ttdef"><b>Definition:</b> <a href="_my_texture_atlas_utils_8cs_source.html#l00021">MyTextureAtlasUtils.cs:21</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition_html_ae17cd46978b17a785787e205d50921bc"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html#ae17cd46978b17a785787e205d50921bc">Sandbox.Game.EntityComponents.MyModelComponentDefinition.Size</a></div><div class="ttdeci">Vector3 Size</div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_definition_8cs_source.html#l00016">MyModelComponentDefinition.cs:16</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_app_code_1_1_game_html"><div class="ttname"><a href="namespace_sandbox_1_1_app_code_1_1_game.html">Sandbox.AppCode.Game</a></div></div>
<div class="ttc" id="interface_v_rage_1_1_mod_a_p_i_1_1_i_my_entity_html_a608f2b0c3dd441dfcc4c592ccfafe601"><div class="ttname"><a href="interface_v_rage_1_1_mod_a_p_i_1_1_i_my_entity.html#a608f2b0c3dd441dfcc4c592ccfafe601">VRage.ModAPI.IMyEntity.Physics</a></div><div class="ttdeci">MyPhysicsComponentBase Physics</div><div class="ttdef"><b>Definition:</b> <a href="_i_my_entity_8cs_source.html#l00117">IMyEntity.cs:117</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_gui_html_a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_gui.html#a85590df7a7e0f84aafc9c190d8b4699eaa603905470e2a5b8c13e96b579ef0dba">Sandbox.Game.Gui.Debug</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers_html_a3a768d8d7bed4fbc66375329775635bf"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#a3a768d8d7bed4fbc66375329775635bf">Sandbox.Engine.Physics.MyPhysics.CollisionLayers.DefaultCollisionLayer</a></div><div class="ttdeci">const int DefaultCollisionLayer</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00122">MyPhysics.cs:122</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_a7973ae211be4c69693212a02b97636aa"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#a7973ae211be4c69693212a02b97636aa">VRageMath.Vector3.Z</a></div><div class="ttdeci">float Z</div><div class="ttdoc">Gets or sets the z-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00059">Vector3.cs:59</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a8a1109f9da218443cc841df0a8b414cf"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8a1109f9da218443cc841df0a8b414cf">Sandbox.Engine.Physics.MyPhysicsBody.DebugDraw</a></div><div class="ttdeci">override void DebugDraw()</div><div class="ttdoc">Debug draw of this physics object. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00664">MyPhysicsBody.cs:664</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_1_1_cube_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities_1_1_cube.html">Sandbox.Game.Entities.Cube</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_assembler_8cs_source.html#l00041">MyAssembler.cs:41</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_utils_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_utils.html">Sandbox.Game.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_material_properties_helper_8cs_source.html#l00016">MyMaterialPropertiesHelper.cs:16</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ade535bff613e079bb3b2cfdd7e0ef498"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ade535bff613e079bb3b2cfdd7e0ef498">Sandbox.Engine.Physics.MyPhysicsBody.Close</a></div><div class="ttdeci">override void Close()</div><div class="ttdoc">Initializes a new instance of the MyPhysicsBody class. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00480">MyPhysicsBody.cs:480</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_collections_1_1_hash_set_reader_html"><div class="ttname"><a href="struct_v_rage_1_1_collections_1_1_hash_set_reader.html">VRage.Collections.HashSetReader</a></div><div class="ttdef"><b>Definition:</b> <a href="_hash_set_reader_8cs_source.html#l00011">HashSetReader.cs:11</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_gui_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_gui.html">Sandbox.Game.Gui</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_honza_input_component_8cs_source.html#l00029">MyHonzaInputComponent.cs:29</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_a8fa0ae81d4b9318107530235d4dcbe8c"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#a8fa0ae81d4b9318107530235d4dcbe8c">VRageMath.Vector3.X</a></div><div class="ttdeci">float X</div><div class="ttdoc">Gets or sets the x-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00049">Vector3.cs:49</a></div></div>
<div class="ttc" id="_my_gui_skin_definition_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_my_gui_skin_definition_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_my_gui_skin_definition_8cs_source.html#l00001">MyGuiSkinDefinition.cs:1</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_engine_constants_html_a16d1a765fd22b7b17a79a19e7cfc830f"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_engine_constants.html#a16d1a765fd22b7b17a79a19e7cfc830f">VRage.Game.MyEngineConstants.UPDATE_STEP_SIZE_IN_SECONDS</a></div><div class="ttdeci">const float UPDATE_STEP_SIZE_IN_SECONDS</div><div class="ttdef"><b>Definition:</b> <a href="_my_engine_constants_8cs_source.html#l00008">MyEngineConstants.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html">Sandbox.Engine.Physics.MyPhysics</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00047">MyPhysics.cs:47</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a8cb030b23cd88e9181c5efee5dc3fe9f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8cb030b23cd88e9181c5efee5dc3fe9f">Sandbox.Engine.Physics.MyPhysicsBody.SynchronizeKeyframedRigidBody</a></div><div class="ttdeci">void SynchronizeKeyframedRigidBody()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01306">MyPhysicsBody.cs:1306</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_1_1_character_html_a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities_1_1_character.html#a1f1b0ed92b310659c5068aec38f5bf1da00d23a76e43b46dae9ec7aa9dcbebb32">Sandbox.Game.Entities.Character.Enabled</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_html_a08fcf9fbcb9ba375a997613dcc7e4611"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix.html#a08fcf9fbcb9ba375a997613dcc7e4611">VRageMath.Matrix.Up</a></div><div class="ttdeci">Vector3 Up</div><div class="ttdoc">Gets and sets the up vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_8cs_source.html#l00148">Matrix.cs:148</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_utils_1_1_my_string_id_html"><div class="ttname"><a href="struct_v_rage_1_1_utils_1_1_my_string_id.html">VRage.Utils.MyStringId</a></div><div class="ttdoc">Generates unique IDs for strings. When used as key for hash tables (Dictionary or HashSet) always pas...</div><div class="ttdef"><b>Definition:</b> <a href="_my_string_id_8cs_source.html#l00017">MyStringId.cs:17</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_component_definition_base_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_component_definition_base.html">VRage.Game.MyComponentDefinitionBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_component_definition_base_8cs_source.html#l00006">MyComponentDefinitionBase.cs:6</a></div></div>
<div class="ttc" id="namespace_color_html"><div class="ttname"><a href="namespace_color.html">Color</a></div></div>
<div class="ttc" id="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree_html"><div class="ttname"><a href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html">VRageMath.Spatial.MyClusterTree</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_cluster_tree_8cs_source.html#l00012">MyClusterTree.cs:12</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a94c37207743db91eb4f99b6e941125c8"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a94c37207743db91eb4f99b6e941125c8">Sandbox.Engine.Physics.MyPhysicsBody.FinishAddBatch</a></div><div class="ttdeci">void FinishAddBatch()</div><div class="ttdoc">Called when adding multiple objects is finished. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01119">MyPhysicsBody.cs:1119</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_a1445baef094070a8aee6bb8247c294be"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a1445baef094070a8aee6bb8247c294be">VRage.Game.Entity.MyEntity.EntityId</a></div><div class="ttdeci">long EntityId</div><div class="ttdoc">Entity id, can be set by subclasses (for example when using pool...) </div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00148">MyEntity.cs:148</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a4a3bb5f535e4dcd8090948f9dbae46b0"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4a3bb5f535e4dcd8090948f9dbae46b0">Sandbox.Engine.Physics.MyPhysicsBody.GetShape</a></div><div class="ttdeci">virtual HkShape GetShape()</div><div class="ttdoc">Gets shape of this physics body even if its welded with other </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01806">MyPhysicsBody.cs:1806</a></div></div>
<div class="ttc" id="namespace_vector3_d_html"><div class="ttname"><a href="namespace_vector3_d.html">Vector3D</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_definitions_html"><div class="ttname"><a href="namespace_sandbox_1_1_definitions.html">Sandbox.Definitions</a></div><div class="ttdef"><b>Definition:</b> <a href="_sandbox_8_common_2_my_definition_errors_8cs_source.html#l00008">MyDefinitionErrors.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entity_components_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entity_components.html">Sandbox.Game.EntityComponents</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_area_trigger_component_8cs_source.html#l00012">MyAreaTriggerComponent.cs:12</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a2daf910eca1649573e35e8aa68d04d4d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a2daf910eca1649573e35e8aa68d04d4d">Sandbox.Engine.Physics.MyPhysicsBody.m_bodyMatrix</a></div><div class="ttdeci">Matrix m_bodyMatrix</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00090">MyPhysicsBody.cs:90</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base_html_a6b3b85eda7691af8c8d19ad4c77f3a77"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#a6b3b85eda7691af8c8d19ad4c77f3a77">VRage.Game.Components.MyPositionComponentBase.SetWorldMatrix</a></div><div class="ttdeci">virtual void SetWorldMatrix(MatrixD worldMatrix, object source=null, bool forceUpdate=false, bool updateChildren=true)</div><div class="ttdoc">Sets the world matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_my_position_component_base_8cs_source.html#l00238">MyPositionComponentBase.cs:238</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_utils_html"><div class="ttname"><a href="namespace_v_rage_1_1_utils.html">VRage.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my5_bit_encoding_8cs_source.html#l00006">My5BitEncoding.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_networking_1_1_my_analytics_helper.html">Sandbox.Engine.Networking.MyAnalyticsHelper</a></div><div class="ttdoc">Helper class to call used analytics in a game (implementation of IMyAnalytics interface) ...</div><div class="ttdef"><b>Definition:</b> <a href="_my_analytics_helper_8cs_source.html#l00031">MyAnalyticsHelper.cs:31</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_aeddf3315eac2b1c002f5e665a846fd85"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aeddf3315eac2b1c002f5e665a846fd85">Sandbox.Engine.Physics.MyPhysicsBody.MyPhysicsBody</a></div><div class="ttdeci">MyPhysicsBody()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00450">MyPhysicsBody.cs:450</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html">Sandbox.Game.World.MyAudioComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_audio_component_8cs_source.html#l00025">MyAudioComponent.cs:25</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html"><div class="ttname"><a href="namespace_v_rage_1_1_game.html">VRage.Game</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_object_builders_html"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_object_builders.html">VRage.Game.ObjectBuilders</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a67d27705a38cda701a422bd721400e2f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a67d27705a38cda701a422bd721400e2f">Sandbox.Engine.Physics.MyPhysicsBody.Clear</a></div><div class="ttdeci">override void Clear()</div><div class="ttdoc">Clear all dynamic values of physics object. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00659">MyPhysicsBody.cs:659</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_networking_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_networking.html">Sandbox.Engine.Networking</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_analytics_8cs_source.html#l00008">IMyAnalytics.cs:8</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ad24462a328026e003f84e6fbf50fbf48"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ad24462a328026e003f84e6fbf50fbf48">Sandbox.Engine.Physics.MyPhysicsBody.OnMotion</a></div><div class="ttdeci">virtual void OnMotion(HkRigidBody rbo, float step, bool fromParent=false)</div><div class="ttdoc">Called when [motion]. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01222">MyPhysicsBody.cs:1222</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_adaee247939f34a696a7e8bc239f8f419"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#adaee247939f34a696a7e8bc239f8f419">VRage.Game.Entity.MyEntity.WorldMatrix</a></div><div class="ttdeci">MatrixD WorldMatrix</div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00307">MyEntity.cs:307</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_entity_component_container_html_ab5c941e7fcfec354bd634605e52efed4"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_entity_component_container.html#ab5c941e7fcfec354bd634605e52efed4">VRage.Game.Components.MyEntityComponentContainer.Entity</a></div><div class="ttdeci">IMyEntity Entity</div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_component_container_8cs_source.html#l00013">MyEntityComponentContainer.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a4760b19f38c2b46941d3094dd5312a04"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4760b19f38c2b46941d3094dd5312a04">Sandbox.Engine.Physics.MyPhysicsBody.Activate</a></div><div class="ttdeci">virtual void Activate(object world, ulong clusterObjectID)</div><div class="ttdoc">Called when standalone object is added to cluster </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01619">MyPhysicsBody.cs:1619</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base_html_aabab933a8121949c2643215e51550fc7"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#aabab933a8121949c2643215e51550fc7">VRage.Game.Components.MyPositionComponentBase.WorldAABB</a></div><div class="ttdeci">BoundingBoxD WorldAABB</div><div class="ttdoc">Gets the world aabb. </div><div class="ttdef"><b>Definition:</b> <a href="_my_position_component_base_8cs_source.html#l00062">MyPositionComponentBase.cs:62</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_a0cc308f11c2653511ef193ce14053e70"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#a0cc308f11c2653511ef193ce14053e70">VRage.Game.Entity.MyEntity.Components</a></div><div class="ttdeci">MyEntityComponentContainer Components</div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00034">MyEntity.cs:34</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_app_code_html"><div class="ttname"><a href="namespace_sandbox_1_1_app_code.html">Sandbox.AppCode</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_aad4b0646ca93d616b2ff44b48de55041"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aad4b0646ca93d616b2ff44b48de55041">Sandbox.Engine.Physics.MyPhysicsBody.Deactivate</a></div><div class="ttdeci">override void Deactivate()</div><div class="ttdoc">Deactivates this rigid body in physics. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00994">MyPhysicsBody.cs:994</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_html_ac3c0cd3093d32bfbd1917b55463e394a"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ac3c0cd3093d32bfbd1917b55463e394a">Sandbox.Game.EntityComponents.MyModelComponent.Definition</a></div><div class="ttdeci">MyModelComponentDefinition Definition</div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_8cs_source.html#l00026">MyModelComponent.cs:26</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_physics_component_definition_base_html_a73cd17ea0042b9f427c66a0766a191d6"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_physics_component_definition_base.html#a73cd17ea0042b9f427c66a0766a191d6">VRage.Game.MyPhysicsComponentDefinitionBase.MassPropertiesComputation</a></div><div class="ttdeci">MyObjectBuilder_PhysicsComponentDefinitionBase.MyMassPropertiesComputationType MassPropertiesComputation</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_component_definition_base_8cs_source.html#l00010">MyPhysicsComponentDefinitionBase.cs:10</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_abb00c832708d42279de12226c1994444"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#abb00c832708d42279de12226c1994444">Sandbox.Engine.Physics.MyPhysics.RemoveObject</a></div><div class="ttdeci">static void RemoveObject(ulong id)</div><div class="ttdoc">Remove object from world, remove also subspace if empty. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l01506">MyPhysics.cs:1506</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups_html_a447ade22b30e0a2ca2b340747d56bfee"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html#a447ade22b30e0a2ca2b340747d56bfee">Sandbox.Engine.Physics.MyWeldingGroups.ReplaceParent</a></div><div class="ttdeci">static MyEntity ReplaceParent(Group group, MyEntity oldParent, MyEntity newParent)</div><div class="ttdoc">Replace common parent in weld group old parent is not considered part of weld group anymore (isnt wel...</div><div class="ttdef"><b>Definition:</b> <a href="_my_welding_groups_8cs_source.html#l00049">MyWeldingGroups.cs:49</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entities_1_1_my_voxel_base.html">Sandbox.Game.Entities.MyVoxelBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_voxel_base_8cs_source.html#l00029">MyVoxelBase.cs:29</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ae4b90f47ebace66ed55838932fc0fbb9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae4b90f47ebace66ed55838932fc0fbb9">Sandbox.Engine.Physics.MyPhysicsBody.OnAddedToScene</a></div><div class="ttdeci">override void OnAddedToScene()</div><div class="ttdoc">CH: TOOD: Be careful! This does not get called if the component is added to a container that is in th...</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01873">MyPhysicsBody.cs:1873</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a8ec4a61146fecf1f762858c7e4b2ea7d"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ec4a61146fecf1f762858c7e4b2ea7d">Sandbox.Engine.Physics.MyPhysicsBody.OnWorldPositionChanged</a></div><div class="ttdeci">override void OnWorldPositionChanged(object source)</div><div class="ttdoc">Called when [world position changed]. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01399">MyPhysicsBody.cs:1399</a></div></div>
<div class="ttc" id="namespace_havok_html"><div class="ttname"><a href="namespace_havok.html">Havok</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_physics_mesh_8cs_source.html#l00007">IPhysicsMesh.cs:7</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html">VRage.Game.ObjectBuilders.ComponentSystem.MyObjectBuilder_PhysicsComponentDefinitionBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___physics_component_definition_base_8cs_source.html#l00011">MyObjectBuilder_PhysicsComponentDefinitionBase.cs:11</a></div></div>
<div class="ttc" id="namespace_bounding_box_d_html"><div class="ttname"><a href="namespace_bounding_box_d.html">BoundingBoxD</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_html_a4972a5869747cf9b39eb3d363a80cbd9"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#a4972a5869747cf9b39eb3d363a80cbd9">Sandbox.Game.EntityComponents.MyModelComponent.ModelChanged</a></div><div class="ttdeci">static MyStringHash ModelChanged</div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_8cs_source.html#l00024">MyModelComponent.cs:24</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a5870439789c016ca3c302b65ee740000"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5870439789c016ca3c302b65ee740000">Sandbox.Engine.Physics.MyPhysicsBody.Activate</a></div><div class="ttdeci">override void Activate()</div><div class="ttdoc">Activates this rigid body in physics. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01604">MyPhysicsBody.cs:1604</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_body_component_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_body_component.html">VRage.Game.ObjectBuilders.ComponentSystem.MyObjectBuilder_PhysicsBodyComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___physics_body_component_8cs_source.html#l00008">MyObjectBuilder_PhysicsBodyComponent.cs:8</a></div></div>
<div class="ttc" id="_my_physics_body_8cs_html_a1cd8713ba6aa75194cf8496a382faced"><div class="ttname"><a href="_my_physics_body_8cs.html#a1cd8713ba6aa75194cf8496a382faced">DYNAMIC_CHARACTER_CONTROLLER</a></div><div class="ttdeci">#define DYNAMIC_CHARACTER_CONTROLLER</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00001">MyPhysicsBody.cs:1</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_adbfe1a6bd052137c791d2cdaaba12eea"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#adbfe1a6bd052137c791d2cdaaba12eea">Sandbox.Engine.Physics.MyPhysics.GetCollisionLayer</a></div><div class="ttdeci">static int GetCollisionLayer(string strLayer)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l01428">MyPhysics.cs:1428</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_library_1_1_utils_html"><div class="ttname"><a href="namespace_v_rage_1_1_library_1_1_utils.html">VRage.Library.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_blittable_helper_8cs_source.html#l00008">BlittableHelper.cs:8</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_mod_a_p_i_html_a7beb854f7c2e3825d10973e0cc1be3baad8e87c0927539672f54462c837be0b7f"><div class="ttname"><a href="namespace_v_rage_1_1_mod_a_p_i.html#a7beb854f7c2e3825d10973e0cc1be3baad8e87c0927539672f54462c837be0b7f">VRage.ModAPI.Sync</a></div><div class="ttdoc">Synchronize object during multiplayer </div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ac96a6e64fb0109293654c257d897418b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac96a6e64fb0109293654c257d897418b">Sandbox.Engine.Physics.MyPhysicsBody.UpdateFromSystem</a></div><div class="ttdeci">override void UpdateFromSystem()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01899">MyPhysicsBody.cs:1899</a></div></div>
<div class="ttc" id="namespace_math_html"><div class="ttname"><a href="namespace_math.html">Math</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a4b18a415223467f77321139de73c69d6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a4b18a415223467f77321139de73c69d6">Sandbox.Engine.Physics.MyPhysicsBody.ActivateCollision</a></div><div class="ttdeci">virtual void ActivateCollision()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00989">MyPhysicsBody.cs:989</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base_html_aba7e4147273d10608cbf27b4642cbebb"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html#aba7e4147273d10608cbf27b4642cbebb">VRage.Game.Components.MyPhysicsComponentBase.GetVelocityAtPoint</a></div><div class="ttdeci">abstract Vector3 GetVelocityAtPoint(Vector3D worldPos)</div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a1e59ed4fe9c189e507adb2aca0ef3b76"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1e59ed4fe9c189e507adb2aca0ef3b76">Sandbox.Engine.Physics.MyPhysicsBody.RemoveConstraint</a></div><div class="ttdeci">void RemoveConstraint(HkConstraint constraint)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01560">MyPhysicsBody.cs:1560</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_session_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_session.html">Sandbox.Game.World.MySession</a></div><div class="ttdoc">Base class for all session types (single, coop, mmo, sandbox) </div><div class="ttdef"><b>Definition:</b> <a href="_my_session_8_components_8cs_source.html#l00025">MySession.Components.cs:25</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a619b946fb1a4c65b3266630a7901f4f6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a619b946fb1a4c65b3266630a7901f4f6">Sandbox.Engine.Physics.MyPhysicsBody.MyPhysicsBody</a></div><div class="ttdeci">MyPhysicsBody(IMyEntity entity, RigidBodyFlag flags)</div><div class="ttdoc">Initializes a new instance of the MyPhysicsBody class. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00458">MyPhysicsBody.cs:458</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entities_1_1_character_1_1_my_character_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entities_1_1_character_1_1_my_character.html">Sandbox.Game.Entities.Character.MyCharacter</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_character_8cs_source.html#l00162">MyCharacter.cs:162</a></div></div>
<div class="ttc" id="namespace_my_render_proxy_html"><div class="ttname"><a href="namespace_my_render_proxy.html">MyRenderProxy</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html">Sandbox.Game.EntityComponents.MyModelComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_8cs_source.html#l00022">MyModelComponent.cs:22</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_html_aea369121ace94073194cb1b33def465ea8a88c39cef668fb55f188af09665bd40"><div class="ttname"><a href="namespace_v_rage_1_1_game.html#aea369121ace94073194cb1b33def465ea8a88c39cef668fb55f188af09665bd40">VRage.Game.Gravity</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_mod_a_p_i_html"><div class="ttname"><a href="namespace_v_rage_1_1_mod_a_p_i.html">VRage.ModAPI</a></div><div class="ttdef"><b>Definition:</b> <a href="_input_2_mod_a_p_i_2_i_my_control_8cs_source.html#l00008">IMyControl.cs:8</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html">VRage.Game.Components.MyPhysicsComponentBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_component_base_8cs_source.html#l00053">MyPhysicsComponentBase.cs:53</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html">Sandbox.Engine.Physics.MyWeldingGroups</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_welding_groups_8cs_source.html#l00016">MyWeldingGroups.cs:16</a></div></div>
<div class="ttc" id="namespace_matrix_d_html"><div class="ttname"><a href="namespace_matrix_d.html">MatrixD</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_profiler_html"><div class="ttname"><a href="namespace_v_rage_1_1_profiler.html">VRage.Profiler</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_draw_area_8cs_source.html#l00003">MyDrawArea.cs:3</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ac91edc18f6372f4441de4a1332052a75"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ac91edc18f6372f4441de4a1332052a75">Sandbox.Engine.Physics.MyPhysicsBody.GetRigidBodyMatrix</a></div><div class="ttdeci">Matrix GetRigidBodyMatrix(MatrixD worldMatrix)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01478">MyPhysicsBody.cs:1478</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entities_1_1_my_cockpit_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entities_1_1_my_cockpit.html">Sandbox.Game.Entities.MyCockpit</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_cockpit_8cs_source.html#l00058">MyCockpit.cs:58</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_aa66145098d17da5cd7a55023a39654a9"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aa66145098d17da5cd7a55023a39654a9">Sandbox.Engine.Physics.MyPhysicsBody.ClusterToWorld</a></div><div class="ttdeci">override Vector3D ClusterToWorld(Vector3 clusterPos)</div><div class="ttdoc">Converts local cluster position to global space. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01596">MyPhysicsBody.cs:1596</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_game_systems_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_game_systems.html">Sandbox.Game.GameSystems</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_thrust_component_8cs_source.html#l00020">MyEntityThrustComponent.cs:20</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups_html_aa716bec16aa2b59e64241b4b94da95b8"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_welding_groups.html#aa716bec16aa2b59e64241b4b94da95b8">Sandbox.Engine.Physics.MyWeldingGroups.Static</a></div><div class="ttdeci">static MyWeldingGroups Static</div><div class="ttdef"><b>Definition:</b> <a href="_my_welding_groups_8cs_source.html#l00021">MyWeldingGroups.cs:21</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_ad324c3ff85ae9293cdef792963205093"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ad324c3ff85ae9293cdef792963205093">VRage.Game.Entity.MyEntity.Parent</a></div><div class="ttdeci">MyEntity Parent</div><div class="ttdoc">Gets or sets the parent. </div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00318">MyEntity.cs:318</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_ab249f95c5e12ec28dcca1ab0710f30f3"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#ab249f95c5e12ec28dcca1ab0710f30f3">Sandbox.Engine.Physics.MyPhysics.AddObject</a></div><div class="ttdeci">static ulong AddObject(BoundingBoxD bbox, MyPhysicsBody activationHandler, ulong?customId, string tag, long entityId)</div><div class="ttdoc">Try add object to some subspace. Create new subspace if allowed (!SingleCluster.HasValue) and needed ...</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l01531">MyPhysics.cs:1531</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_components_html_a3e38fdb2947c5da95b40c7db13e81b31"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_components.html#a3e38fdb2947c5da95b40c7db13e81b31">VRage.Game.Components.RigidBodyFlag</a></div><div class="ttdeci">RigidBodyFlag</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_component_base_8cs_source.html#l00014">MyPhysicsComponentBase.cs:14</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_entity_1_1_my_entity_html_ac85adf2451e47ce1c8bf900d4b0e9db8"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_entity_1_1_my_entity.html#ac85adf2451e47ce1c8bf900d4b0e9db8">VRage.Game.Entity.MyEntity.Closed</a></div><div class="ttdeci">bool Closed</div><div class="ttdef"><b>Definition:</b> <a href="_my_entity_8cs_source.html#l00190">MyEntity.cs:190</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ab39330a9f46c975f3d4e196525bcbeef"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ab39330a9f46c975f3d4e196525bcbeef">Sandbox.Engine.Physics.MyPhysicsBody.m_linearDamping</a></div><div class="ttdeci">float m_linearDamping</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00068">MyPhysicsBody.cs:68</a></div></div>
<div class="ttc" id="namespace_v_rage_math_html"><div class="ttname"><a href="namespace_v_rage_math.html">VRageMath</a></div><div class="ttdef"><b>Definition:</b> <a href="_base27_directions_8cs_source.html#l00007">Base27Directions.cs:7</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a5ad7abe29ce6ea00f18be45004e09f62"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a5ad7abe29ce6ea00f18be45004e09f62">Sandbox.Engine.Physics.MyPhysicsBody.GetRigidBodyMatrix</a></div><div class="ttdeci">void GetRigidBodyMatrix(out Matrix m)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01468">MyPhysicsBody.cs:1468</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_entities_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_entities.html">Sandbox.Game.Entities</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_entity3_d_sound_emitter_8cs_source.html#l00018">MyEntity3DSoundEmitter.cs:18</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_multiplayer_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_multiplayer.html">Sandbox.Game.Multiplayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_sync_destructions_8cs_source.html#l00033">MySyncDestructions.cs:33</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_physics_body_component_definition_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_physics_body_component_definition.html">Sandbox.Game.EntityComponents.MyPhysicsBodyComponentDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_component_definition_8cs_source.html#l00013">MyPhysicsBodyComponentDefinition.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a93b2e483324c18f4457fe1dee3bbb6c6"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a93b2e483324c18f4457fe1dee3bbb6c6">Sandbox.Engine.Physics.MyPhysicsBody.DeactivateBatch</a></div><div class="ttdeci">virtual void DeactivateBatch(object world)</div><div class="ttdoc">Called when multiple objects are removed from cluster. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01080">MyPhysicsBody.cs:1080</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ae39b77ca7a52b81e2e87bc41cfc8894b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae39b77ca7a52b81e2e87bc41cfc8894b">Sandbox.Engine.Physics.MyPhysicsBody.ForceActivate</a></div><div class="ttdeci">override void ForceActivate()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01179">MyPhysicsBody.cs:1179</a></div></div>
<div class="ttc" id="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree_html_a72eacc37d4fa5e58be5b698703ad5de3"><div class="ttname"><a href="class_v_rage_math_1_1_spatial_1_1_my_cluster_tree.html#a72eacc37d4fa5e58be5b698703ad5de3">VRageMath.Spatial.MyClusterTree.CLUSTERED_OBJECT_ID_UNITIALIZED</a></div><div class="ttdeci">const ulong CLUSTERED_OBJECT_ID_UNITIALIZED</div><div class="ttdef"><b>Definition:</b> <a href="_my_cluster_tree_8cs_source.html#l00074">MyClusterTree.cs:74</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers_html_ac0f5409ebc3c7def4130acd13caff065"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#ac0f5409ebc3c7def4130acd13caff065">Sandbox.Engine.Physics.MyPhysics.CollisionLayers.NoCollisionLayer</a></div><div class="ttdeci">const int NoCollisionLayer</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00126">MyPhysics.cs:126</a></div></div>
<div class="ttc" id="namespace_sandbox_html_a3df5667fabda75033481d325b1fcbf5bad3d2e617335f08df83599665eef8a418"><div class="ttname"><a href="namespace_sandbox.html#a3df5667fabda75033481d325b1fcbf5bad3d2e617335f08df83599665eef8a418">Sandbox.Close</a></div></div>
<div class="ttc" id="namespace_system_1_1_collections_html"><div class="ttname"><a href="namespace_system_1_1_collections.html">System.Collections</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_my_engine_constants_html"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_my_engine_constants.html">VRage.Game.MyEngineConstants</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_engine_constants_8cs_source.html#l00003">MyEngineConstants.cs:3</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_af61d511349a41b67cf85aa40f66c685b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#af61d511349a41b67cf85aa40f66c685b">Sandbox.Engine.Physics.MyPhysicsBody.FinishRemoveBatch</a></div><div class="ttdeci">void FinishRemoveBatch(object userData)</div><div class="ttdoc">Called when removing multiple objects is finished. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01152">MyPhysicsBody.cs:1152</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base_html_ac3db4feede708088b64b120daf8c81a8"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_object_builders_1_1_component_system_1_1_my_object_builder___physics_component_definition_base.html#ac3db4feede708088b64b120daf8c81a8">VRage.Game.ObjectBuilders.ComponentSystem.MyObjectBuilder_PhysicsComponentDefinitionBase.MyMassPropertiesComputationType</a></div><div class="ttdeci">MyMassPropertiesComputationType</div><div class="ttdef"><b>Definition:</b> <a href="_my_object_builder___physics_component_definition_base_8cs_source.html#l00013">MyObjectBuilder_PhysicsComponentDefinitionBase.cs:13</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a9914239b9d46f3c6bdd7dd5ba58dbb0b"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a9914239b9d46f3c6bdd7dd5ba58dbb0b">Sandbox.Engine.Physics.MyPhysicsBody.WorldToCluster</a></div><div class="ttdeci">override Vector3D WorldToCluster(Vector3D worldPos)</div><div class="ttdoc">Converts global space position to local cluster space. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01591">MyPhysicsBody.cs:1591</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_html_a7e3ed11371b2302fd800d28b1c3b817c"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics.html#a7e3ed11371b2302fd800d28b1c3b817c">Sandbox.Engine.Physics.MyPhysics.MoveObject</a></div><div class="ttdeci">static void MoveObject(ulong id, BoundingBoxD aabb, Vector3 velocity)</div><div class="ttdoc">Change position of object in world. Move object between subspaces if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l01497">MyPhysics.cs:1497</a></div></div>
<div class="ttc" id="namespace_v_rage_render_html"><div class="ttname"><a href="namespace_v_rage_render.html">VRageRender</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a7fbb512531ee4f3849399b00c83001bf"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a7fbb512531ee4f3849399b00c83001bf">Sandbox.Engine.Physics.MyPhysicsBody.CreateCharacterCollision</a></div><div class="ttdeci">override void CreateCharacterCollision(Vector3 center, float characterWidth, float characterHeight, float crouchHeight, float ladderHeight, float headSize, float headHeight, MatrixD worldTransform, float mass, ushort collisionLayer, bool isOnlyVertical, float maxSlope, float maxImpulse, float maxSpeedRelativeToShip, bool networkProxy, float?maxForce=null)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00944">MyPhysicsBody.cs:944</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_trace_html"><div class="ttname"><a href="namespace_v_rage_1_1_trace.html">VRage.Trace</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_trace_8cs_source.html#l00006">ITrace.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html">Sandbox.Game.EntityComponents.MyModelComponentDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_definition_8cs_source.html#l00014">MyModelComponentDefinition.cs:14</a></div></div>
<div class="ttc" id="_my_camera_8cs_html_ae65023afd5ab6af4293a2e4ea3aca407"><div class="ttname"><a href="_my_camera_8cs.html#ae65023afd5ab6af4293a2e4ea3aca407">BoundingBoxD</a></div><div class="ttdeci">VRageMath.BoundingBoxD BoundingBoxD</div><div class="ttdef"><b>Definition:</b> <a href="_my_camera_8cs_source.html#l00010">MyCamera.cs:10</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_my_contact_point_event.html">Sandbox.Engine.Physics.MyPhysics.MyContactPointEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00082">MyPhysics.cs:82</a></div></div>
<div class="ttc" id="namespace_sandbox_html"><div class="ttname"><a href="namespace_sandbox.html">Sandbox</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_html_ae98b2d4019519b0120f7058526b835a6"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component.html#ae98b2d4019519b0120f7058526b835a6">Sandbox.Game.EntityComponents.MyModelComponent.ModelCollision</a></div><div class="ttdeci">MyModel ModelCollision</div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_8cs_source.html#l00035">MyModelComponent.cs:35</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers_html"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html">Sandbox.Engine.Physics.MyPhysics.CollisionLayers</a></div><div class="ttdoc">Collision layers that can be used to filter what collision should be found for casting methods...</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00107">MyPhysics.cs:107</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_d_html_a2cf7c06f225534ac8c1d9d7272833655"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix_d.html#a2cf7c06f225534ac8c1d9d7272833655">VRageMath.MatrixD.Translation</a></div><div class="ttdeci">Vector3D Translation</div><div class="ttdoc">Gets and sets the translation vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_d_8cs_source.html#l00461">MatrixD.cs:461</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a16c1affb2ed4007298bf82e292f48026"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a16c1affb2ed4007298bf82e292f48026">Sandbox.Engine.Physics.MyPhysicsBody.m_world</a></div><div class="ttdeci">HkWorld m_world</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00094">MyPhysicsBody.cs:94</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy_html_a692028299e363365c08f0407995673e1"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html#a692028299e363365c08f0407995673e1">Sandbox.Engine.Physics.MyCharacterProxy.CreateCharacterShape</a></div><div class="ttdeci">static HkShape CreateCharacterShape(float height, float width, float headHeight, float headSize, float headForwardOffset, float downOffset=0, bool capsuleForHead=false)</div><div class="ttdef"><b>Definition:</b> <a href="_my_character_proxy_8cs_source.html#l00063">MyCharacterProxy.cs:63</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a57063757d45ac87891d0cd6ed69bcd85"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a57063757d45ac87891d0cd6ed69bcd85">Sandbox.Engine.Physics.MyPhysicsBody.m_angularDamping</a></div><div class="ttdeci">float m_angularDamping</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00067">MyPhysicsBody.cs:67</a></div></div>
<div class="ttc" id="namespace_v_rage_html"><div class="ttname"><a href="namespace_v_rage.html">VRage</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_html_a61efb7ecb2de3857f55f91d9acf44e4a"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix.html#a61efb7ecb2de3857f55f91d9acf44e4a">VRageMath.Matrix.Translation</a></div><div class="ttdeci">Vector3 Translation</div><div class="ttdoc">Gets and sets the translation vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_8cs_source.html#l00478">Matrix.cs:478</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base_html_afd61d28f2eda68cca34fc113b77987dd"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_position_component_base.html#afd61d28f2eda68cca34fc113b77987dd">VRage.Game.Components.MyPositionComponentBase.GetPosition</a></div><div class="ttdeci">Vector3D GetPosition()</div><div class="ttdoc">Gets the entity position. </div><div class="ttdef"><b>Definition:</b> <a href="_my_position_component_base_8cs_source.html#l00294">MyPositionComponentBase.cs:294</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a8ebfef6d964a99ede7f694fba2cddafc"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a8ebfef6d964a99ede7f694fba2cddafc">Sandbox.Engine.Physics.MyPhysicsBody.ActivateBatch</a></div><div class="ttdeci">virtual void ActivateBatch(object world, ulong clusterObjectID)</div><div class="ttdoc">Called when multiple objects are added to cluster. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01696">MyPhysicsBody.cs:1696</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system_html"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_game_systems_1_1_my_gravity_provider_system.html">Sandbox.Game.GameSystems.MyGravityProviderSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_gravity_provider_system_8cs_source.html#l00010">MyGravityProviderSystem.cs:10</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_game_1_1_replication_html"><div class="ttname"><a href="namespace_sandbox_1_1_game_1_1_replication.html">Sandbox.Game.Replication</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_utils_1_1_my_string_hash_html_a1152d628d02d88f56878ad3fbdfccab5"><div class="ttname"><a href="struct_v_rage_1_1_utils_1_1_my_string_hash.html#a1152d628d02d88f56878ad3fbdfccab5">VRage.Utils.MyStringHash.GetOrCompute</a></div><div class="ttdeci">static MyStringHash GetOrCompute(string str)</div><div class="ttdef"><b>Definition:</b> <a href="_my_string_hash_8cs_source.html#l00106">MyStringHash.cs:106</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_d_html_ae093fe8e5282daf2a22a9377a228fcaa"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3_d.html#ae093fe8e5282daf2a22a9377a228fcaa">VRageMath.Vector3D.AssertIsValid</a></div><div class="ttdeci">void AssertIsValid()</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_d_8cs_source.html#l00424">Vector3D.cs:424</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a44552f34ca03f88933c9ca2cdbace5e5"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a44552f34ca03f88933c9ca2cdbace5e5">Sandbox.Engine.Physics.MyPhysicsBody.UpdateCluster</a></div><div class="ttdeci">void UpdateCluster()</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01754">MyPhysicsBody.cs:1754</a></div></div>
<div class="ttc" id="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base_html_a498f78542991edbe51a0b7c804213539"><div class="ttname"><a href="class_v_rage_1_1_game_1_1_components_1_1_my_physics_component_base.html#a498f78542991edbe51a0b7c804213539">VRage.Game.Components.MyPhysicsComponentBase.LinearVelocity</a></div><div class="ttdeci">abstract Vector3 LinearVelocity</div><div class="ttdoc">Gets or sets the linear velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_component_base_8cs_source.html#l00181">MyPhysicsComponentBase.cs:181</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a1a16d4bac5b0cd8ca6fa637b0d975867"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a1a16d4bac5b0cd8ca6fa637b0d975867">Sandbox.Engine.Physics.MyPhysicsBody.GetInfoFromFlags</a></div><div class="ttdeci">static void GetInfoFromFlags(HkRigidBodyCinfo rbInfo, RigidBodyFlag flags)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l00835">MyPhysicsBody.cs:835</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition_html_abe552691f10cc38b3aab9b6c49e139c2"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_entity_components_1_1_my_model_component_definition.html#abe552691f10cc38b3aab9b6c49e139c2">Sandbox.Game.EntityComponents.MyModelComponentDefinition.Mass</a></div><div class="ttdeci">float Mass</div><div class="ttdef"><b>Definition:</b> <a href="_my_model_component_definition_8cs_source.html#l00017">MyModelComponentDefinition.cs:17</a></div></div>
<div class="ttc" id="namespace_vector3_html"><div class="ttname"><a href="namespace_vector3.html">Vector3</a></div></div>
<div class="ttc" id="namespace_matrix_html"><div class="ttname"><a href="namespace_matrix.html">Matrix</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_common_html"><div class="ttname"><a href="namespace_sandbox_1_1_common.html">Sandbox.Common</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_render_debug_input_component_8cs_source.html#l00009">MyRenderDebugInputComponent.cs:9</a></div></div>
<div class="ttc" id="namespace_vector4_html"><div class="ttname"><a href="namespace_vector4.html">Vector4</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_bounding_box_d_html_a2d1f66c2a4a842550650c04c20a275dd"><div class="ttname"><a href="struct_v_rage_math_1_1_bounding_box_d.html#a2d1f66c2a4a842550650c04c20a275dd">VRageMath.BoundingBoxD.Inflate</a></div><div class="ttdeci">BoundingBoxD Inflate(double size)</div><div class="ttdef"><b>Definition:</b> <a href="_bounding_box_d_8cs_source.html#l01193">BoundingBoxD.cs:1193</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_utils_1_1_my_string_id_html_a8385362f2856a13363692987fc99e29b"><div class="ttname"><a href="struct_v_rage_1_1_utils_1_1_my_string_id.html#a8385362f2856a13363692987fc99e29b">VRage.Utils.MyStringId.GetOrCompute</a></div><div class="ttdeci">static MyStringId GetOrCompute(string str)</div><div class="ttdef"><b>Definition:</b> <a href="_my_string_id_8cs_source.html#l00107">MyStringId.cs:107</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_matrix_d_html_ae858a625b2b3d4b5e6bd3ffd7f194ff2"><div class="ttname"><a href="struct_v_rage_math_1_1_matrix_d.html#ae858a625b2b3d4b5e6bd3ffd7f194ff2">VRageMath.MatrixD.Up</a></div><div class="ttdeci">Vector3D Up</div><div class="ttdoc">Gets and sets the up vector of the Matrix. </div><div class="ttdef"><b>Definition:</b> <a href="_matrix_d_8cs_source.html#l00149">MatrixD.cs:149</a></div></div>
<div class="ttc" id="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component_html_a515ec5ab1425cb9fe9971f36a2561dfd"><div class="ttname"><a href="class_sandbox_1_1_game_1_1_world_1_1_my_audio_component.html#a515ec5ab1425cb9fe9971f36a2561dfd">Sandbox.Game.World.MyAudioComponent.PlayContactSound</a></div><div class="ttdeci">static bool PlayContactSound(long entityId, MyStringId strID, Vector3D position, MyStringHash materialA, MyStringHash materialB, float volume=1, Func&lt; bool &gt; canHear=null, Func&lt; bool &gt; shouldPlay2D=null, MyEntity surfaceEntity=null, float separatingVelocity=0f)</div><div class="ttdef"><b>Definition:</b> <a href="_my_audio_component_8cs_source.html#l00177">MyAudioComponent.cs:177</a></div></div>
<div class="ttc" id="struct_v_rage_math_1_1_vector3_html_ab3e1bb2d2d351b58864f23f3a87f7aaf"><div class="ttname"><a href="struct_v_rage_math_1_1_vector3.html#ab3e1bb2d2d351b58864f23f3a87f7aaf">VRageMath.Vector3.Y</a></div><div class="ttdeci">float Y</div><div class="ttdoc">Gets or sets the y-component of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8cs_source.html#l00054">Vector3.cs:54</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_library_html"><div class="ttname"><a href="namespace_v_rage_1_1_library.html">VRage.Library</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a50851b83ea0f2addcbb089f05fba27ae"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a50851b83ea0f2addcbb089f05fba27ae">Sandbox.Engine.Physics.MyPhysicsBody.AddConstraint</a></div><div class="ttdeci">void AddConstraint(HkConstraint constraint)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01538">MyPhysicsBody.cs:1538</a></div></div>
<div class="ttc" id="_my_texture_atlas_utils_8cs_html_a739619d477e8e447588f40eba590b3b3"><div class="ttname"><a href="_my_texture_atlas_utils_8cs.html#a739619d477e8e447588f40eba590b3b3">Vector3</a></div><div class="ttdeci">VRageMath.Vector3 Vector3</div><div class="ttdef"><b>Definition:</b> <a href="_my_texture_atlas_utils_8cs_source.html#l00020">MyTextureAtlasUtils.cs:20</a></div></div>
<div class="ttc" id="namespace_i_my_entity_html"><div class="ttname"><a href="namespace_i_my_entity.html">IMyEntity</a></div></div>
<div class="ttc" id="namespace_v_rage_1_1_game_1_1_entity_html"><div class="ttname"><a href="namespace_v_rage_1_1_game_1_1_entity.html">VRage.Game.Entity</a></div><div class="ttdef"><b>Definition:</b> <a href="_debug_created_by_8cs_source.html#l00001">DebugCreatedBy.cs:1</a></div></div>
<div class="ttc" id="namespace_v_rage_math_1_1_spatial_html"><div class="ttname"><a href="namespace_v_rage_math_1_1_spatial.html">VRageMath.Spatial</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_cluster_tree_8cs_source.html#l00008">MyClusterTree.cs:8</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_engine_1_1_utils_html"><div class="ttname"><a href="namespace_sandbox_1_1_engine_1_1_utils.html">Sandbox.Engine.Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_battle_helper_8cs_source.html#l00014">MyBattleHelper.cs:14</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy_html"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_character_proxy.html">Sandbox.Engine.Physics.MyCharacterProxy</a></div><div class="ttdef"><b>Definition:</b> <a href="_my_character_proxy_8cs_source.html#l00029">MyCharacterProxy.cs:29</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_a641b6f8c4ca3d1783cbc77dfd5315579"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#a641b6f8c4ca3d1783cbc77dfd5315579">Sandbox.Engine.Physics.MyPhysicsBody.OnAddedToContainer</a></div><div class="ttdeci">override void OnAddedToContainer()</div><div class="ttdoc">Gets called after the container of this component changes </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01861">MyPhysicsBody.cs:1861</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_aedcfa71d4375786ef7f57e4f00f517be"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#aedcfa71d4375786ef7f57e4f00f517be">Sandbox.Engine.Physics.MyPhysicsBody.ChangeQualityType</a></div><div class="ttdeci">virtual void ChangeQualityType(HkCollidableQualityType quality)</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01488">MyPhysicsBody.cs:1488</a></div></div>
<div class="ttc" id="namespace_sandbox_1_1_mod_a_p_i_html"><div class="ttname"><a href="namespace_sandbox_1_1_mod_a_p_i.html">Sandbox.ModAPI</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_my_advanced_door_8cs_source.html#l00006">IMyAdvancedDoor.cs:6</a></div></div>
<div class="ttc" id="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body_html_ae9cc74950103b20467d14b1b5ba2394f"><div class="ttname"><a href="class_sandbox_1_1_engine_1_1_physics_1_1_my_physics_body.html#ae9cc74950103b20467d14b1b5ba2394f">Sandbox.Engine.Physics.MyPhysicsBody.Deactivate</a></div><div class="ttdeci">virtual void Deactivate(object world)</div><div class="ttdoc">Called when standalone object is removed from cluster </div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_body_8cs_source.html#l01025">MyPhysicsBody.cs:1025</a></div></div>
<div class="ttc" id="struct_v_rage_1_1_utils_1_1_my_string_hash_html"><div class="ttname"><a href="struct_v_rage_1_1_utils_1_1_my_string_hash.html">VRage.Utils.MyStringHash</a></div><div class="ttdoc">Generates string hashes deterministically and crashes on collisions. When used as key for hash tables...</div><div class="ttdef"><b>Definition:</b> <a href="_my_string_hash_8cs_source.html#l00020">MyStringHash.cs:20</a></div></div>
<div class="ttc" id="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity_html_a3d99482fd65886b42c7a2c5ff6793af5"><div class="ttname"><a href="interface_sandbox_1_1_game_1_1_entities_1_1_i_my_controllable_entity.html#a3d99482fd65886b42c7a2c5ff6793af5">Sandbox.Game.Entities.IMyControllableEntity.Entity</a></div><div class="ttdeci">new MyEntity Entity</div><div class="ttdef"><b>Definition:</b> <a href="_i_my_controllable_entity_8cs_source.html#l00019">IMyControllableEntity.cs:19</a></div></div>
<div class="ttc" id="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers_html_aae50a542e0b8b63da92495018b4e563d"><div class="ttname"><a href="struct_sandbox_1_1_engine_1_1_physics_1_1_my_physics_1_1_collision_layers.html#aae50a542e0b8b63da92495018b4e563d">Sandbox.Engine.Physics.MyPhysics.CollisionLayers.CharacterCollisionLayer</a></div><div class="ttdeci">const int CharacterCollisionLayer</div><div class="ttdef"><b>Definition:</b> <a href="_my_physics_8cs_source.html#l00125">MyPhysics.cs:125</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 23 2017 01:16:20 for Space Engineers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
